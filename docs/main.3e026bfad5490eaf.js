"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[792],{187:()=>{function Kd(n,e){return Object.is(n,e)}let _n=null,ml=!1,gl=1;const Jr=Symbol("SIGNAL");function dt(n){const e=_n;return _n=n,e}const Xp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Z_(n){if(ml)throw new Error("");if(null===_n)return;_n.consumerOnSignalRead(n);const e=_n.nextProducerIndex++;Kp(_n),e<_n.producerNode.length&&_n.producerNode[e]!==n&&Jd(_n)&&Zp(_n.producerNode[e],_n.producerIndexOfThis[e]),_n.producerNode[e]!==n&&(_n.producerNode[e]=n,_n.producerIndexOfThis[e]=Jd(_n)?kC(n,_n,e):0),_n.producerLastReadVersion[e]=n.version}function NC(n){if((!Jd(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==gl)){if(!n.producerMustRecompute(n)&&!J_(n))return n.dirty=!1,void(n.lastCleanEpoch=gl);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=gl}}function OC(n){if(void 0===n.liveConsumerNode)return;const e=ml;ml=!0;try{for(const t of n.liveConsumerNode)t.dirty||FC(t)}finally{ml=e}}function LC(){return!1!==_n?.consumerAllowSignalWrites}function FC(n){n.dirty=!0,OC(n),n.consumerMarkedDirty?.(n)}function Yp(n){return n&&(n.nextProducerIndex=0),dt(n)}function K_(n,e){if(dt(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Jd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Zp(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function J_(n){Kp(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(NC(t),i!==t.version))return!0}return!1}function Q_(n){if(Kp(n),Jd(n))for(let e=0;e<n.producerNode.length;e++)Zp(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function kC(n,e,t){if(UC(n),0===n.liveConsumerNode.length&&BC(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=kC(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Zp(n,e){if(UC(n),1===n.liveConsumerNode.length&&BC(n))for(let i=0;i<n.producerNode.length;i++)Zp(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Kp(r),r.producerIndexOfThis[i]=e}}function Jd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Kp(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function UC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function BC(n){return void 0!==n.producerNode}const e0=Symbol("UNSET"),t0=Symbol("COMPUTING"),Jp=Symbol("ERRORED"),qz={...Xp,value:e0,dirty:!0,error:null,equal:Kd,producerMustRecompute:n=>n.value===e0||n.value===t0,producerRecomputeValue(n){if(n.value===t0)throw new Error("Detected cycle in computations.");const e=n.value;n.value=t0;const t=Yp(n);let i;try{i=n.computation()}catch(r){i=Jp,n.error=r}finally{K_(n,t)}e!==e0&&e!==Jp&&i!==Jp&&n.equal(e,i)?n.value=e:(n.value=i,n.version++)}};let VC=function Xz(){throw new Error};function zC(){VC()}let Qp=null;function HC(n,e){LC()||zC(),n.equal(n.value,e)||(n.value=e,function Qz(n){n.version++,function Wz(){gl++}(),OC(n),Qp?.()}(n))}const Jz={...Xp,equal:Kd,value:void 0};function en(n){return"function"==typeof n}function n0(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const r0=n0(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function s0(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Di{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(en(i))try{i()}catch(s){e=s instanceof r0?s.errors:[s]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const s of r)try{$C(s)}catch(o){e=e??[],o instanceof r0?e=[...e,...o.errors]:e.push(o)}}if(e)throw new r0(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$C(e);else{if(e instanceof Di){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&s0(t,e)}remove(e){const{_teardowns:t}=this;t&&s0(t,e),e instanceof Di&&e._removeParent(this)}}Di.EMPTY=(()=>{const n=new Di;return n.closed=!0,n})();const jC=Di.EMPTY;function WC(n){return n instanceof Di||n&&"closed"in n&&en(n.remove)&&en(n.add)&&en(n.unsubscribe)}function $C(n){en(n)?n():n.unsubscribe()}const $a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},em={setTimeout(...n){const{delegate:e}=em;return(e?.setTimeout||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=em;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qC(n){em.setTimeout(()=>{const{onUnhandledError:e}=$a;if(!e)throw n;e(n)})}function Qd(){}const tH=o0("C",void 0,void 0);function o0(n,e,t){return{kind:n,value:e,error:t}}let qa=null;function tm(n){if($a.useDeprecatedSynchronousErrorHandling){const e=!qa;if(e&&(qa={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=qa;if(qa=null,t)throw i}}else n()}class a0 extends Di{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,WC(e)&&e.add(this)):this.destination=sH}static create(e,t,i){return new XC(e,t,i)}next(e){this.isStopped?l0(function iH(n){return o0("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?l0(function nH(n){return o0("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?l0(tH,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class XC extends a0{constructor(e,t,i){let r;if(super(),en(e))r=e;else if(e){let s;({next:r,error:t,complete:i}=e),this&&$a.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe()):s=e,r=r?.bind(s),t=t?.bind(s),i=i?.bind(s)}this.destination={next:r?c0(r):Qd,error:c0(t??YC),complete:i?c0(i):Qd}}}function c0(n,e){return(...t)=>{try{n(...t)}catch(i){$a.useDeprecatedSynchronousErrorHandling?function rH(n){$a.useDeprecatedSynchronousErrorHandling&&qa&&(qa.errorThrown=!0,qa.error=n)}(i):qC(i)}}}function YC(n){throw n}function l0(n,e){const{onStoppedNotification:t}=$a;t&&em.setTimeout(()=>t(n,e))}const sH={closed:!0,next:Qd,error:YC,complete:Qd},u0="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xa(n){return n}function ZC(n){return 0===n.length?Xa:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Dn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function cH(n){return n&&n instanceof a0||function aH(n){return n&&en(n.next)&&en(n.error)&&en(n.complete)}(n)&&WC(n)}(t)?t:new XC(t,i,r);return tm(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=KC(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o?.unsubscribe()}},s,r)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[u0](){return this}pipe(...t){return ZC(t)(this)}toPromise(t){return new(t=KC(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function KC(n){var e;return null!==(e=n??$a.Promise)&&void 0!==e?e:Promise}const lH=n0(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let fn=(()=>{class n extends Dn{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new JC(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new lH}next(t){tm(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(t)}})}error(t){tm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){tm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?jC:(s.push(t),new Di(()=>s0(s,t)))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Dn;return t.source=this,t}}return n.create=(e,t)=>new JC(e,t),n})();class JC extends fn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:jC}}class Lr extends fn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function QC(n){return en(n?.lift)}function ci(n){return e=>{if(QC(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class Vn extends a0{constructor(e,t,i,r,s){super(e),this.onFinalize=s,this._next=t?function(o){try{t(o)}catch(a){e.error(a)}}:super._next,this._error=r?function(o){try{r(o)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function bt(n,e){return ci((t,i)=>{let r=0;t.subscribe(new Vn(i,s=>{i.next(n.call(e,s,r++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const vA="https://g.co/ng/security#xss";class ee extends Error{constructor(e,t){super(function yl(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function so(n){return{toString:n}.toString()}const _l="__parameters__";function Ml(n,e,t){return so(()=>{const i=function v0(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(_l)?c[_l]:Object.defineProperty(c,_l,{value:[]})[_l];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}const tn=globalThis;function Lt(n){for(let e in n)if(n[e]===Lt)return e;throw Error("Could not find renamed property on target object.")}function uG(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function zn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(zn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function _0(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const dG=Lt({__forward_ref__:Lt});function $t(n){return n.__forward_ref__=$t,n.toString=function(){return zn(this())},n}function We(n){return om(n)?n():n}function om(n){return"function"==typeof n&&n.hasOwnProperty(dG)&&n.__forward_ref__===$t}function Te(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ss(n){return{providers:n.providers||[],imports:n.imports||[]}}function am(n){return bA(n,lm)||bA(n,EA)}function bA(n,e){return n.hasOwnProperty(e)?n[e]:null}function cm(n){return n&&(n.hasOwnProperty(x0)||n.hasOwnProperty(yG))?n[x0]:null}const lm=Lt({\u0275prov:Lt}),x0=Lt({\u0275inj:Lt}),EA=Lt({ngInjectableDef:Lt}),yG=Lt({ngInjectorDef:Lt});class he{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Te({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function S0(n){return n&&!!n.\u0275providers}const th=Lt({\u0275cmp:Lt}),T0=Lt({\u0275dir:Lt}),C0=Lt({\u0275pipe:Lt}),SA=Lt({\u0275mod:Lt}),oo=Lt({\u0275fac:Lt}),nh=Lt({__NG_ELEMENT_ID__:Lt}),TA=Lt({__NG_ENV_ID__:Lt});function it(n){return"string"==typeof n?n:null==n?"":String(n)}function A0(n,e){throw new ee(-201,!1)}var yt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(yt||{});let D0;function CA(){return D0}function Yi(n){const e=D0;return D0=n,e}function AA(n,e,t){const i=am(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&yt.Optional?null:void 0!==e?e:void A0()}const ih={},I0="__NG_DI_FLAG__",um="ngTempTokenPath",EG=/\n/gm,DA="__source";let bl;function Ko(n){const e=bl;return bl=n,e}function TG(n,e=yt.Default){if(void 0===bl)throw new ee(-203,!1);return null===bl?AA(n,void 0,e):bl.get(n,e&yt.Optional?null:void 0,e)}function Ne(n,e=yt.Default){return(CA()||TG)(We(n),e)}function K(n,e=yt.Default){return Ne(n,dm(e))}function dm(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function R0(n){const e=[];for(let t=0;t<n.length;t++){const i=We(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ee(900,!1);let r,s=yt.Default;for(let o=0;o<i.length;o++){const a=i[o],c=CG(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(Ne(r,s))}else e.push(Ne(i))}return e}function rh(n,e){return n[I0]=e,n.prototype[I0]=e,n}function CG(n){return n[I0]}const hm=rh(Ml("Optional"),8),fm=rh(Ml("SkipSelf"),4);function Za(n,e){return n.hasOwnProperty(oo)?n[oo]:null}function El(n,e){n.forEach(t=>Array.isArray(t)?El(t,e):e(t))}function RA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function pm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function mr(n,e,t){let i=wl(n,e);return i>=0?n[1|i]=t:(i=~i,function PA(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function N0(n,e){const t=wl(n,e);if(t>=0)return n[1|t]}function wl(n,e){return function NA(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Ts={},Et=[],Qr=new he(""),OA=new he("",-1),O0=new he("");class gm{get(e,t=ih){if(t===ih){const i=new Error(`NullInjectorError: No provider for ${zn(e)}!`);throw i.name="NullInjectorError",i}return t}}var ym=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ym||{}),es=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(es||{}),Jo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Jo||{});function OG(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function L0(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];FA(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function LA(n){return 3===n||4===n||6===n}function FA(n){return 64===n.charCodeAt(0)}function sh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||kA(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function kA(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const UA="ng-template";function LG(n,e,t,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==OG(e[r+1].toLowerCase(),t,0))return!0}else if(F0(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===t)return!0}return!1}function F0(n){return 4===n.type&&n.value!==UA}function FG(n,e,t){return e===(4!==n.type||t?n.value:UA)}function kG(n,e,t){let i=4;const r=n.attrs,s=null!==r?function VG(n){for(let e=0;e<n.length;e++)if(LA(n[e]))return e;return n.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!FG(n,c,t)||""===c&&1===e.length){if(ts(i))return!1;o=!0}}else if(8&i){if(null===r||!LG(n,r,c,t)){if(ts(i))return!1;o=!0}}else{const l=e[++a],u=UG(c,r,F0(n),t);if(-1===u){if(ts(i))return!1;o=!0;continue}if(""!==l){let d;if(d=u>s?"":r[u+1].toLowerCase(),2&i&&l!==d){if(ts(i))return!1;o=!0}}}}else{if(!o&&!ts(i)&&!ts(c))return!1;if(o&&ts(c))continue;o=!1,i=c|1&i}}return ts(i)||o}function ts(n){return!(1&n)}function UG(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function zG(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function BA(n,e,t=!1){for(let i=0;i<e.length;i++)if(kG(n,e[i],t))return!0;return!1}function VA(n,e){return n?":not("+e.trim()+")":e}function GG(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ts(o)&&(e+=VA(s,r),r=""),i=o,s=s||!ts(i);t++}return""!==r&&(e+=VA(s,r)),e}function ns(n){return so(()=>{const e=HA(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ym.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||es.Emulated,styles:n.styles||Et,_:null,schemas:n.schemas||null,tView:null,id:""};GA(t);const i=n.dependencies;return t.directiveDefs=vm(i,!1),t.pipeDefs=vm(i,!0),t.id=function YG(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function $G(n){return mt(n)||Hn(n)}function qG(n){return null!==n}function ao(n){return so(()=>({type:n.type,bootstrap:n.bootstrap||Et,declarations:n.declarations||Et,imports:n.imports||Et,exports:n.exports||Et,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zA(n,e){if(null==n)return Ts;const t={};for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];let s,o,a=Jo.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==Jo.None?[i,a]:i,e[s]=o):t[s]=i}return t}function Ke(n){return so(()=>{const e=HA(n);return GA(e),e})}function mt(n){return n[th]||null}function Hn(n){return n[T0]||null}function li(n){return n[C0]||null}function mi(n,e){const t=n[SA]||null;if(!t&&!0===e)throw new Error(`Type ${zn(n)} does not have '\u0275mod' property.`);return t}function HA(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ts,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Et,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zA(n.inputs,e),outputs:zA(n.outputs),debugInfo:null}}function GA(n){n.features?.forEach(e=>e(n))}function vm(n,e){if(!n)return null;const t=e?li:$G;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(qG)}function ZG(...n){return{\u0275providers:k0(0,n),\u0275fromNgModule:!0}}function k0(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return El(e,o=>{const a=o;_m(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&jA(r,s),t}function jA(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];U0(r,s=>{e(s,i)})}}function _m(n,e,t,i){if(!(n=We(n)))return!1;let r=null,s=cm(n);const o=!s&&mt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=cm(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)_m(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{El(s.imports,u=>{_m(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&jA(l,e)}if(!a){const l=Za(r)||(()=>new r);e({provide:r,useFactory:l,deps:Et},r),e({provide:O0,useValue:r,multi:!0},r),e({provide:Qr,useValue:()=>Ne(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=n;U0(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function U0(n,e){for(let t of n)S0(t)&&(t=t.\u0275providers),Array.isArray(t)?U0(t,e):e(t)}const KG=Lt({provide:String,useValue:Lt});function B0(n){return null!==n&&"object"==typeof n&&KG in n}function Ka(n){return"function"==typeof n}const V0=new he(""),xm={},QG={};let z0;function Mm(){return void 0===z0&&(z0=new gm),z0}class Ii{}class Sl extends Ii{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,G0(e,o=>this.processProvider(o)),this.records.set(OA,Tl(void 0,this)),r.has("environment")&&this.records.set(Ii,Tl(void 0,this));const s=this.records.get(V0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(O0,Et,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=dt(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),dt(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ko(this),i=Yi(void 0);try{return e()}finally{Ko(t),Yi(i)}}get(e,t=ih,i=yt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(TA))return e[TA](this);i=dm(i);const s=Ko(this),o=Yi(void 0);try{if(!(i&yt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function r4(n){return"function"==typeof n||"object"==typeof n&&n instanceof he}(e)&&am(e);c=l&&this.injectableDefInScope(l)?Tl(H0(e),xm):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&yt.Self?Mm():this.parent).get(e,t=i&yt.Optional&&t===ih?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[um]=a[um]||[]).unshift(zn(e)),s)throw a;return function AG(n,e,t,i){const r=n[um];throw e[DA]&&r.unshift(e[DA]),n.message=function DG(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=zn(e);if(Array.isArray(e))r=e.map(zn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):zn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(EG,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[um]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Yi(o),Ko(s)}}resolveInjectorInitializers(){const e=dt(null),t=Ko(this),i=Yi(void 0);try{const s=this.get(Qr,Et,yt.Self);for(const o of s)o()}finally{Ko(t),Yi(i),dt(e)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(zn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){let t=Ka(e=We(e))?e:We(e&&e.provide);const i=function t4(n){return B0(n)?Tl(void 0,n.useValue):Tl(qA(n),xm)}(e);if(!Ka(e)&&!0===e.multi){let r=this.records.get(t);r||(r=Tl(void 0,xm,!0),r.factory=()=>R0(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){const i=dt(null);try{return t.value===xm&&(t.value=QG,t.value=t.factory()),"object"==typeof t.value&&t.value&&function i4(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{dt(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=We(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function H0(n){const e=am(n),t=null!==e?e.factory:Za(n);if(null!==t)return t;if(n instanceof he)throw new ee(204,!1);if(n instanceof Function)return function e4(n){if(n.length>0)throw new ee(204,!1);const t=function gG(n){return n&&(n[lm]||n[EA])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ee(204,!1)}function qA(n,e,t){let i;if(Ka(n)){const r=We(n);return Za(r)||H0(r)}if(B0(n))i=()=>We(n.useValue);else if(function $A(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...R0(n.deps||[]));else if(function WA(n){return!(!n||!n.useExisting)}(n))i=()=>Ne(We(n.useExisting));else{const r=We(n&&(n.useClass||n.provide));if(!function n4(n){return!!n.deps}(n))return Za(r)||H0(r);i=()=>new r(...R0(n.deps))}return i}function Tl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function G0(n,e){for(const t of n)Array.isArray(t)?G0(t,e):t&&S0(t)?G0(t.\u0275providers,e):e(t)}function is(n,e){n instanceof Sl&&n.assertNotDestroyed();const i=Ko(n),r=Yi(void 0);try{return e()}finally{Ko(i),Yi(r)}}function XA(){return void 0!==CA()||null!=function SG(){return bl}()}const sn=0,ce=1,ke=2,Rn=3,rs=4,ui=5,Ri=6,Al=7,qt=8,Pn=9,Cs=10,Xe=11,ch=12,ZA=13,Dl=14,on=15,Ja=16,Il=17,co=18,Rl=19,KA=20,ea=21,wm=22,Fr=23,De=25,W0=1,As=7,Pl=9,xn=10;var Tm=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Tm||{});function jn(n){return Array.isArray(n)&&"object"==typeof n[W0]}function gi(n){return Array.isArray(n)&&!0===n[W0]}function $0(n){return!!(4&n.flags)}function Qa(n){return n.componentOffset>-1}function Cm(n){return!(1&~n.flags)}function ss(n){return!!n.template}function uh(n){return!!(512&n[ke])}class y4{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function tD(n,e,t,i){null!==e?e.applyValueToInputSignal(e,i):n[t]=i}function kr(){return nD}function nD(n){return n.type.prototype.ngOnChanges&&(n.setInput=_4),v4}function v4(){const n=rD(this),e=n?.current;if(e){const t=n.previous;if(t===Ts)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function _4(n,e,t,i,r){const s=this.declaredInputs[i],o=rD(n)||function x4(n,e){return n[iD]=e}(n,{previous:Ts,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new y4(l&&l.currentValue,t,c===Ts),tD(n,e,r,t)}kr.ngInherit=!0;const iD="__ngSimpleChanges__";function rD(n){return n[iD]||null}const Ds=function(n,e,t){};function wt(n){for(;Array.isArray(n);)n=n[sn];return n}function dh(n,e){return wt(e[n])}function Pi(n,e){return wt(e[n.index])}function hh(n,e){return n.data[e]}function gr(n,e){const t=e[n];return jn(t)?t:t[sn]}function K0(n){return!(128&~n[ke])}function Ur(n,e){return null==e?null:n[e]}function aD(n){n[Il]=0}function cD(n){1024&n[ke]||(n[ke]|=1024,K0(n)&&Am(n))}function fh(n){return!!(9216&n[ke]||n[Fr]?.dirty)}function J0(n){n[Cs].changeDetectionScheduler?.notify(7),64&n[ke]&&(n[ke]|=1024),fh(n)&&Am(n)}function Am(n){n[Cs].changeDetectionScheduler?.notify(0);let e=lo(n);for(;null!==e&&!(8192&e[ke])&&(e[ke]|=8192,K0(e));)e=lo(e)}function Dm(n,e){if(!(256&~n[ke]))throw new ee(911,!1);null===n[ea]&&(n[ea]=[]),n[ea].push(e)}function lo(n){const e=n[Rn];return gi(e)?e[Rn]:e}const Ye={lFrame:MD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let uD=!1;function dD(){return Ye.bindingsEnabled}function Y(){return Ye.lFrame.lView}function ht(){return Ye.lFrame.tView}function Rm(n){return Ye.lFrame.contextLView=n,n[qt]}function Pm(n){return Ye.lFrame.contextLView=null,n}function Ft(){let n=hD();for(;null!==n&&64===n.type;)n=n.parent;return n}function hD(){return Ye.lFrame.currentTNode}function os(n,e){const t=Ye.lFrame;t.currentTNode=n,t.isParent=e}function tx(){return Ye.lFrame.isParent}function nx(){Ye.lFrame.isParent=!1}function mD(){return uD}function gD(n){uD=n}function as(){return Ye.lFrame.bindingIndex++}function O4(n,e){const t=Ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,ix(e)}function ix(n){Ye.lFrame.currentDirectiveIndex=n}function sx(){return Ye.lFrame.currentQueryIndex}function Nm(n){Ye.lFrame.currentQueryIndex=n}function F4(n){const e=n[ce];return 2===e.type?e.declTNode:1===e.type?n[ui]:null}function _D(n,e,t){if(t&yt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&yt.Host||(r=F4(s),null===r||(s=s[Dl],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ye.lFrame=xD();return i.currentTNode=e,i.lView=n,!0}function ox(n){const e=xD(),t=n[ce];Ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xD(){const n=Ye.lFrame,e=null===n?null:n.child;return null===e?MD(n):e}function MD(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function bD(){const n=Ye.lFrame;return Ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ED=bD;function ax(){const n=bD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function di(){return Ye.lFrame.selectedIndex}function nc(n){Ye.lFrame.selectedIndex=n}function Xt(){const n=Ye.lFrame;return hh(n.tView,n.selectedIndex)}let SD=!0;function mh(){return SD}function Is(n){SD=n}function Om(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Lm(n,e,t){TD(n,e,3,t)}function Fm(n,e,t,i){(3&n[ke])===t&&TD(n,e,t,i)}function cx(n,e){let t=n[ke];(3&t)===e&&(t&=16383,t+=1,n[ke]=t)}function TD(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[Il]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[Il]+=65536),(a<s||-1==s)&&(G4(n,t,e,c),n[Il]=(4294901760&n[Il])+c+2),c++}function CD(n,e){Ds(4,n,e);const t=dt(null);try{e.call(n)}finally{dt(t),Ds(5,n,e)}}function G4(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[ke]>>14<n[Il]>>16&&(3&n[ke])===e&&(n[ke]+=16384,CD(a,s)):CD(a,s)}const Nl=-1;class gh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}const ux={};class ic{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=dm(i);const r=this.injector.get(e,ux,i);return r!==ux||t===ux?r:this.parentInjector.get(e,t,i)}}function dx(n){return n!==Nl}function yh(n){return 32767&n}function vh(n,e){let t=function q4(n){return n>>16}(n),i=e;for(;t>0;)i=i[Dl],t--;return i}let hx=!0;function km(n){const e=hx;return hx=n,e}const DD=255,ID=5;let Y4=0;const Rs={};function Um(n,e){const t=RD(n,e);if(-1!==t)return t;const i=e[ce];i.firstCreatePass&&(n.injectorIndex=e.length,fx(i.data,n),fx(e,null),fx(i.blueprint,null));const r=Bm(n,e),s=n.injectorIndex;if(dx(r)){const o=yh(r),a=vh(r,e),c=a[ce].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function fx(n,e){n.push(0,0,0,0,0,0,0,0,e)}function RD(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Bm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=UD(r),null===i)return Nl;if(t++,r=r[Dl],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Nl}function px(n,e,t){!function Z4(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(nh)&&(i=t[nh]),null==i&&(i=t[nh]=Y4++);const r=i&DD;e.data[n+(r>>ID)]|=1<<r}(n,e,t)}function PD(n,e,t){if(t&yt.Optional||void 0!==n)return n;A0()}function ND(n,e,t,i){if(t&yt.Optional&&void 0===i&&(i=null),!(t&(yt.Self|yt.Host))){const r=n[Pn],s=Yi(void 0);try{return r?r.get(e,i,t&yt.Optional):AA(e,i,t&yt.Optional)}finally{Yi(s)}}return PD(i,0,t)}function OD(n,e,t,i=yt.Default,r){if(null!==n){if(2048&e[ke]&&!(i&yt.Self)){const o=function t5(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ke]&&!(512&o[ke]);){const a=LD(s,o,t,i|yt.Self,Rs);if(a!==Rs)return a;let c=s.parent;if(!c){const l=o[KA];if(l){const u=l.get(t,Rs,i);if(u!==Rs)return u}c=UD(o),o=o[Dl]}s=c}return r}(n,e,t,i,Rs);if(o!==Rs)return o}const s=LD(n,e,t,i,Rs);if(s!==Rs)return s}return ND(e,t,i,r)}function LD(n,e,t,i,r){const s=function Q4(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(nh)?n[nh]:void 0;return"number"==typeof e?e>=0?e&DD:e5:e}(t);if("function"==typeof s){if(!_D(e,n,i))return i&yt.Host?PD(r,0,i):ND(e,t,i,r);try{let o;if(o=s(i),null!=o||i&yt.Optional)return o;A0()}finally{ED()}}else if("number"==typeof s){let o=null,a=RD(n,e),c=Nl,l=i&yt.Host?e[on][ui]:null;for((-1===a||i&yt.SkipSelf)&&(c=-1===a?Bm(n,e):e[a+8],c!==Nl&&kD(i,!1)?(o=e[ce],a=yh(c),e=vh(c,e)):a=-1);-1!==a;){const u=e[ce];if(FD(s,a,u.data)){const d=J4(a,e,t,o,i,l);if(d!==Rs)return d}c=e[a+8],c!==Nl&&kD(i,e[ce].data[a+8]===l)&&FD(s,a,e)?(o=u,a=yh(c),e=vh(c,e)):a=-1}}return r}function J4(n,e,t,i,r,s){const o=e[ce],a=o.data[n+8],u=Vm(a,o,t,null==i?Qa(a)&&hx:i!=o&&!!(3&a.type),r&yt.Host&&s===a);return null!==u?rc(e,o,u,a):Rs}function Vm(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){const f=o[c];if(f&&ss(f)&&f.type===t)return c}return null}function rc(n,e,t,i){let r=n[t];const s=e.data;if(function j4(n){return n instanceof gh}(r)){const o=r;o.resolving&&function xG(n,e){throw e&&e.join(" > "),new ee(-200,n)}(function At(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():it(n)}(s[t]));const a=km(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Yi(o.injectImpl):null;_D(n,i,yt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function H4(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=nD(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Yi(l),km(a),o.resolving=!1,ED()}}return r}function FD(n,e,t){return!!(t[e+(n>>ID)]&1<<n)}function kD(n,e){return!(n&yt.Self||n&yt.Host&&e)}class Wn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return OD(this._tNode,this._lView,e,dm(i),t)}}function e5(){return new Wn(Ft(),Y())}function ei(n){return so(()=>{const e=n.prototype.constructor,t=e[oo]||mx(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[oo]||mx(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function mx(n){return om(n)?()=>{const e=mx(We(n));return e&&e()}:Za(n)}function UD(n){const e=n[ce],t=e.type;return 2===t?e.declTNode:1===t?n[ui]:null}function GD(n,e=null,t=null,i){const r=jD(n,e,t,i);return r.resolveInjectorInitializers(),r}function jD(n,e=null,t=null,i,r=new Set){const s=[t||Et,ZG(n)];return i=i||("object"==typeof n?void 0:zn(n)),new Sl(s,e||Mm(),i||null,r)}class Mn{static{this.THROW_IF_NOT_FOUND=ih}static{this.NULL=new gm}static create(e,t){if(Array.isArray(e))return GD({name:""},t,e,"");{const i=e.name??"";return GD({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=Te({token:Mn,providedIn:"any",factory:()=>Ne(OA)})}static{this.__NG_ELEMENT_ID__=-1}}new he("").__NG_ELEMENT_ID__=n=>{const e=Ft();if(null===e)throw new ee(204,!1);if(2&e.type)return e.value;if(n&yt.Optional)return null;throw new ee(204,!1)};function yx(n){return n.ngOriginalError}let xh=(()=>{class n{static{this.__NG_ELEMENT_ID__=d5}static{this.__NG_ENV_ID__=t=>t}}return n})();class u5 extends xh{constructor(e){super(),this._lView=e}onDestroy(e){return Dm(this._lView,e),()=>function Q0(n,e){if(null===n[ea])return;const t=n[ea].indexOf(e);-1!==t&&n[ea].splice(t,1)}(this._lView,e)}}function d5(){return new u5(Y())}let fo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Lr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Te({token:n,providedIn:"root",factory:()=>new n})}}return n})();const pn=class h5 extends fn{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,XA()&&(this.destroyRef=K(xh,{optional:!0})??void 0,this.pendingTasks=K(fo,{optional:!0})??void 0)}emit(e){const t=dt(null);try{super.next(e)}finally{dt(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Di&&e.add(a),a}wrapInTimeout(e){return t=>{const i=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==i&&this.pendingTasks?.remove(i)})}}};function Hm(...n){}function $D(n){let e,t;function i(){n=Hm;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function qD(n){return queueMicrotask(()=>n()),()=>{n=Hm}}class Ct{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.callbackScheduled=!1,function m5(n){const e=()=>{!function p5(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{$D(()=>{n.callbackScheduled=!1,_x(n),n.isCheckStableRunning=!0,vx(n),n.isCheckStableRunning=!1})}),_x(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function g5(n){return ZD(n,"__ignore_ng_zone__")}(a))return t.invokeTask(r,s,o,a);try{return XD(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),YD(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return XD(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function y5(n){return ZD(n,"__scheduler_tick__")}(a)&&e(),YD(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,_x(n),vx(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ct.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Ct.isInAngularZone())throw new ee(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,f5,Hm,Hm);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const f5={};function vx(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function _x(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function XD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YD(n){n._nesting--,vx(n)}class xx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}function ZD(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class cs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yx(e);for(;t&&yx(t);)t=yx(t);return t||null}}const _5=new he("",{providedIn:"root",factory:()=>{const n=K(Ct),e=K(cs);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function x5(){return Fl(Ft(),Y())}function Fl(n,e){return new yr(Pi(n,e))}let yr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=x5}}return n})();function JD(n){return n instanceof yr?n.nativeElement:n}function M5(){return this._results[Symbol.iterator]()}class Mx{get changes(){return this._changes??=new pn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Mx.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=M5)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Zi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function NG(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function bh(n){return!(128&~n.flags)}const Ex=new Map;let E5=0;const Gm="__ngContext__";function yi(n,e){jn(e)?(n[Gm]=e[Rl],function S5(n){Ex.set(n[Rl],n)}(e)):n[Gm]=e}function cI(n){return uI(n[ch])}function lI(n){return uI(n[rs])}function uI(n){for(;null!==n&&!gi(n);)n=n[rs];return n}let Sx;const Ul=new he("",{providedIn:"root",factory:()=>G5}),G5="ng",vI=new he(""),na=new he("",{providedIn:"platform",factory:()=>"unknown"}),_I=new he("",{providedIn:"root",factory:()=>function ta(){if(void 0!==Sx)return Sx;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let xI=()=>null;function Px(n,e,t=!1){return xI(n,e,t)}const AI=new he("",{providedIn:"root",factory:()=>!1});class OI{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vA})`}}function ia(n){return n instanceof OI?n.changingThisBreaksApplicationSecurity:n}const hj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Hl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Hl||{});function tg(n){const e=function Rh(){const n=Y();return n&&n[Cs].sanitizer}();return e?e.sanitize(Hl.URL,n)||"":function Dh(n,e){const t=function cj(n){return n instanceof OI&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${vA})`)}return t===e}(n,"URL")?ia(n):function Bx(n){return(n=String(n)).match(hj)?n:"unsafe:"+n}(it(n))}const Aj=/^>|^->|<!--|-->|--!>|<!-$/g,Dj=/(<|>)/g,Ij="\u200b$1\u200b";function vr(n){return n instanceof Function?n():n}var ra=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ra||{});let Wx;function $x(n,e){return Wx(n,e)}function jl(n,e,t,i,r){if(null!=i){let s,o=!1;gi(i)?s=i:jn(i)&&(o=!0,i=i[sn]);const a=wt(i);0===n&&null!==t?null==r?i1(e,t,a):oc(e,t,a,r||null,!0):1===n&&null!==t?oc(e,t,a,r||null,!0):2===n?function Nh(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Zj(n,e,t,i,r){const s=t[As];s!==wt(t)&&jl(e,n,i,s,r);for(let a=xn;a<t.length;a++){const c=t[a];ag(c[ce],c,n,e,i,s)}}(e,n,s,t,r)}}function Xx(n,e){return n.createComment(function WI(n){return n.replace(Aj,e=>e.replace(Dj,Ij))}(e))}function rg(n,e,t){return n.createElement(e,t)}function e1(n,e){e[Cs].changeDetectionScheduler?.notify(8),ag(n,e,e[Xe],2,null,null)}function t1(n,e){const t=n[Pl],i=e[Rn];(jn(i)||e[on]!==i[Rn][on])&&(n[ke]|=Tm.HasTransplantedViews),null===t?n[Pl]=[e]:t.push(e)}function Yx(n,e){const t=n[Pl],i=t.indexOf(e);t.splice(i,1)}function Ph(n,e){if(n.length<=xn)return;const t=xn+e,i=n[t];if(i){const r=i[Ja];null!==r&&r!==n&&Yx(r,i),e>0&&(n[t-1][rs]=i[rs]);const s=pm(n,xn+e);!function Hj(n,e){e1(n,e),e[sn]=null,e[ui]=null}(i[ce],i);const o=s[co];null!==o&&o.detachView(s[ce]),i[Rn]=null,i[rs]=null,i[ke]&=-129}return i}function sg(n,e){if(!(256&e[ke])){const t=e[Xe];t.destroyNode&&ag(n,e,t,3,null,null),function jj(n){let e=n[ch];if(!e)return Zx(n[ce],n);for(;e;){let t=null;if(jn(e))t=e[ch];else{const i=e[xn];i&&(t=i)}if(!t){for(;e&&!e[rs]&&e!==n;)jn(e)&&Zx(e[ce],e),e=e[Rn];null===e&&(e=n),jn(e)&&Zx(e[ce],e),t=e&&e[rs]}e=t}}(e)}}function Zx(n,e){if(256&e[ke])return;const t=dt(null);try{e[ke]&=-129,e[ke]|=256,e[Fr]&&Q_(e[Fr]),function qj(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof gh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];Ds(4,a,c);try{c.call(a)}finally{Ds(5,a,c)}}else{Ds(4,r,s);try{s.call(r)}finally{Ds(5,r,s)}}}}}(n,e),function $j(n,e){const t=n.cleanup,i=e[Al];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[Al]=null);const r=e[ea];if(null!==r){e[ea]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[ce].type&&e[Xe].destroy();const i=e[Ja];if(null!==i&&gi(e[Rn])){i!==e[Rn]&&Yx(i,e);const r=e[co];null!==r&&r.detachView(n)}!function T5(n){Ex.delete(n[Rl])}(e)}finally{dt(t)}}function Kx(n,e,t){return function n1(n,e,t){let i=e;for(;null!==i&&168&i.type;)i=(e=i).parent;if(null===i)return t[sn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===es.None||s===es.Emulated)return null}return Pi(i,t)}}(n,e.parent,t)}function oc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function i1(n,e,t){n.appendChild(e,t)}function r1(n,e,t,i,r){null!==i?oc(n,e,t,i,r):i1(n,e,t)}function Jx(n,e){return n.parentNode(e)}let Qx,a1=function o1(n,e,t){return 40&n.type?Pi(n,t):null};function og(n,e,t,i){const r=Kx(n,i,e),s=e[Xe],a=function s1(n,e,t){return a1(n,e,t)}(i.parent||e[ui],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)r1(s,r,t[c],a,!1);else r1(s,r,t,a,!1);void 0!==Qx&&Qx(s,i,e,t,r)}function ac(n,e){if(null!==e){const t=e.type;if(3&t)return Pi(e,n);if(4&t)return eM(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return ac(n,i);{const r=n[e.index];return gi(r)?eM(-1,r):wt(r)}}if(128&t)return ac(n,e.next);if(32&t)return $x(e,n)()||wt(n[e.index]);{const i=l1(n,e);return null!==i?Array.isArray(i)?i[0]:ac(lo(n[on]),i):ac(n,e.next)}}return null}function l1(n,e){return null!==e?n[on][ui].projection[e.projection]:null}function eM(n,e){const t=xn+n+1;if(t<e.length){const i=e[t],r=i[ce].firstChild;if(null!==r)return ac(i,r)}return e[As]}function tM(n,e,t,i,r,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=i[t.index],c=t.type;if(o&&0===e&&(a&&yi(wt(a),i),t.flags|=2),32&~t.flags)if(8&c)tM(n,e,t.child,i,r,s,!1),jl(e,n,r,a,s);else if(32&c){const l=$x(t,i);let u;for(;u=l();)jl(e,n,r,u,s);jl(e,n,r,a,s)}else 16&c?d1(n,e,i,t,r,s):jl(e,n,r,a,s);t=o?t.projectionNext:t.next}}function ag(n,e,t,i,r,s){tM(t,i,n.firstChild,e,r,s,!1)}function d1(n,e,t,i,r,s){const o=t[on],c=o[ui].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)jl(e,n,r,c[l],s);else{let l=c;const u=o[Rn];bh(i)&&(l.flags|=128),tM(n,e,l,u,r,s,!0)}}function h1(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function f1(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&L0(n,e,i),null!==r&&h1(n,e,r),null!==s&&function Jj(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const rt={};function er(n=1){p1(ht(),Y(),di()+n,!1)}function p1(n,e,t,i){if(!i)if(3&~e[ke]){const s=n.preOrderHooks;null!==s&&Fm(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Lm(e,s,t)}nc(t)}function ie(n,e=yt.Default){const t=Y();return null===t?Ne(n,e):OD(Ft(),t,We(n),e)}function g1(n,e,t,i,r,s){const o=dt(null);try{let a=null;r&Jo.SignalBased&&(a=e[i][Jr]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),r&Jo.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,i):tD(e,a,i,s)}finally{dt(o)}}function cg(n,e,t,i,r,s,o,a,c,l,u){const d=e.blueprint.slice();return d[sn]=r,d[ke]=204|i,(null!==l||n&&2048&n[ke])&&(d[ke]|=2048),aD(d),d[Rn]=d[Dl]=n,d[qt]=t,d[Cs]=o||n&&n[Cs],d[Xe]=a||n&&n[Xe],d[Pn]=c||n&&n[Pn]||null,d[ui]=s,d[Rl]=function w5(){return E5++}(),d[Ri]=u,d[KA]=l,d[on]=2==e.type?n[on]:d,d}function cc(n,e,t,i,r){let s=n.data[e];if(null===s)s=function nM(n,e,t,i,r){const s=hD(),o=tx(),c=n.data[e]=function oW(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return function tc(){return null!==Ye.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function N4(){return Ye.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function ph(){const n=Ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return os(s,!0),s}function Oh(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function y1(n,e,t,i,r){const s=di(),o=2&i;try{nc(-1),o&&e.length>De&&p1(n,e,De,!1),Ds(o?2:0,r),t(i,r)}finally{nc(s),Ds(o?3:1,r)}}function iM(n,e,t){if($0(e)){const i=dt(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{dt(i)}}}function rM(n,e,t){dD()&&(function fW(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;Qa(t)&&function xW(n,e,t){const i=Pi(e,n),r=v1(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=lg(n,cg(n,r,null,o,i,e,null,n[Cs].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Um(t,e),yi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=rc(e,n,a,t);yi(l,e),null!==o&&MW(0,a-r,l,c,0,o),ss(c)&&(gr(t.index,e)[qt]=rc(e,n,a,t))}}(n,e,t,Pi(t,e)),!(64&~t.flags)&&E1(n,e,t))}function sM(n,e,t=Pi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function v1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=oM(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function oM(n,e,t,i,r,s,o,a,c,l,u){const d=De+i,h=d+r,f=function eW(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:rt);return t}(d,h),p="function"==typeof l?l():l;return f[ce]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let _1=()=>null;function x1(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;i??={};let a,c=Jo.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(null!==r){if(!r.hasOwnProperty(s))continue;l=r[s]}0===n?M1(i,t,l,a,c):M1(i,t,l,a)}return i}function M1(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],void 0!==r&&s.push(r)}function tr(n,e,t,i,r,s,o,a){const c=Pi(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(dM(n,t,u,i,r),Qa(e)&&function lW(n,e){const t=gr(e,n);16&t[ke]||(t[ke]|=64)}(t,e.index)):3&e.type&&(i=function cW(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function aM(n,e,t,i){if(dD()){const r=null===i?null:{"":-1},s=function mW(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(BA(e,o.selectors,!1))if(i||(i=[]),ss(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),cM(n,e,a.length)}else i.unshift(o),cM(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&b1(n,e,t,o,r,a),r&&function gW(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ee(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=sh(t.mergedAttrs,t.attrs)}function b1(n,e,t,i,r,s){for(let l=0;l<i.length;l++)px(Um(t,e),n,i[l].type);!function vW(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Oh(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=sh(t.mergedAttrs,u.hostAttrs),_W(n,t,e,c,u),yW(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function aW(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],h=t?t.get(d):null,p=h?h.outputs:null;c=x1(0,d.inputs,u,c,h?h.inputs:null),l=x1(1,d.outputs,u,l,p);const m=null===c||null===o||F0(e)?null:bW(c,u,o);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function E1(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function L4(){return Ye.lFrame.currentDirectiveIndex}();try{nc(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];ix(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&pW(c,l)}}finally{nc(-1),ix(o)}}function pW(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function cM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function yW(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ss(e)&&(t[""]=n)}}function _W(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Za(r.type)),o=new gh(s,ss(r),ie);n.blueprint[i]=o,t[i]=o,function dW(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function hW(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Oh(n,t,r.hostVars,rt),r)}function Ps(n,e,t,i,r,s){const o=Pi(n,e);!function lM(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?it(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Xe],o,s,n.value,t,i,r)}function MW(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)g1(i,t,o[a++],o[a++],o[a++],o[a++])}function bW(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function w1(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function S1(n,e){const t=n.contentQueries;if(null!==t){const i=dt(null);try{for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];Nm(t[r]),a.contentQueries(2,e[o],o)}}}finally{dt(i)}}}function lg(n,e){return n[ch]?n[ZA][rs]=e:n[ch]=e,n[ZA]=e,e}function uM(n,e,t){Nm(0);const i=dt(null);try{e(n,t)}finally{dt(i)}}function T1(n){return n[Al]??=[]}function C1(n){return n.cleanup??=[]}function ug(n,e){const t=n[Pn],i=t?t.get(cs,null):null;i&&i.handleError(e)}function dM(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=t[s++];g1(n.data[o],e[o],i,a,c,r)}}function EW(n,e){const t=gr(e,n),i=t[ce];!function wW(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[sn];null!==r&&null===t[Ri]&&(t[Ri]=Px(r,t[Pn])),hM(i,t,t[qt])}function hM(n,e,t){ox(e);try{const i=n.viewQuery;null!==i&&uM(1,i,t);const r=n.template;null!==r&&y1(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[co]?.finishViewCreation(n),n.staticContentQueries&&S1(n,e),n.staticViewQueries&&uM(2,n.viewQuery,t);const s=n.components;null!==s&&function SW(n,e){for(let t=0;t<e.length;t++)EW(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ke]&=-5,ax()}}function lc(n,e){return!e||null===e.firstChild||bh(n)}function Lh(n,e,t,i,r=!1){for(;null!==t;){if(128===t.type){t=r?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&i.push(wt(s)),gi(s)&&I1(s,i);const o=t.type;if(8&o)Lh(n,e,t.child,i);else if(32&o){const a=$x(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=l1(e,t);if(Array.isArray(a))i.push(...a);else{const c=lo(e[on]);Lh(c[ce],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function I1(n,e){for(let t=xn;t<n.length;t++){const i=n[t],r=i[ce].firstChild;null!==r&&Lh(i[ce],i,r,e)}n[As]!==n[sn]&&e.push(n[As])}let R1=[];const DW={...Xp,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Am(n.lView)},consumerOnSignalRead(){this.lView[Fr]=this}},RW={...Xp,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=lo(n.lView);for(;e&&!P1(e[ce]);)e=lo(e);e&&cD(e)},consumerOnSignalRead(){this.lView[Fr]=this}};function P1(n){return 2!==n.type}const PW=100;function dg(n,e=!0,t=0){const i=n[Cs],r=i.rendererFactory;r.begin?.();try{!function NW(n,e){const t=mD();try{gD(!0),pM(n,e);let i=0;for(;fh(n);){if(i===PW)throw new ee(103,!1);i++,pM(n,1)}}finally{gD(t)}}(n,t)}catch(o){throw e&&ug(n,o),o}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function OW(n,e,t,i){const r=e[ke];if(!(256&~r))return;e[Cs].inlineEffectRunner?.flush(),ox(e);let a=!0,c=null,l=null;P1(n)?(l=function TW(n){return n[Fr]??function CW(n){const e=R1.pop()??Object.create(DW);return e.lView=n,e}(n)}(e),c=Yp(l)):null===function PC(){return _n}()?(a=!1,l=function IW(n){const e=n[Fr]??Object.create(RW);return e.lView=n,e}(e),c=Yp(l)):e[Fr]&&(Q_(e[Fr]),e[Fr]=null);try{aD(e),function yD(n){return Ye.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&y1(n,e,t,2,i);const u=!(3&~r);if(u){const f=n.preOrderCheckHooks;null!==f&&Lm(e,f,null)}else{const f=n.preOrderHooks;null!==f&&Fm(e,f,0,null),cx(e,0)}if(function LW(n){for(let e=cI(n);null!==e;e=lI(e)){if(!(e[ke]&Tm.HasTransplantedViews))continue;const t=e[Pl];for(let i=0;i<t.length;i++)cD(t[i])}}(e),O1(e,0),null!==n.contentQueries&&S1(n,e),u){const f=n.contentCheckHooks;null!==f&&Lm(e,f)}else{const f=n.contentHooks;null!==f&&Fm(e,f,1),cx(e,1)}!function Qj(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)nc(~r);else{const s=r,o=t[++i],a=t[++i];O4(o,s),a(2,e[s])}}}finally{nc(-1)}}(n,e);const d=n.components;null!==d&&F1(e,d,0);const h=n.viewQuery;if(null!==h&&uM(2,h,i),u){const f=n.viewCheckHooks;null!==f&&Lm(e,f)}else{const f=n.viewHooks;null!==f&&Fm(e,f,2),cx(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[wm]){for(const f of e[wm])f();e[wm]=null}e[ke]&=-73}catch(u){throw Am(e),u}finally{null!==l&&(K_(l,c),a&&function AW(n){n.lView[Fr]!==n&&(n.lView=null,R1.push(n))}(l)),ax()}}function O1(n,e){for(let t=cI(n);null!==t;t=lI(t))for(let i=xn;i<t.length;i++)L1(t[i],e)}function FW(n,e,t){L1(gr(e,n),t)}function L1(n,e){K0(n)&&pM(n,e)}function pM(n,e){const i=n[ce],r=n[ke],s=n[Fr];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!J_(s)),o||=!1,s&&(s.dirty=!1),n[ke]&=-9217,o)OW(i,n,i.template,n[qt]);else if(8192&r){O1(n,1);const a=i.components;null!==a&&F1(n,a,1)}}function F1(n,e,t){for(let i=0;i<e.length;i++)FW(n,e[i],t)}function Fh(n,e){const t=mD()?64:1088;for(n[Cs].changeDetectionScheduler?.notify(e);n;){n[ke]|=t;const i=lo(n);if(uh(n)&&!i)return n;n=i}return null}class kh{get rootNodes(){const e=this._lView,t=e[ce];return Lh(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qt]}set context(e){this._lView[qt]=e}get destroyed(){return!(256&~this._lView[ke])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Rn];if(gi(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Ph(e,i),pm(t,i))}this._attachedToViewContainer=!1}sg(this._lView[ce],this._lView)}onDestroy(e){Dm(this._lView,e)}markForCheck(){Fh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ke]&=-129}reattach(){J0(this._lView),this._lView[ke]|=128}detectChanges(){this._lView[ke]|=1024,dg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=uh(this._lView),t=this._lView[Ja];null!==t&&!e&&Yx(t,this._lView),e1(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;const t=uh(this._lView),i=this._lView[Ja];null!==i&&!t&&t1(i,this._lView),J0(this._lView)}}let go=(()=>{class n{static{this.__NG_ELEMENT_ID__=BW}}return n})();const kW=go,UW=class extends kW{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function Wl(n,e,t,i){const r=dt(null);try{const s=e.tView,c=cg(n,s,t,4096&n[ke]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[Ja]=n[e.index];const u=n[co];return null!==u&&(c[co]=u.createEmbeddedView(s)),hM(s,c,t),c}finally{dt(r)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new kh(r)}};function BW(){return hg(Ft(),Y())}function hg(n,e){return 4&n.type?new UW(e,n,Fl(n,e)):null}class Xl{}const Wh=new he("",{providedIn:"root",factory:()=>!1}),rR=new he("");class R${}class sR{}class N${resolveComponentFactory(e){throw function P$(n){const e=Error(`No component factory found for ${zn(n)}.`);return e.ngComponent=n,e}(e)}}class vg{static{this.NULL=new N$}}class SM{}let yo=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function O$(){const n=Y(),t=gr(Ft().index,n);return(jn(t)?t:n)[Xe]}()}}return n})(),L$=(()=>{class n{static{this.\u0275prov=Te({token:n,providedIn:"root",factory:()=>null})}}return n})();const aR=new Set;function Oi(n){aR.has(n)||(aR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Li=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Li||{});const cR={destroy(){}};function lR(n,e){!e&&function bm(n){if(!XA())throw new ee(-203,!1)}();const t=e?.injector??K(Mn);return function Qi(n){return"browser"===(n??K(Mn)).get(na)}(t)?(Oi("NgAfterNextRender"),function uR(n,e,t,i){const r=function k$(n,e){if(n instanceof Function)switch(e){case Li.EarlyRead:return{earlyRead:n};case Li.Write:return{write:n};case Li.MixedReadWrite:return{mixedReadWrite:n};case Li.Read:return{read:n}}return n}(n,i),s=e.get(_g),o=s.handler??=new B$,a=[],c=[],l=()=>{for(const f of c)o.unregister(f);u()},u=e.get(xh).onDestroy(l);let d=0;const h=(f,p)=>{if(!p)return;const m=t?(...y)=>(d--,d<1&&l(),p(...y)):p,g=is(e,()=>new U$(f,a,m));o.register(g),c.push(g),d++};return h(Li.EarlyRead,r.earlyRead),h(Li.Write,r.write),h(Li.MixedReadWrite,r.mixedReadWrite),h(Li.Read,r.read),{destroy:l}}(n,t,!0,e?.phase??Li.MixedReadWrite)):cR}class U${constructor(e,t,i){this.phase=e,this.pipelinedArgs=t,this.callbackFn=i,this.zone=K(Ct),this.errorHandler=K(cs,{optional:!0}),K(Xl,{optional:!0})?.notify(6)}invoke(){try{const e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}}class B${constructor(){this.executingCallbacks=!1,this.buckets={[Li.EarlyRead]:new Set,[Li.Write]:new Set,[Li.MixedReadWrite]:new Set,[Li.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let _g=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of t)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Te({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Mg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=_0(r,a):2==s&&(i=_0(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class fR extends vg{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=mt(e);return new Xh(t,this.ngModule)}}function pR(n,e){const t=[];for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i];if(void 0===r)continue;const s=Array.isArray(r),o=s?r[0]:r;t.push(e?{propName:o,templateName:i,isSignal:!!((s?r[1]:Jo.None)&Jo.SignalBased)}:{propName:o,templateName:i})}return t}class Xh extends sR{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=pR(e.inputs,!0);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return pR(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function jG(n){return n.map(GG).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){const s=dt(null);try{let o=(r=r||this.ngModule)instanceof Ii?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new ic(e,o):e,c=a.get(SM,null);if(null===c)throw new ee(407,!1);const l=a.get(L$,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(_g,null),changeDetectionScheduler:a.get(Xl,null)},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=i?function tW(n,e,t,i){const s=i.get(AI,!1)||t===es.ShadowDom,o=n.selectRootElement(e,s);return function nW(n){_1(n)}(o),o}(f,i,this.componentDef.encapsulation,a):rg(f,p,function H$(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(p));let g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let y=null;null!==m&&(y=Px(m,a,!0));const v=oM(0,null,null,1,0,null,null,null,null,null,null),_=cg(null,v,null,g,null,null,h,f,a,null,y);let x,S;ox(_);try{const b=this.componentDef;let E,A=null;b.findHostDirectiveDefs?(E=[],A=new Map,b.findHostDirectiveDefs(b,E,A),E.push(b)):E=[b];const M=function j$(n,e){const t=n[ce],i=De;return n[i]=e,cc(t,i,2,"#host",null)}(_,m),w=function W$(n,e,t,i,r,s,o){const a=r[ce];!function $$(n,e,t,i){for(const r of n)e.mergedAttrs=sh(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Mg(e,e.mergedAttrs,!0),null!==t&&f1(i,t,e))}(i,n,e,o);let c=null;null!==e&&(c=Px(e,r[Pn]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=cg(r,v1(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&cM(a,n,i.length-1),lg(r,d),r[n.index]=d}(M,m,b,E,_,h,f);S=hh(v,De),m&&function X$(n,e,t,i){if(i)L0(n,t,["ng-version","18.1.5"]);else{const{attrs:r,classes:s}=function WG(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ts(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&L0(n,t,r),s&&s.length>0&&h1(n,t,s.join(" "))}}(f,b,m,i),void 0!==t&&function Y$(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(S,this.ngContentSelectors,t),x=function q$(n,e,t,i,r,s){const o=Ft(),a=r[ce],c=Pi(o,r);b1(a,r,o,t,null,i);for(let u=0;u<t.length;u++)yi(rc(r,a,o.directiveStart+u,o),r);E1(a,r,o),c&&yi(c,r);const l=rc(r,a,o.directiveStart+o.componentOffset,o);if(n[qt]=r[qt]=l,null!==s)for(const u of s)u(l,e);return iM(a,o,r),l}(w,b,E,A,_,[Z$]),hM(v,_,null)}finally{ax()}return new G$(this.componentType,x,Fl(S,_),_,S)}finally{dt(s)}}}class G$ extends R${constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new kh(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;dM(s[ce],s,r,e,t),this.previousInputValues.set(e,t),Fh(gr(this._tNode.index,s),1)}}get injector(){return new Wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Z$(){const n=Ft();Om(Y()[ce],n)}let ls=(()=>{class n{static{this.__NG_ELEMENT_ID__=K$}}return n})();function K$(){return yR(Ft(),Y())}const J$=ls,mR=class extends J${constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Fl(this._hostTNode,this._hostLView)}get injector(){return new Wn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Bm(this._hostTNode,this._hostLView);if(dx(e)){const t=vh(e,this._hostLView),i=yh(e);return new Wn(t[ce].data[i+8],t)}return new Wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=gR(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,lc(this._hostTNode,null)),a}createComponent(e,t,i,r,s){const o=e&&!function ah(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const c=o?e:new Xh(mt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const m=(o?l:this.parentInjector).get(Ii,null);m&&(s=m)}mt(c.componentType??{});const f=c.create(l,r,null,s);return this.insertImpl(f.hostView,a,lc(this._hostTNode,null)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function w4(n){return gi(n[Rn])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[Rn],l=new mR(c,c[ui],c[Rn]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return function $l(n,e,t,i=!0){const r=e[ce];if(function Wj(n,e,t,i){const r=xn+i,s=t.length;i>0&&(t[r-1][rs]=e),i<s-xn?(e[rs]=t[r],RA(t,xn+i,e)):(t.push(e),e[rs]=null),e[Rn]=t;const o=e[Ja];null!==o&&t!==o&&t1(o,e);const a=e[co];null!==a&&a.insertView(n),J0(e),e[ke]|=128}(r,e,n,t),i){const o=eM(t,n),a=e[Xe],c=Jx(a,n[As]);null!==c&&function Gj(n,e,t,i,r,s){i[sn]=r,i[ui]=e,ag(n,i,t,1,r,s)}(r,n[ui],a,e,c,o)}const s=e[Ri];null!==s&&null!==s.firstChild&&(s.firstChild=null)}(o,r,s,i),e.attachToViewContainerRef(),RA(DM(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=gR(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Ph(this._lContainer,t);i&&(pm(DM(this._lContainer),t),sg(i[ce],i))}detach(e){const t=this._adjustIndex(e,-1),i=Ph(this._lContainer,t);return i&&null!=pm(DM(this._lContainer),t)?new kh(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function gR(n){return n[8]}function DM(n){return n[8]||(n[8]=[])}function yR(n,e){let t;const i=e[n.index];return gi(i)?t=i:(t=w1(i,e,null,n),e[n.index]=t,lg(e,t)),vR(t,e,n,i),new mR(t,n,e)}let vR=function xR(n,e,t,i){if(n[As])return;let r;r=8&t.type?wt(i):function Q$(n,e){const t=n[Xe],i=t.createComment(""),r=Pi(e,n);return oc(t,Jx(t,r),i,function Xj(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[As]=r},IM=()=>!1;class RM{constructor(e){this.queryList=e,this.matches=null}clone(){return new RM(this.queryList)}setDirty(){this.queryList.setDirty()}}class PM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new PM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==kM(e,t).matches&&this.queries[t].setDirty()}}class MR{constructor(e,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof e?function a8(n){return n.split(",").map(e=>e.trim())}(e):e}}class NM{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new NM(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class OM{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new OM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,i8(t,s)),this.matchTNodeWithReadOption(e,t,Vm(t,e,s,!1,!1))}else i===go?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Vm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===yr||r===ls||r===go&&4&t.type)this.addMatch(t.index,-2);else{const s=Vm(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function i8(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function s8(n,e,t,i){return-1===t?function r8(n,e){return 11&n.type?Fl(n,e):4&n.type?hg(n,e):null}(e,n):-2===t?function o8(n,e,t){return t===yr?Fl(e,n):t===go?hg(e,n):t===ls?yR(e,n):void 0}(n,e,i):rc(n,n[ce],t,e)}function bR(n,e,t,i){const r=e[co].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const l=o[c];a.push(l<0?null:s8(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function LM(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=bR(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=xn;d<u.length;d++){const h=u[d];h[Ja]===h[Rn]&&LM(h[ce],h,l,i)}if(null!==u[Pl]){const d=u[Pl];for(let h=0;h<d.length;h++){const f=d[h];LM(f[ce],f,l,i)}}}}}return i}function wR(n,e,t){const i=ht();return i.firstCreatePass&&(function TR(n,e,t){null===n.queries&&(n.queries=new NM),n.queries.track(new OM(e,t))}(i,new MR(n,e,t),-1),!(2&~e)&&(i.staticViewQueries=!0)),function ER(n,e,t){const i=new Mx(!(4&~t));return function sW(n,e,t,i){const r=T1(e);r.push(t),n.firstCreatePass&&C1(n).push(i,r.length-1)}(n,e,i,i.destroy),(e[co]??=new PM).queries.push(new RM(i))-1}(i,Y(),e)}function kM(n,e){return n.queries.getByIndex(e)}function CR(n,e){const t=n[ce],i=kM(t,e);return i.crossesNgTemplate?LM(t,n,e,[]):bR(t,n,i,e)}function Yl(n,e){Oi("NgSignals");const t=function Zz(n){const e=Object.create(Jz);e.value=n;const t=()=>(Z_(e),e.value);return t[Jr]=e,t}(n),i=t[Jr];return e?.equal&&(i.equal=e.equal),t.set=r=>HC(i,r),t.update=r=>function Kz(n,e){LC()||zC(),HC(n,e(n.value))}(i,r),t.asReadonly=DR.bind(t),t}function DR(){const n=this[Jr];if(void 0===n.readonlyFn){const e=()=>this();e[Jr]=n,n.readonlyFn=e}return n.readonlyFn}function kt(n){let e=function zR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ss(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Eg(n.inputs),o.inputTransforms=Eg(n.inputTransforms),o.declaredInputs=Eg(n.declaredInputs),o.outputs=Eg(n.outputs);const a=r.hostBindings;a&&b8(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&x8(n,c),l&&M8(n,l),v8(n,r),uG(n.outputs,r.outputs),ss(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===kt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function _8(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=sh(r.hostAttrs,t=sh(t,r.hostAttrs))}}(i)}function v8(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const i=e.inputs[t];if(void 0!==i&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function Eg(n){return n===Ts?{}:n===Et?[]:n}function x8(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function M8(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function b8(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}class hc{}class $R{}class BM extends hc{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fR(this);const r=mi(e);this._bootstrapComponents=vr(r.bootstrap),this._r3Injector=jD(e,t,[{provide:hc,useValue:this},{provide:vg,useValue:this.componentFactoryResolver},...i],zn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class VM extends $R{constructor(e){super(),this.moduleType=e}create(e){return new BM(this.moduleType,e,[])}}class qR extends hc{constructor(e){super(),this.componentFactoryResolver=new fR(this),this.instance=null;const t=new Sl([...e.providers,{provide:hc,useValue:this},{provide:vg,useValue:this.componentFactoryResolver}],e.parent||Mm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function wg(n,e,t=null){return new qR({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Sg(n){return!!function zM(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function bn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Kh(n,e,t,i,r,s,o,a,c,l){const u=t+De,d=e.firstCreatePass?function O8(n,e,t,i,r,s,o,a,c){const l=e.consts,u=cc(e,n,4,o||null,a||null);aM(e,t,u,Ur(l,c)),Om(e,u);const d=u.tView=oM(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,e,n,i,r,s,o,a,c):e.data[u];os(d,!1);const h=XR(e,n,d,t);mh()&&og(e,n,h,d),yi(h,n);const f=w1(h,n,h,d);return n[u]=f,lg(n,f),function _R(n,e,t){return IM(n,e,t)}(f,d,n),Cm(d)&&rM(e,n,d),null!=c&&sM(n,d,l),d}function Jl(n,e,t,i,r,s,o,a){const c=Y(),l=ht();return Kh(c,l,n,e,t,i,r,Ur(l.consts,s),o,a),Jl}let XR=function YR(n,e,t,i){return Is(!0),e[Xe].createComment("")};function Os(n,e,t,i){const r=Y();return bn(r,as(),e)&&(ht(),Ps(Xt(),r,n,e,t,i)),Os}function ou(n,e,t,i){return bn(n,as(),t)?e+it(t)+i:rt}function Pg(n,e){return n<<17|e<<2}function ca(n){return n>>17&32767}function JM(n){return 2|n}function mc(n){return(131068&n)>>2}function QM(n,e){return-131069&n|e<<2}function eb(n){return 1|n}function TP(n,e,t,i){const r=n[t+1],s=null===e;let o=i?ca(r):mc(r),a=!1;for(;0!==o&&(!1===a||s);){const l=n[o+1];_6(n[o],e)&&(a=!0,n[o+1]=i?eb(l):JM(l)),o=i?ca(l):mc(l)}a&&(n[t+1]=i?JM(r):eb(r))}function _6(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&wl(n,e)>=0}function us(n,e,t){const i=Y();return bn(i,as(),e)&&tr(ht(),Xt(),i,n,e,i[Xe],t,!1),us}function tb(n,e,t,i,r){const o=r?"class":"style";dM(n,t,e.inputs[o],o,i)}function Ng(n,e){return function ds(n,e,t,i){const r=Y(),s=ht(),o=function ho(n){const e=Ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function LP(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[di()],o=function OP(n,e){return e>=n.expandoStartIndex}(n,t);(function BP(n,e){return!!(n.flags&(e?8:16))})(s,i)&&null===e&&!o&&(e=!1),e=function A6(n,e,t,i){const r=function rx(n){const e=Ye.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=tf(t=nb(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=nb(r,n,e,t,i),null===s){let c=function D6(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==mc(i))return n[ca(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=nb(null,n,e,c[1],i),c=tf(c,e.attrs,i),function I6(n,e,t,i){n[ca(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function R6(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=tf(i,n[s].hostAttrs,t);return tf(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function y6(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=ca(o),c=mc(o);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||wl(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const h=ca(n[a+1]);n[i+1]=Pg(h,a),0!==h&&(n[h+1]=QM(n[h+1],i)),n[a+1]=function m6(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Pg(a,0),0!==a&&(n[a+1]=QM(n[a+1],i)),a=i;else n[i+1]=Pg(c,0),0===a?a=i:n[c+1]=QM(n[c+1],i),c=i;l&&(n[i+1]=JM(n[i+1])),TP(n,u,i,!0),TP(n,u,i,!1),function v6(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&wl(s,e)>=0&&(t[i+1]=eb(t[i+1]))}(e,u,n,i,s),o=Pg(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==rt&&bn(r,o,e)&&function kP(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function g6(n){return!(1&~n)}(l)?UP(c,e,t,r,mc(l),o):void 0;Og(u)||(Og(s)||function p6(n){return!(2&~n)}(l)&&(s=UP(c,null,t,r,a,o)),function Kj(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:ra.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ra.Important),n.setStyle(t,i,r,s))}}(i,o,dh(di(),t),r,s))}(s,s.data[di()],r,r[Xe],n,r[o+1]=function L6(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=zn(ia(n)))),n}(e,t),i,o)}(n,e,null,!0),Ng}function nb(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=tf(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function tf(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),mr(n,o,!!t||e[++s]))}return void 0===n?null:n}function UP(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[r+1];h===rt&&(h=d?Et:void 0);let f=d?N0(h,i):u===i?h:void 0;if(l&&!Og(f)&&(f=N0(c,i)),Og(f)&&(a=f,o))return a;const p=n[r+1];r=o?ca(p):mc(p)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=N0(c,i))}return a}function Og(n){return void 0!==n}function Yt(n,e,t,i){const r=Y(),s=ht(),o=De+n,a=r[Xe],c=s.firstCreatePass?function rq(n,e,t,i,r,s){const o=e.consts,c=cc(e,n,2,i,Ur(o,r));return aM(e,t,c,Ur(o,s)),null!==c.attrs&&Mg(c,c.attrs,!1),null!==c.mergedAttrs&&Mg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,t,i):s.data[o],l=GP(s,r,c,a,e,n);r[o]=l;const u=Cm(c);return os(c,!0),f1(a,l,c),!function Kl(n){return!(32&~n.flags)}(c)&&mh()&&og(s,r,l,c),0===function S4(){return Ye.lFrame.elementDepthCount}()&&yi(l,r),function T4(){Ye.lFrame.elementDepthCount++}(),u&&(rM(s,r,c),iM(s,c,r)),null!==i&&sM(r,c),Yt}function Ut(){let n=Ft();tx()?nx():(n=n.parent,os(n,!1));const e=n;(function A4(n){return Ye.skipHydrationRootTNode===n})(e)&&function P4(){Ye.skipHydrationRootTNode=null}(),function C4(){Ye.lFrame.elementDepthCount--}();const t=ht();return t.firstCreatePass&&(Om(t,n),$0(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function W4(n){return!!(8&n.flags)}(e)&&tb(t,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function $4(n){return!!(16&n.flags)}(e)&&tb(t,e,Y(),e.stylesWithoutHost,!1),Ut}function Fi(n,e,t,i){return Yt(n,e,t,i),Ut(),Fi}let GP=(n,e,t,i,r,s)=>(Is(!0),rg(i,r,function wD(){return Ye.lFrame.currentNamespace}()));function ob(n,e,t){const i=Y(),r=ht(),s=n+De,o=r.firstCreatePass?function aq(n,e,t,i,r){const s=e.consts,o=Ur(s,i),a=cc(e,n,8,"ng-container",o);return null!==o&&Mg(a,o,!0),aM(e,t,a,Ur(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];os(o,!0);const a=jP(r,i,o,n);return i[s]=a,mh()&&og(r,i,a,o),yi(a,i),Cm(o)&&(rM(r,i,o),iM(r,o,i)),null!=t&&sM(i,o),ob}function ab(){let n=Ft();const e=ht();return tx()?nx():(n=n.parent,os(n,!1)),e.firstCreatePass&&(Om(e,n),$0(n)&&e.queries.elementEnd(n)),ab}function cb(n,e,t){return ob(n,e,t),ab(),cb}let jP=(n,e,t,i)=>(Is(!0),Xx(e[Xe],""));function lb(){return Y()}const gu="en-US";let YP=gu;let pN=(n,e,t)=>{};function Ui(n,e,t,i){const r=Y(),s=ht(),o=Ft();return function hb(n,e,t,i,r,s,o){const a=Cm(i),l=n.firstCreatePass&&C1(n),u=e[qt],d=T1(e);let h=!0;if(3&i.type||o){const m=Pi(i,e),g=o?o(m):m,y=d.length,v=o?x=>o(wt(x[i.index])):i.index;let _=null;if(!o&&a&&(_=function Qq(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[Al],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,h=!1;else{s=vN(i,e,u,s),pN(m,r,s);const x=t.listen(g,r,s);d.push(s,x),l&&l.push(r,v,y,y+1)}}else s=vN(i,e,u,s);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const m=p.length;if(m)for(let g=0;g<m;g+=2){const S=e[p[g]][p[g+1]].subscribe(s),b=d.length;d.push(s,S),l&&l.push(r,i.index,b,-(b+1))}}}(s,r,r[Xe],o,n,e,i),Ui}function yN(n,e,t,i){const r=dt(null);try{return Ds(6,e,t),!1!==t(i)}catch(s){return ug(n,s),!1}finally{Ds(7,e,t),dt(r)}}function vN(n,e,t,i){return function r(s){if(s===Function)return i;Fh(n.componentOffset>-1?gr(n.index,e):e,5);let a=yN(e,t,i,s),c=r.__ngNextListenerFn__;for(;c;)a=yN(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Bg(n=1){return function k4(n){return(Ye.lFrame.contextLView=function lD(n,e){for(;n>0;)e=e[Dl],n--;return e}(n,Ye.lFrame.contextLView))[qt]}(n)}function Vg(n,e,t){return fb(n,"",e,"",t),Vg}function fb(n,e,t,i,r){const s=Y(),o=ou(s,e,t,i);return o!==rt&&tr(ht(),Xt(),s,n,o,s[Xe],r,!1),fb}function lf(n,e,t){wR(n,e,t)}function yu(n){const e=Y(),t=ht(),i=sx();Nm(i+1);const r=kM(t,i);if(n.dirty&&function E4(n){return!(4&~n[ke])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)n.reset([]);else{const s=CR(e,i);n.reset(s,JD),n.notifyOnChanges()}return!0}return!1}function vu(){return function FM(n,e){return n[co].queries[e].queryList}(Y(),sx())}function mb(n){return function ec(n,e){return n[e]}(function fD(){return Ye.lFrame.contextLView}(),De+n)}function vi(n,e=""){const t=Y(),i=ht(),r=n+De,s=i.firstCreatePass?cc(i,r,1,e,null):i.data[r],o=kN(i,t,s,e,n);t[r]=o,mh()&&og(i,t,o,s),os(s,!1)}let kN=(n,e,t,i,r)=>(Is(!0),function qx(n,e){return n.createText(e)}(e[Xe],i));function _u(n){return gb("",n,""),_u}function gb(n,e,t){const i=Y(),r=ou(i,n,e,t);return r!==rt&&function mo(n,e,t){const i=dh(e,n);!function QI(n,e,t){n.setValue(e,t)}(n[Xe],i,t)}(i,di(),r),gb}function yb(n,e,t,i,r){if(n=We(n),Array.isArray(n))for(let s=0;s<n.length;s++)yb(n[s],e,t,i,r);else{const s=ht(),o=Y(),a=Ft();let c=Ka(n)?n:We(n.provide);const l=qA(n),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Ka(n)||!n.multi){const f=new gh(l,r,ie),p=_b(c,e,r?u:u+h,d);-1===p?(px(Um(a,o),s,c),vb(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=_b(c,e,u+h,d),p=_b(c,e,u,u+h),g=p>=0&&t[p];if(r&&!g||!r&&!(f>=0&&t[f])){px(Um(a,o),s,c);const y=function w9(n,e,t,i,r){const s=new gh(n,t,ie);return s.multi=[],s.index=e,s.componentProviders=0,ZN(s,r,i&&!t),s}(r?E9:b9,t.length,r,i,l);!r&&g&&(t[p].providerFactory=y),vb(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),o.push(y)}else vb(s,n,f>-1?f:p,ZN(t[r?p:f],l,!r&&i));!r&&i&&g&&t[p].componentProviders++}}}function vb(n,e,t,i){const r=Ka(e),s=function JG(n){return!!n.useClass}(e);if(r||s){const c=(s?We(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function ZN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _b(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function b9(n,e,t,i){return xb(this.multi,[])}function E9(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=rc(t,t[ce],this.providerFactory.index,i);s=a.slice(0,o),xb(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],xb(r,s);return s}function xb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function an(n,e=[]){return t=>{t.providersResolver=(i,r)=>function M9(n,e,t){const i=ht();if(i.firstCreatePass){const r=ss(n);yb(t,i.data,i.blueprint,r,!0),yb(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}let S9=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=k0(0,t.type),r=i.length>0?wg([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Te({token:n,providedIn:"environment",factory:()=>new n(Ne(Ii))})}}return n})();function KN(n){Oi("NgStandalone"),n.getStandaloneInjector=e=>e.get(S9).getOrCreateStandaloneInjector(n)}function eO(n,e,t,i){return function tO(n,e,t,i,r,s){const o=e+t;return bn(n,o,r)?function Ns(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function uf(n,e){const t=n[e];return t===rt?void 0:t}(n,o+1)}(Y(),function Ni(){const n=Ye.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,i)}let MO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const TO=new he(""),Wg=new he("");let Ab,Tb=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ab||(function UX(n){Ab=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ct.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)(Ne(Ct),Ne(Cb),Ne(Wg))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})(),Cb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Ab?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function mf(n){return!!n&&"function"==typeof n.then}function CO(n){return!!n&&"function"==typeof n.subscribe}const Db=new he("");let Ib=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=K(Db,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(mf(s))t.push(s);else if(CO(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const $g=new he("");function IO(n,e){return Array.isArray(e)?e.reduce(IO,n):{...n,...e}}let fs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(_5),this.afterRenderEffectManager=K(_g),this.zonelessEnabled=K(Wh),this.externalTestViews=new Set,this.beforeRender=new fn,this.afterTick=new fn,this.componentTypes=[],this.components=[],this.isStable=K(fo).hasPendingTasks.pipe(bt(t=>!t)),this._injector=K(Ii)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof sR;if(!this._injector.get(Ib).done)throw!r&&function Qo(n){const e=mt(n)||Hn(n)||li(n);return null!==e&&e.standalone}(t),new ee(405,!1);let o;o=r?t:this._injector.get(vg).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function BX(n){return n.isBoundToModule}(o)?void 0:this._injector.get(hc),l=o.create(Mn.NULL,[],i||o.selector,a),u=l.location.nativeElement,d=l.injector.get(TO,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),qg(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ee(101,!1);const i=dt(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,dt(i),this.afterTick.next()}}detectChangesInAttachedViews(t){let i=null;this._injector.destroyed||(i=this._injector.get(SM,null,{optional:!0}));let r=0;const s=this.afterRenderEffectManager;for(;r<10;){const o=0===r;if(t||!o){this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)zX(a,c,o,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(r++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>fh(a))&&(s.execute(),!this.allViews.some(({_lView:a})=>fh(a))))break}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;qg(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get($g,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qg(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zX(n,e,t,i){(t||fh(n))&&dg(n,e,t&&!i?0:1)}class HX{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let PO=(()=>{class n{compileModuleSync(t){return new VM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=vr(mi(t).declarations).reduce((o,a)=>{const c=mt(a);return c&&o.push(new Xh(c)),o},[]);return new HX(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WX=(()=>{class n{constructor(){this.zone=K(Ct),this.changeDetectionScheduler=K(Xl),this.applicationRef=K(fs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rb({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new Ct(Pb()),[{provide:Ct,useFactory:n},{provide:Qr,multi:!0,useFactory:()=>{const t=K(WX,{optional:!0});return()=>t.initialize()}},{provide:Qr,multi:!0,useFactory:()=>{const t=K(qX);return()=>{t.initialize()}}},!0===e?{provide:rR,useValue:!0}:[]]}function Pb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let qX=(()=>{class n{constructor(){this.subscription=new Di,this.initialized=!1,this.zone=K(Ct),this.pendingTasks=K(fo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ct.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ct.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gf=(()=>{class n{constructor(){this.appRef=K(fs),this.taskService=K(fo),this.ngZone=K(Ct),this.zonelessEnabled=K(Wh),this.disableScheduling=K(rR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Di,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xx||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const i=this.useMicrotaskScheduler?qD:$D;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ct.isInAngularZone())}tick(t){if(this.runningTick||this.appRef.destroyed)return;const i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(t)},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(i),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const vo=new he("",{providedIn:"root",factory:()=>K(vo,yt.Optional|yt.SkipSelf)||function XX(){return typeof $localize<"u"&&$localize.locale||gu}()}),Ob=new he("");let FO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function v5(n="zone.js",e){return"noop"===n?new xx:"zone.js"===n?new Ct(e):n}(i?.ngZone,Pb({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=i?.ignoreChangesOutsideZone,o=function D8(n,e,t){return new BM(n,e,t)}(t.moduleType,this.injector,[...Rb({ngZoneFactory:()=>r,ignoreChangesOutsideZone:s}),{provide:Xl,useExisting:gf}]),a=o.injector.get(cs,null);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{qg(this._modules,o),c.unsubscribe()})}),function DO(n,e,t){try{const i=t();return mf(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(a,r,()=>{const c=o.injector.get(Ib);return c.runInitializers(),c.donePromise.then(()=>(function ZP(n){"string"==typeof n&&(YP=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(vo,gu)||gu),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=IO({},i);return function jX(n,e,t){const i=new VM(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(fs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ee(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Ob,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(Ne(Mn))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),la=null;const kO=new he("");function UO(n,e,t=[]){const i=`Platform: ${e}`,r=new he(i);return(s=[])=>{let o=Lb();if(!o||o.injector.get(kO,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function KX(n){if(la&&!la.get(kO,!1))throw new ee(400,!1);(function AO(){!function Yz(n){VC=n}(()=>{throw new ee(600,!1)})})(),la=n;const e=n.get(FO);(function VO(n){n.get(vI,null)?.forEach(t=>t())})(n)}(function BO(n=[],e){return Mn.create({name:e,providers:[{provide:V0,useValue:"platform"},{provide:Ob,useValue:new Set([()=>la=null])},...n]})}(a,i))}return function JX(){const e=Lb();if(!e)throw new ee(401,!1);return e}()}}function Lb(){return la?.get(FO)??null}let yf=(()=>{class n{static{this.__NG_ELEMENT_ID__=e7}}return n})();function e7(n){return function t7(n,e,t){if(Qa(n)&&!t){const i=gr(n.index,e);return new kh(i,i)}return 175&n.type?new kh(e[on],e):null}(Ft(),Y(),!(16&~n))}class WO{constructor(){}supports(e){return Sg(e)}create(e){return new o7(e)}}const s7=(n,e)=>e;class o7{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||s7}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<qO(i,r,s)?t:i,a=qO(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<l&&(s[h]=f+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Sg(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function P8(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new a7(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new $O),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $O),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class a7{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class c7{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class $O{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new c7,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qO(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function YO(){return new Vb([new WO])}let Vb=(()=>{class n{static{this.\u0275prov=Te({token:n,providedIn:"root",factory:YO})}constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||YO()),deps:[[n,new fm,new hm]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ee(901,!1)}}return n})();const f7=UO(null,"core",[]);let p7=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)(Ne(fs))}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=Ss({})}}return n})();const fL=new he("");function bu(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Mf(n,e){Oi("NgSignals");const t=function $z(n){const e=Object.create(qz);e.computation=n;const t=()=>{if(NC(e),Z_(e),e.value===Jp)throw e.error;return e.value};return t[Jr]=e,t}(n);return e?.equal&&(t[Jr].equal=e.equal),t}function ks(n){const e=dt(null);try{return n()}finally{dt(e)}}let EL=null;function ua(){return EL}class iY{}const ir=new he("");let jb=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>K(sY),providedIn:"platform"})}}return n})();const rY=new he("");let sY=(()=>{class n extends jb{constructor(){super(),this._doc=K(ir),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ua().getBaseHref(this._doc)}onPopState(t){const i=ua().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ua().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Wb(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function wL(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _o(n){return n&&"?"!==n[0]?"?"+n:n}let vc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>K(TL),providedIn:"root"})}}return n})();const SL=new he("");let TL=(()=>{class n extends vc{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??K(ir).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wb(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+_o(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+_o(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+_o(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(Ne(jb),Ne(SL,8))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oY=(()=>{class n extends vc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Wb(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+_o(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+_o(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(Ne(jb),Ne(SL,8))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})(),bf=(()=>{class n{constructor(t){this._subject=new pn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function lY(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(wL(CL(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+_o(i))}normalize(t){return n.stripTrailingSlash(function cY(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,CL(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_o(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_o(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=_o}static{this.joinWithSlash=Wb}static{this.stripTrailingSlash=wL}static{this.\u0275fac=function(i){return new(i||n)(Ne(vc))}}static{this.\u0275prov=Te({token:n,factory:()=>function aY(){return new bf(Ne(vc))}(),providedIn:"root"})}}return n})();function CL(n){return n.replace(/\/index.html$/,"")}function FL(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const tE=/\s+/,kL=[];let UL=(()=>{class n{constructor(t,i){this._ngEl=t,this._renderer=i,this.initialClasses=kL,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(tE):kL}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(tE):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(tE).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(ie(yr),ie(yo))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})(),BL=(()=>{class n{constructor(t){this._viewContainerRef=t,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(t){return void 0!==t.ngComponentOutletNgModule||void 0!==t.ngComponentOutletNgModuleFactory}_needToReCreateComponentInstance(t){return void 0!==t.ngComponentOutlet||void 0!==t.ngComponentOutletContent||void 0!==t.ngComponentOutletInjector||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){const i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this._moduleRef=this.ngComponentOutletNgModule?function A8(n,e){return new BM(n,e??null,[])}(this.ngComponentOutletNgModule,VL(i)):this.ngComponentOutletNgModuleFactory?this.ngComponentOutletNgModuleFactory.create(VL(i)):void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(const t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(const[i,r]of this._inputsUsed)r?(t.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(t.setInput(i,void 0),this._inputsUsed.delete(i))}static{this.\u0275fac=function(i){return new(i||n)(ie(ls))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[kr]})}}return n})();function VL(n){return n.get(hc).injector}class qY{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zL=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new qY(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),HL(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{HL(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(ie(ls),ie(go),ie(Vb))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function HL(n,e){n.context.$implicit=e.item}let GL=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new XY,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){jL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){jL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(ie(ls),ie(go))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class XY{constructor(){this.$implicit=null,this.ngIf=null}}function jL(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${zn(e)}'.`)}let _Z=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=Ss({})}}return n})();const qL="browser";function XL(n){return"server"===n}let bZ=(()=>{class n{static{this.\u0275prov=Te({token:n,providedIn:"root",factory:()=>function MZ(n){return n===qL}(K(na))?new EZ(K(ir),window):new SZ})}}return n})();class EZ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function wZ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}}class SZ{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class YL{}class QZ extends iY{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class lE extends QZ{static makeCurrent(){!function nY(n){EL??=n}(new lE)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function eK(){return Tf=Tf||document.querySelector("base"),Tf?Tf.getAttribute("href"):null}();return null==t?null:function tK(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Tf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return FL(document.cookie,e)}}let Tf=null,iK=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();const vy=new he("");let sF=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(Ne(vy),Ne(Ct))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();class uE{constructor(e){this._doc=e}}const dE="ng-app-id";let oF=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=XL(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${dE}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(dE),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(dE,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(Ne(ir),Ne(Ul),Ne(_I,8),Ne(na))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();const hE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fE=/%COMP%/g,aK=new he("",{providedIn:"root",factory:()=>!0});function cF(n,e){return e.map(t=>t.replace(fE,n))}let lF=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=XL(a),this.defaultRenderer=new pE(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===es.ShadowDom&&(i={...i,encapsulation:es.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof dF?r.applyToHost(t):r instanceof mE&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case es.Emulated:s=new dF(c,l,i,this.appId,u,o,a,d);break;case es.ShadowDom:return new dK(c,l,t,i,o,a,this.nonce,d);default:s=new mE(c,l,i,u,o,a,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(Ne(sF),Ne(oF),Ne(Ul),Ne(aK),Ne(ir),Ne(na),Ne(Ct),Ne(_I))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();class pE{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(hE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(uF(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(uF(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ee(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=hE[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=hE[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ra.DashCase|ra.Important)?e.style.setProperty(t,i,r&ra.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ra.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=ua().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function uF(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class dK extends pE{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=cF(r.id,r.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mE extends pE{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?cF(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class dF extends mE{constructor(e,t,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=function cK(n){return"_ngcontent-%COMP%".replace(fE,n)}(l),this.hostAttr=function lK(n){return"_nghost-%COMP%".replace(fE,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let hK=(()=>{class n extends uE{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(Ne(ir))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})(),fK=(()=>{class n extends uE{constructor(t){super(t),this.delegate=K(fL,{optional:!0})}supports(t){return!!this.delegate&&this.delegate.supports(t)}addEventListener(t,i,r){return this.delegate.addEventListener(t,i,r)}removeEventListener(t,i,r){return this.delegate.removeEventListener(t,i,r)}static{this.\u0275fac=function(i){return new(i||n)(Ne(ir))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();const hF=["alt","control","meta","shift"],pK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gK=(()=>{class n extends uE{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ua().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),hF.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=pK[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hF.forEach(o=>{o!==r&&(0,mK[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(Ne(ir))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();const pF=[{provide:na,useValue:qL},{provide:vI,useValue:function yK(){lE.makeCurrent()},multi:!0},{provide:ir,useFactory:function _K(){return function H5(n){Sx=n}(document),document},deps:[]}],xK=UO(f7,"browser",pF),MK=new he(""),mF=[{provide:Wg,useClass:class nK{addToWindow(e){tn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new ee(5103,!1);return s},tn.getAllAngularTestabilities=()=>e.getAllTestabilities(),tn.getAllAngularRootElements=()=>e.getAllRootElements(),tn.frameworkStabilizers||(tn.frameworkStabilizers=[]),tn.frameworkStabilizers.push(i=>{const r=tn.getAllAngularTestabilities();let s=r.length;const o=function(){s--,0==s&&i()};r.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?ua().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:TO,useClass:Tb,deps:[Ct,Cb,Wg]},{provide:Tb,useClass:Tb,deps:[Ct,Cb,Wg]}],gF=[{provide:V0,useValue:"root"},{provide:cs,useFactory:function vK(){return new cs},deps:[]},{provide:vy,useClass:hK,multi:!0,deps:[ir,Ct,na]},{provide:vy,useClass:gK,multi:!0,deps:[ir]},{provide:vy,useClass:fK,multi:!0},lF,oF,sF,{provide:SM,useExisting:lF},{provide:YL,useClass:iK,deps:[]},[]];let bK=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ul,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(Ne(MK,12))}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=Ss({providers:[...gF,...mF],imports:[_Z,p7]})}}return n})(),EK=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(Ne(ir))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xc(n){return this instanceof xc?(this.v=n,this):new xc(n)}function RK(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function MF(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}const bF=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function EF(n){return en(n?.then)}function wF(n){return en(n[u0])}function SF(n){return Symbol.asyncIterator&&en(n?.[Symbol.asyncIterator])}function TF(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const CF=function NK(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function AF(n){return en(n?.[CF])}function DF(n){return function IK(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function c(h){h.value instanceof xc?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield xc(t.read());if(r)return yield xc(void 0);yield yield xc(i)}}finally{t.releaseLock()}})}function IF(n){return en(n?.getReader)}function Us(n){if(n instanceof Dn)return n;if(null!=n){if(wF(n))return function OK(n){return new Dn(e=>{const t=n[u0]();if(en(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(bF(n))return function LK(n){return new Dn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(EF(n))return function FK(n){return new Dn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qC)})}(n);if(SF(n))return RF(n);if(AF(n))return function kK(n){return new Dn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(IF(n))return function UK(n){return RF(DF(n))}(n)}throw TF(n)}function RF(n){return new Dn(e=>{(function BK(n,e){var t,i,r,s;return function AK(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=RK(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function bo(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function PF(n,e=0){return ci((t,i)=>{t.subscribe(new Vn(i,r=>bo(i,n,()=>i.next(r),e),()=>bo(i,n,()=>i.complete(),e),r=>bo(i,n,()=>i.error(r),e)))})}function NF(n,e=0){return ci((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function OF(n,e){if(!n)throw new Error("Iterable cannot be null");return new Dn(t=>{bo(t,e,()=>{const i=n[Symbol.asyncIterator]();bo(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Xn(n,e){return e?function WK(n,e){if(null!=n){if(wF(n))return function VK(n,e){return Us(n).pipe(NF(e),PF(e))}(n,e);if(bF(n))return function HK(n,e){return new Dn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(EF(n))return function zK(n,e){return Us(n).pipe(NF(e),PF(e))}(n,e);if(SF(n))return OF(n,e);if(AF(n))return function GK(n,e){return new Dn(t=>{let i;return bo(t,e,()=>{i=n[CF](),bo(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>en(i?.return)&&i.return()})}(n,e);if(IF(n))return function jK(n,e){return OF(DF(n),e)}(n,e)}throw TF(n)}(n,e):Us(n)}function yE(n){return n[n.length-1]}function LF(n){return en(yE(n))?n.pop():void 0}function xy(n){return function $K(n){return n&&en(n.schedule)}(yE(n))?n.pop():void 0}function Ze(...n){return Xn(n,xy(n))}const{isArray:qK}=Array,{getPrototypeOf:XK,prototype:YK,keys:ZK}=Object;function FF(n){if(1===n.length){const e=n[0];if(qK(e))return{args:e,keys:null};if(function KK(n){return n&&"object"==typeof n&&XK(n)===YK}(e)){const t=ZK(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:JK}=Array;function kF(n){return bt(e=>function QK(n,e){return JK(e)?n(...e):n(e)}(n,e))}function UF(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function vE(...n){const e=xy(n),t=LF(n),{args:i,keys:r}=FF(n);if(0===i.length)return Xn([],e);const s=new Dn(function eJ(n,e,t=Xa){return i=>{BF(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)BF(e,()=>{const l=Xn(n[c],e);let u=!1;l.subscribe(new Vn(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>UF(r,o):Xa));return t?s.pipe(kF(t)):s}function BF(n,e,t){n?bo(t,n,e):e()}const My=n0(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _i(n,e,t=1/0){return en(e)?_i((i,r)=>bt((s,o)=>e(i,s,r,o))(Us(n(i,r))),t):("number"==typeof e&&(t=e),ci((i,r)=>function tJ(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<i?p(m):c.push(m),p=m=>{s&&e.next(m),l++;let g=!1;Us(t(m,u++)).subscribe(new Vn(e,y=>{r?.(y),s?f(y):e.next(y)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){const y=c.shift();o?bo(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(new Vn(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function Cf(n=1/0){return _i(Xa,n)}function _E(...n){return function nJ(){return Cf(1)}()(Xn(n,xy(n)))}function VF(n){return new Dn(e=>{Us(n()).subscribe(e)})}function by(n,e){const t=en(n)?n:()=>n,i=r=>r.error(t());return new Dn(e?r=>e.schedule(i,0,r):i)}const Bs=new Dn(n=>n.complete());function xE(){return ci((n,e)=>{let t=null;n._refCount++;const i=new Vn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class zF extends Dn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,QC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Di;const t=this.getSubject();e.add(this.source.subscribe(new Vn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Di.EMPTY)}return e}refCount(){return xE()(this)}}function gs(n,e){return ci((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(new Vn(i,c=>{r?.unsubscribe();let l=0;const u=s++;Us(n(c,u)).subscribe(r=new Vn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Su(n){return n<=0?()=>Bs:ci((e,t)=>{let i=0;e.subscribe(new Vn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Eo(n,e){return ci((t,i)=>{let r=0;t.subscribe(new Vn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Ey(n){return ci((e,t)=>{let i=!1;e.subscribe(new Vn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function HF(n=sJ){return ci((e,t)=>{let i=!1;e.subscribe(new Vn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function sJ(){return new My}function Mc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Eo((r,s)=>n(r,s,i)):Xa,Su(1),t?Ey(e):HF(()=>new My))}function Tu(n,e){return en(e)?_i(n,e,1):_i(n,1)}function zi(n,e,t){const i=en(n)||e||t?{next:n,error:e,complete:t}:n;return i?ci((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(new Vn(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Xa}function Cu(n){return ci((e,t)=>{let s,i=null,r=!1;i=e.subscribe(new Vn(t,void 0,void 0,o=>{s=Us(n(o,Cu(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function ME(n){return n<=0?()=>Bs:ci((e,t)=>{let i=[];e.subscribe(new Vn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Af(n){return ci((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const lt="primary",Df=Symbol("RouteTitle");class dJ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Au(n){return new dJ(n)}function hJ(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(":"===o[0])r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Vs(n,e){const t=n?bE(n):void 0,i=e?bE(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!GF(n[r],e[r]))return!1;return!0}function bE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function GF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function jF(n){return n.length>0?n[n.length-1]:null}function da(n){return function CK(n){return!!n&&(n instanceof Dn||en(n.lift)&&en(n.subscribe))}(n)?n:mf(n)?Xn(Promise.resolve(n)):Ze(n)}const pJ={exact:function qF(n,e,t){if(!Ec(n.segments,e.segments)||!wy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!qF(n.children[i],e.children[i],t))return!1;return!0},subset:XF},WF={exact:function mJ(n,e){return Vs(n,e)},subset:function gJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>GF(n[t],e[t]))},ignored:()=>!0};function $F(n,e,t){return pJ[t.paths](n.root,e.root,t.matrixParams)&&WF[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function XF(n,e,t){return YF(n,e,e.segments,t)}function YF(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ec(r,t)||e.hasChildren()||!wy(r,t,i))}if(n.segments.length===t.length){if(!Ec(n.segments,t)||!wy(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!XF(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ec(n.segments,r)&&wy(n.segments,r,i)&&n.children[lt])&&YF(n.children[lt],e,s,i)}}function wy(n,e,t){return e.every((i,r)=>WF[t](n[r].parameters,i.parameters))}class bc{constructor(e=new zt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Au(this.queryParams),this._queryParamMap}toString(){return _J.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ty(this)}}class If{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Au(this.parameters),this._parameterMap}toString(){return JF(this)}}function Ec(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Du=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>new Sy,providedIn:"root"})}}return n})();class Sy{parse(e){const t=new IJ(e);return new bc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Rf(e.root,!0)}`,i=function bJ(n){const e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Cy(t)}=${Cy(r)}`).join("&"):`${Cy(t)}=${Cy(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function xJ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const _J=new Sy;function Ty(n){return n.segments.map(e=>JF(e)).join("/")}function Rf(n,e){if(!n.hasChildren())return Ty(n);if(e){const t=n.children[lt]?Rf(n.children[lt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==lt&&i.push(`${r}:${Rf(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function vJ(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===lt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==lt&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===lt?[Rf(n.children[lt],!1)]:[`${r}:${Rf(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[lt]?`${Ty(n)}/${t[0]}`:`${Ty(n)}/(${t.join("//")})`}}function ZF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cy(n){return ZF(n).replace(/%3B/gi,";")}function EE(n){return ZF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ay(n){return decodeURIComponent(n)}function KF(n){return Ay(n.replace(/\+/g,"%20"))}function JF(n){return`${EE(n.path)}${function MJ(n){return Object.entries(n).map(([e,t])=>`;${EE(e)}=${EE(t)}`).join("")}(n.parameters)}`}const EJ=/^[^\/()?;#]+/;function wE(n){const e=n.match(EJ);return e?e[0]:""}const wJ=/^[^\/()?;=#]+/,TJ=/^[^=?&#]+/,AJ=/^[^&#]+/;class IJ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[lt]=new zt(e,t)),i}parseSegment(){const e=wE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new If(Ay(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function SJ(n){const e=n.match(wJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=wE(this.remaining);r&&(i=r,this.capture(i))}e[Ay(t)]=Ay(i)}parseQueryParam(e){const t=function CJ(n){const e=n.match(TJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function DJ(n){const e=n.match(AJ);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=KF(t),s=KF(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=wE(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ee(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=lt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[lt]:new zt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}}function QF(n){return n.segments.length>0?new zt([],{[lt]:n}):n}function ek(n){const e={};for(const[i,r]of Object.entries(n.children)){const s=ek(r);if(i===lt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function RJ(n){if(1===n.numberOfChildren&&n.children[lt]){const e=n.children[lt];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}function wc(n){return n instanceof bc}function tk(n){let e;const i=function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new zt(s.url,o);return s===n&&(e=a),a}(n.root),r=QF(i);return e??r}function nk(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return SE(r,r,r,t,i);const s=function NJ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rk(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new rk(t,e,i)}(e);if(s.toRoot())return SE(r,r,new zt([],{}),t,i);const o=function OJ(n,e,t){if(n.isAbsolute)return new Iy(e,!0,0);if(!t)return new Iy(e,!1,NaN);if(null===t.parent)return new Iy(t,!0,0);const i=Dy(n.commands[0])?0:1;return function LJ(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ee(4005,!1);r=i.segments.length}return new Iy(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?Nf(o.segmentGroup,o.index,s.commands):sk(o.segmentGroup,o.index,s.commands);return SE(r,o.segmentGroup,a,t,i)}function Dy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pf(n){return"object"==typeof n&&null!=n&&n.outlets}function SE(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:ik(n,e,t);const a=QF(ek(o));return new bc(a,s,r)}function ik(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:ik(s,e,t)}),new zt(n.segments,i)}class rk{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Dy(i[0]))throw new ee(4003,!1);const r=i.find(Pf);if(r&&r!==jF(i))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Iy{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function sk(n,e,t){if(n??=new zt([],{}),0===n.segments.length&&n.hasChildren())return Nf(n,e,t);const i=function kJ(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Pf(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!ak(c,l,o))return s;i+=2}else{if(!ak(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new zt(n.segments.slice(0,i.pathIndex),{});return s.children[lt]=new zt(n.segments.slice(i.pathIndex),n.children),Nf(s,0,r)}return i.match&&0===r.length?new zt(n.segments,{}):i.match&&!n.hasChildren()?TE(n,e,t):i.match?Nf(n,0,r):TE(n,e,t)}function Nf(n,e,t){if(0===t.length)return new zt(n.segments,{});{const i=function FJ(n){return Pf(n[0])?n[0].outlets:{[lt]:n}}(t),r={};if(Object.keys(i).some(s=>s!==lt)&&n.children[lt]&&1===n.numberOfChildren&&0===n.children[lt].segments.length){const s=Nf(n.children[lt],e,t);return new zt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=sk(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new zt(n.segments,r)}}function TE(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Pf(s)){const c=UJ(s.outlets);return new zt(i,c)}if(0===r&&Dy(t[0])){i.push(new If(n.segments[e].path,ok(t[0]))),r++;continue}const o=Pf(s)?s.outlets[lt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Dy(a)?(i.push(new If(o,ok(a))),r+=2):(i.push(new If(o,{})),r++)}return new zt(i,{})}function UJ(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=TE(new zt([],{}),0,i))}),e}function ok(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function ak(n,e,t){return n==t.path&&Vs(e,t.parameters)}const Of="imperative";var xt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(xt||{});class zs{constructor(e,t){this.id=e,this.url=t}}class Ry extends zs{constructor(e,t,i="imperative",r=null){super(e,t),this.type=xt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wo extends zs{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=xt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Mr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Mr||{}),Py=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Py||{});class Sc extends zs{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=xt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Iu extends zs{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=xt.NavigationSkipped}}class CE extends zs{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=xt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ck extends zs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BJ extends zs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VJ extends zs{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=xt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zJ extends zs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HJ extends zs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GJ{constructor(e){this.route=e,this.type=xt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jJ{constructor(e){this.route=e,this.type=xt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class WJ{constructor(e){this.snapshot=e,this.type=xt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $J{constructor(e){this.snapshot=e,this.type=xt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qJ{constructor(e){this.snapshot=e,this.type=xt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XJ{constructor(e){this.snapshot=e,this.type=xt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lk{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=xt.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class AE{}class Ny{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function ys(n){return n.outlet||lt}function Lf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class eQ{get injector(){return Lf(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ff(this.rootInjector),this.attachRef=null}}let Ff=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new eQ(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(Ne(Ii))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class uk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=DE(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=DE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=IE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return IE(e,this._root).map(t=>t.value)}}function DE(n,e){if(n===e.value)return e;for(const t of e.children){const i=DE(n,t);if(i)return i}return null}function IE(n,e){if(n===e.value)return[e];for(const t of e.children){const i=IE(n,t);if(i.length)return i.unshift(e),i}return[]}class vs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ru(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dk extends uk{constructor(e,t){super(e),this.snapshot=t,RE(this,e)}toString(){return this.snapshot.toString()}}function hk(n){const e=function tQ(n){const s=new Ly([],{},{},"",{},lt,n,null,{});return new fk("",new vs(s,[]))}(n),t=new Lr([new If("",{})]),i=new Lr({}),r=new Lr({}),s=new Lr({}),o=new Lr(""),a=new Pu(t,i,s,o,r,lt,n,e.root);return a.snapshot=e.root,new dk(new vs(a,[]),e)}class Pu{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(bt(l=>l[Df]))??Ze(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(bt(e=>Au(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(bt(e=>Au(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Oy(n,e,t="emptyOnly"){let i;const{routeConfig:r}=n;return i=null===e||"always"!==t&&""!==r?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...r?.data,...n._resolvedData}},r&&mk(r)&&(i.resolve[Df]=r.title),i}class Ly{get title(){return this.data?.[Df]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Au(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Au(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fk extends uk{constructor(e,t){super(t),this.url=e,RE(this,t)}toString(){return pk(this._root)}}function RE(n,e){e.value._routerState=n,e.children.forEach(t=>RE(n,t))}function pk(n){const e=n.children.length>0?` { ${n.children.map(pk).join(", ")} } `:"";return`${n.value}${e}`}function PE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vs(e.params,t.params)||n.paramsSubject.next(t.params),function fJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Vs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function NE(n,e){const t=Vs(n.params,e.params)&&function yJ(n,e){return Ec(n,e)&&n.every((t,i)=>Vs(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||NE(n.parent,e.parent))}function mk(n){return"string"==typeof n.title||null===n.title}let gk=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=lt,this.activateEvents=new pn,this.deactivateEvents=new pn,this.attachEvents=new pn,this.detachEvents=new pn,this.parentContexts=K(Ff),this.location=K(ls),this.changeDetector=K(yf),this.inputBinder=K(Fy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new OE(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kr]})}}return n})();class OE{__ngOutletInjector(e){return new OE(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Pu?this.route:e===Ff?this.childContexts:this.parent.get(e,t)}}const Fy=new he("");let yk=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=vE([i.queryParams,i.params,i.data]).pipe(gs(([s,o,a],c)=>(a={...s,...o,...a},0===c?Ze(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function tY(n){const e=mt(n);if(!e)return null;const t=new Xh(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();function kf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function iQ(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return kf(n,i,r);return kf(n,i)})}(n,e,t);return new vs(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>kf(n,a)),o}}const i=function rQ(n){return new Pu(new Lr(n.url),new Lr(n.params),new Lr(n.queryParams),new Lr(n.fragment),new Lr(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>kf(n,s));return new vs(i,r)}}class LE{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const vk="ngNavigationCancelingError";function ky(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=wc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=_k(!1,Mr.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function _k(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[vk]=!0,t.cancellationCode=e,t}function xk(n){return!!n&&n[vk]}class aQ{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),PE(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ru(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ru(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ru(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ru(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new XJ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $J(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(PE(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),PE(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}}class Mk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Uy{constructor(e,t){this.component=e,this.route=t}}function cQ(n,e,t){const i=n._root;return Uf(i,e?e._root:null,t,[i.value])}function Nu(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function mG(n){return null!==am(n)}(n)?e.get(n):n:i}function Uf(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ru(e);return n.children.forEach(o=>{(function uQ(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function dQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ec(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ec(n.url,e.url)||!Vs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!NE(n,e)||!Vs(n.queryParams,e.queryParams);default:return!NE(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Mk(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Uf(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Uy(a.outlet.component,o))}else o&&Bf(e,a,r),r.canActivateChecks.push(new Mk(i)),Uf(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Bf(a,t.getContext(o),r)),r}function Bf(n,e,t){const i=Ru(n),r=n.value;Object.entries(i).forEach(([s,o])=>{Bf(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Uy(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Vf(n){return"function"==typeof n}function bk(n){return n instanceof My||"EmptyError"===n?.name}const By=Symbol("INITIAL_VALUE");function Ou(){return gs(n=>vE(n.map(e=>e.pipe(Su(1),function rJ(...n){const e=xy(n);return ci((t,i)=>{(e?_E(n,t,e):_E(n,t)).subscribe(i)})}(By)))).pipe(bt(e=>{for(const t of e)if(!0!==t){if(t===By)return By;if(!1===t||vQ(t))return t}return!0}),Eo(e=>e!==By),Su(1)))}function vQ(n){return wc(n)||n instanceof LE}function Ek(n){return function oH(...n){return ZC(n)}(zi(e=>{if("boolean"!=typeof e)throw ky(0,e)}),bt(e=>!0===e))}class FE{constructor(e){this.segmentGroup=e||null}}class Vy extends Error{constructor(e){super(),this.urlTree=e}}function Lu(n){return by(new FE(n))}class RQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ze(i);if(r.numberOfChildren>1||!r.children[lt])return by(new ee(4e3,!1));r=r.children[lt]}}applyRedirectCommands(e,t,i,r,s){if("string"!=typeof t){const a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:p,title:m}=r,g=is(s,()=>a({params:f,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:m}));if(g instanceof bc)throw new Vy(g);t=g}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if("/"===t[0])throw new Vy(o);return o}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new bc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new zt(s,o)}createSegments(e,t,i,r){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ee(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const kE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PQ(n,e,t,i,r){const s=UE(n,e,t);return s.matched?(i=function YJ(n,e){return n.providers&&!n._injector&&(n._injector=wg(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function AQ(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Ze(r.map(o=>{const a=Nu(o,n);return da(function yQ(n){return n&&Vf(n.canMatch)}(a)?a.canMatch(e,t):is(n,()=>a(e,t)))})).pipe(Ou(),Ek()):Ze(!0)}(i,e,t).pipe(bt(o=>!0===o?s:{...kE}))):Ze(s)}function UE(n,e,t){if("**"===e.path)return function NQ(n){return{matched:!0,parameters:n.length>0?jF(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...kE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||hJ)(t,n,e);if(!r)return{...kE};const s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function wk(n,e,t,i){return t.length>0&&function FQ(n,e,t){return t.some(i=>zy(n,e,i)&&ys(i)!==lt)}(n,t,i)?{segmentGroup:new zt(e,LQ(i,new zt(t,n.children))),slicedSegments:[]}:0===t.length&&function kQ(n,e,t){return t.some(i=>zy(n,e,i))}(n,t,i)?{segmentGroup:new zt(n.segments,OQ(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new zt(n.segments,n.children),slicedSegments:t}}function OQ(n,e,t,i){const r={};for(const s of t)if(zy(n,e,s)&&!i[ys(s)]){const o=new zt([],{});r[ys(s)]=o}return{...i,...r}}function LQ(n,e){const t={};t[lt]=e;for(const i of n)if(""===i.path&&ys(i)!==lt){const r=new zt([],{});t[ys(i)]=r}return t}function zy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class VQ{}class GQ{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new RQ(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){const e=wk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(bt(({children:t,rootSnapshot:i})=>{const r=new vs(i,t),s=new fk("",r),o=function PJ(n,e,t=null,i=null){return nk(tk(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new Ly([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),lt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,lt,t).pipe(bt(i=>({children:i,rootSnapshot:t})),Cu(i=>{if(i instanceof Vy)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof FE?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(bt(o=>o instanceof vs?[o]:[]))}processChildren(e,t,i,r){const s=[];for(const o of Object.keys(i.children))"primary"===o?s.unshift(o):s.push(o);return Xn(s).pipe(Tu(o=>{const a=i.children[o],c=function QJ(n,e){const t=n.filter(i=>ys(i)===e);return t.push(...n.filter(i=>ys(i)!==e)),t}(t,o);return this.processSegmentGroup(e,c,a,o,r)}),function aJ(n,e){return ci(function oJ(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(new Vn(o,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}((o,a)=>(o.push(...a),o)),Ey(null),function cJ(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Eo((r,s)=>n(r,s,i)):Xa,ME(1),t?Ey(e):HF(()=>new My))}(),_i(o=>{if(null===o)return Lu(i);const a=Sk(o);return function jQ(n){n.sort((e,t)=>e.value.outlet===lt?-1:t.value.outlet===lt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Ze(a)}))}processSegment(e,t,i,r,s,o,a){return Xn(t).pipe(Tu(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a).pipe(Cu(l=>{if(l instanceof FE)return Ze(null);throw l}))),Mc(c=>!!c),Cu(c=>{if(bk(c))return function BQ(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?Ze(new VQ):Lu(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,c){return function UQ(n,e,t,i){return!!(ys(n)===i||i!==lt&&zy(e,t,n))&&UE(e,n,t).matched}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c):Lu(r):Lu(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){const{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=UE(t,r,s);if(!c)return Lu(t);"string"==typeof r.redirectTo&&"/"===r.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const f=new Ly(s,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tk(r),ys(r),r.component??r._loadedComponent??null,r,Ck(r)),p=Oy(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);const m=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,m).pipe(_i(g=>this.processSegment(e,i,t,g.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){const a=PQ(t,i,r,e);return"**"===i.path&&(t.children={}),a.pipe(gs(c=>c.matched?this.getChildConfig(e=i._injector??e,i,r).pipe(gs(({routes:l})=>{const u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,p=new Ly(h,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tk(i),ys(i),i.component??i._loadedComponent??null,i,Ck(i)),m=Oy(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);const{segmentGroup:g,slicedSegments:y}=wk(t,h,f,l);if(0===y.length&&g.hasChildren())return this.processChildren(u,l,g,p).pipe(bt(_=>new vs(p,_)));if(0===l.length&&0===y.length)return Ze(new vs(p,[]));const v=ys(i)===s;return this.processSegment(u,l,g,y,v?lt:s,!0,p).pipe(bt(_=>new vs(p,_ instanceof vs?[_]:[])))})):Lu(t)))}getChildConfig(e,t,i){return t.children?Ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function CQ(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Ze(!0):Ze(r.map(o=>{const a=Nu(o,n);return da(function fQ(n){return n&&Vf(n.canLoad)}(a)?a.canLoad(e,t):is(n,()=>a(e,t)))})).pipe(Ou(),Ek())}(e,t,i).pipe(_i(r=>r?this.configLoader.loadChildren(e,t).pipe(zi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function IQ(){return by(_k(!1,Mr.GuardRejected))}())):Ze({routes:[],injector:e})}}function WQ(n){const e=n.value.routeConfig;return e&&""===e.path}function Sk(n){const e=[],t=new Set;for(const i of n){if(!WQ(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Sk(i.children);e.push(new vs(i.value,r))}return e.filter(i=>!t.has(i))}function Tk(n){return n.data||{}}function Ck(n){return n.resolve||{}}function Ak(n){const e=n.children.map(t=>Ak(t)).flat();return[n,...e]}function BE(n){return gs(e=>{const t=n(e);return t?Xn(t).pipe(bt(()=>e)):Ze(e)})}let Dk=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===lt);return i}getResolvedTitleForRoute(t){return t.data[Df]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>K(KQ),providedIn:"root"})}}return n})(),KQ=(()=>{class n extends Dk{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(Ne(EK))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Fu=new he("",{providedIn:"root",factory:()=>({})});let Ik=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ns({type:n,selectors:[["ng-component"]],standalone:!0,features:[KN],decls:1,vars:0,template:function(i,r){1&i&&Fi(0,"router-outlet")},dependencies:[gk],encapsulation:2})}}return n})();function VE(n){const e=n.children&&n.children.map(VE),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==lt&&(t.component=Ik),t}const ku=new he("");let zE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=K(PO)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=da(t.loadComponent()).pipe(bt(Rk),zi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Af(()=>{this.componentLoaders.delete(t)})),r=new zF(i,()=>new fn).pipe(xE());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ze({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function JQ(n,e,t,i){return da(n.loadChildren()).pipe(bt(Rk),_i(r=>r instanceof $R||Array.isArray(r)?Ze(r):Xn(e.compileModuleAsync(r))),bt(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(ku,[],{optional:!0,self:!0}).flat()),{routes:o.map(VE),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Af(()=>{this.childrenLoaders.delete(i)})),o=new zF(s,()=>new fn).pipe(xE());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rk(n){return function QQ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let HE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>K(eee),providedIn:"root"})}}return n})(),eee=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Pk=new he(""),Nk=new he("");function tee(n,e,t){const i=n.get(Nk),r=n.get(ir);return n.get(Ct).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s;const o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),function nee(n){return new Promise(e=>{lR({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:c}=i;return c&&is(n,()=>c({transition:a,from:e,to:t})),o})}const Ok=new he("");let Hy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new fn,this.transitionAbortSubject=new fn,this.configLoader=K(zE),this.environmentInjector=K(Ii),this.urlSerializer=K(Du),this.rootContexts=K(Ff),this.location=K(bf),this.inputBindingEnabled=null!==K(Fy,{optional:!0}),this.titleStrategy=K(Dk),this.options=K(Fu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=K(HE),this.createViewTransition=K(Pk,{optional:!0}),this.navigationErrorHandler=K(Ok,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ze(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new jJ(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new GJ(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new Lr({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Of,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Eo(s=>0!==s.id),bt(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),gs(s=>{let o=!1,a=!1;return Ze(s).pipe(gs(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Mr.SupersededByNewNavigation),Bs;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:"string"==typeof c.extras.browserUrl?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new Iu(c.id,this.urlSerializer.serialize(c.rawUrl),d,Py.IgnoredSameUrlNavigation)),c.resolve(!1),Bs}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ze(c).pipe(gs(d=>{const h=this.transitions?.getValue();return this.events.next(new Ry(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Bs:Promise.resolve(d)}),function $Q(n,e,t,i,r,s){return _i(o=>function zQ(n,e,t,i,r,s,o="emptyOnly"){return new GQ(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(bt(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),zi(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new ck(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:m}=c,g=new Ry(d,this.urlSerializer.serialize(h),f,p);this.events.next(g);const y=hk(this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:y,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,Ze(s)}{const d="";return this.events.next(new Iu(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Py.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Bs}}),zi(c=>{const l=new BJ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),bt(c=>(this.currentTransition=s={...c,guards:cQ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function _Q(n,e){return _i(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ze({...t,guardsResult:!0}):function xQ(n,e,t,i){return Xn(n).pipe(_i(r=>function TQ(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Ze(!0);const o=s.map(a=>{const c=Lf(e)??r,l=Nu(a,c);return da(function gQ(n){return n&&Vf(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):is(c,()=>l(n,e,t,i))).pipe(Mc())});return Ze(o).pipe(Ou())}(r.component,r.route,t,e,i)),Mc(r=>!0!==r,!0))}(o,i,r,n).pipe(_i(a=>a&&function hQ(n){return"boolean"==typeof n}(a)?function MQ(n,e,t,i){return Xn(e).pipe(Tu(r=>_E(function EQ(n,e){return null!==n&&e&&e(new WJ(n)),Ze(!0)}(r.route.parent,i),function bQ(n,e){return null!==n&&e&&e(new qJ(n)),Ze(!0)}(r.route,i),function SQ(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function lQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>VF(()=>Ze(o.guards.map(c=>{const l=Lf(o.node)??t,u=Nu(c,l);return da(function mQ(n){return n&&Vf(n.canActivateChild)}(u)?u.canActivateChild(i,n):is(l,()=>u(i,n))).pipe(Mc())})).pipe(Ou())));return Ze(s).pipe(Ou())}(n,r.path,t),function wQ(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ze(!0);const r=i.map(s=>VF(()=>{const o=Lf(e)??t,a=Nu(s,o);return da(function pQ(n){return n&&Vf(n.canActivate)}(a)?a.canActivate(e,n):is(o,()=>a(e,n))).pipe(Mc())}));return Ze(r).pipe(Ou())}(n,r.route,t))),Mc(r=>!0!==r,!0))}(i,s,n,e):Ze(a)),bt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),zi(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw ky(0,c.guardsResult);const l=new VJ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Eo(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Mr.GuardRejected),!1)),BE(c=>{if(c.guards.canActivateChecks.length)return Ze(c).pipe(zi(l=>{const u=new zJ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),gs(l=>{let u=!1;return Ze(l).pipe(function qQ(n,e){return _i(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ze(t);const s=new Set(r.map(c=>c.route)),o=new Set;for(const c of s)if(!o.has(c))for(const l of Ak(c))o.add(l);let a=0;return Xn(o).pipe(Tu(c=>s.has(c)?function XQ(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!mk(r)&&(s[Df]=r.title),function YQ(n,e,t,i){const r=bE(n);if(0===r.length)return Ze({});const s={};return Xn(r).pipe(_i(o=>function ZQ(n,e,t,i){const r=Lf(e)??i,s=Nu(n,r);return da(s.resolve?s.resolve(e,t):is(r,()=>s(e,t)))}(n[o],e,t,i).pipe(Mc(),zi(a=>{if(a instanceof LE)throw ky(new Sy,a);s[o]=a}))),ME(1),function lJ(n){return bt(()=>n)}(s),Cu(o=>bk(o)?Bs:by(o)))}(s,n,e,i).pipe(bt(o=>(n._resolvedData=o,n.data=Oy(n,n.parent,t).resolve,null)))}(c,i,n,e):(c.data=Oy(c,c.parent,n).resolve,Ze(void 0))),zi(()=>a++),ME(1),_i(c=>a===o.size?Ze(t):Bs))})}(this.paramsInheritanceStrategy,this.environmentInjector),zi({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Mr.NoDataFromResolver)}}))}),zi(l=>{const u=new HJ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),BE(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(zi(h=>{u.component=h}),bt(()=>{})));for(const h of u.children)d.push(...l(h));return d};return vE(l(c.targetSnapshot.root)).pipe(Ey(null),Su(1))}),BE(()=>this.afterPreactivation()),gs(()=>{const{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?Xn(u).pipe(bt(()=>s)):Ze(s)}),bt(c=>{const l=function nQ(n,e,t){const i=kf(n,e._root,t?t._root:void 0);return new dk(i,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,s}),zi(()=>{this.events.next(new AE)}),((n,e,t,i)=>bt(r=>(new aQ(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Su(1),zi({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),function uJ(n){return ci((e,t)=>{Us(n).subscribe(new Vn(t,()=>t.complete(),Qd)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(zi(c=>{throw c}))),Af(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Mr.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cu(c=>{if(a=!0,xk(c))this.events.next(new Sc(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function sQ(n){return xk(n)&&wc(n.url)}(c)?this.events.next(new Ny(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{const l=new CE(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{const u=is(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof LE){const{message:d,cancellationCode:h}=ky(0,u);this.events.next(new Sc(s.id,this.urlSerializer.serialize(s.extractedUrl),d,h)),this.events.next(new Ny(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);const d=t.errorHandler(c);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Bs}))}))}cancelNavigationTransition(t,i,r){const s=new Sc(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iee(n){return n!==Of}let ree=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>K(oee),providedIn:"root"})}}return n})();class see{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let oee=(()=>{class n extends see{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ei(n)))(r||n)}})()}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lk=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:()=>K(aee),providedIn:"root"})}}return n})(),aee=(()=>{class n extends Lk{constructor(){super(...arguments),this.location=K(bf),this.urlSerializer=K(Du),this.options=K(Fu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=K(HE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new bc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=hk(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Ry)this.stateMemento=this.createStateMemento();else if(t instanceof Iu)this.rawUrlTree=i.initialUrl;else if(t instanceof ck){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof AE?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Sc&&(t.code===Mr.GuardRejected||t.code===Mr.NoDataFromResolver)?this.restoreHistory(i):t instanceof CE?this.restoreHistory(i,!0):t instanceof wo&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){const r=t instanceof bc?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ei(n)))(r||n)}})()}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(zf||{});function Fk(n,e){n.events.pipe(Eo(t=>t instanceof wo||t instanceof Sc||t instanceof CE||t instanceof Iu),bt(t=>t instanceof wo||t instanceof Iu?zf.COMPLETE:t instanceof Sc&&(t.code===Mr.Redirect||t.code===Mr.SupersededByNewNavigation)?zf.REDIRECTING:zf.FAILED),Eo(t=>t!==zf.REDIRECTING),Su(1)).subscribe(()=>{e()})}function cee(n){throw n}const lee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=K(MO),this.stateManager=K(Lk),this.options=K(Fu,{optional:!0})||{},this.pendingTasks=K(fo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=K(Hy),this.urlSerializer=K(Du),this.location=K(bf),this.urlHandlingStrategy=K(HE),this._events=new fn,this.errorHandler=this.options.errorHandler||cee,this.navigated=!1,this.routeReuseStrategy=K(ree),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=K(ku,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!K(Fy,{optional:!0}),this.eventsSubscription=new Di,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==r&&null!==s)if(this.stateManager.handleRouterEvent(i,s),i instanceof Sc&&i.code!==Mr.Redirect&&i.code!==Mr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof wo)this.navigated=!0;else if(i instanceof Ny){const o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c={browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||"eager"===this.urlUpdateStrategy||iee(r.source),...o};this.scheduleNavigation(a,Of,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}(function hee(n){return!(n instanceof AE||n instanceof Ny)})(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Of,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const c={...r};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(VE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=tk(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),d=this.currentUrlTree.root}return nk(d,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=wc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Of,null,i)}navigate(t,i={skipLocationChange:!1}){return function dee(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ee(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(r=!0===i?{...lee}:!1===i?{...uee}:i,wc(t))return $F(this.currentUrlTree,t,r);const s=this.parseUrl(t);return $F(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(null!=s&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return Fk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class kk{}let mee=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Eo(t=>t instanceof wo),Tu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=wg(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Xn(r).pipe(Cf())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Ze(null);const s=r.pipe(_i(o=>null===o?Ze(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Xn([s,this.loader.loadComponent(i)]).pipe(Cf()):s})}static{this.\u0275fac=function(i){return new(i||n)(Ne(Hs),Ne(PO),Ne(Ii),Ne(kk),Ne(zE))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const jE=new he("");let Uk=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ry?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Iu&&t.code===Py.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){!function m1(){throw new Error("invalid")}()}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();function Gs(n,e){return{\u0275kind:n,\u0275providers:e}}function Vk(){const n=K(Mn);return e=>{const t=n.get(fs);if(e!==t.components[0])return;const i=n.get(Hs),r=n.get(zk);1===n.get(WE)&&i.initialNavigation(),n.get(Hk,null,yt.Optional)?.setUpPreloading(),n.get(jE,null,yt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const zk=new he("",{factory:()=>new fn}),WE=new he("",{providedIn:"root",factory:()=>1}),Hk=new he("");function _ee(n){return Gs(0,[{provide:Hk,useExisting:mee},{provide:kk,useExisting:n}])}function Mee(n){return Gs(9,[{provide:Pk,useValue:tee},{provide:Nk,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const Gk=new he("ROUTER_FORROOT_GUARD"),bee=[bf,{provide:Du,useClass:Sy},Hs,Ff,{provide:Pu,useFactory:function Bk(n){return n.routerState.root},deps:[Hs]},zE,[]];let jk=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[bee,[],{provide:ku,multi:!0,useValue:t},{provide:Gk,useFactory:Tee,deps:[[Hs,new hm,new fm]]},{provide:Fu,useValue:i||{}},i?.useHash?{provide:vc,useClass:oY}:{provide:vc,useClass:TL},{provide:jE,useFactory:()=>{const n=K(bZ),e=K(Ct),t=K(Fu),i=K(Hy),r=K(Du);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Uk(r,i,n,e,t)}},i?.preloadingStrategy?_ee(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Cee(i):[],i?.bindToComponentInputs?Gs(8,[yk,{provide:Fy,useExisting:yk}]).\u0275providers:[],i?.enableViewTransitions?Mee().\u0275providers:[],[{provide:Wk,useFactory:Vk},{provide:$g,multi:!0,useExisting:Wk}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ku,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(Ne(Gk,8))}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=Ss({})}}return n})();function Tee(n){return"guarded"}function Cee(n){return["disabled"===n.initialNavigation?Gs(3,[{provide:Db,multi:!0,useFactory:()=>{const e=K(Hs);return()=>{e.setUpLocationChangeListener()}}},{provide:WE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Gs(2,[{provide:WE,useValue:0},{provide:Db,multi:!0,deps:[Mn],useFactory:e=>{const t=e.get(rY,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Hs),s=e.get(zk);Fk(r,()=>{i(!0)}),e.get(Hy).afterPreactivation=()=>(i(!0),s.closed?Ze(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const Wk=new he(""),Dee=[];let Iee=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ao({type:n});static \u0275inj=Ss({imports:[jk.forRoot(Dee),jk]})}return n})();function So(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $k(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var $E,xi,cn,un,Ws,JE,QE,Jk,t2,Gu,Zf,c,l,u,d,h,f,n,e,t,i,r,s,o,a,p,br={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Uu={duration:.5,overwrite:!1,delay:0},Hr=1e8,Jt=1e-8,qE=2*Math.PI,Ree=qE/4,Pee=0,qk=Math.sqrt,Nee=Math.cos,Oee=Math.sin,ti=function(e){return"string"==typeof e},mn=function(e){return"function"==typeof e},To=function(e){return"number"==typeof e},XE=function(e){return typeof e>"u"},js=function(e){return"object"==typeof e},rr=function(e){return!1!==e},YE=function(){return typeof window<"u"},Gy=function(e){return mn(e)||ti(e)},Xk="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Mi=Array.isArray,ZE=/(?:-?\.?\d|\.)+/gi,Yk=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Bu=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,KE=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Zk=/[+-]=-?[.\d]+/,Kk=/[^,'"\[\]\s]+/gi,Lee=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Er={},jy={},Qk=function(e){return(jy=Cc(e,Er))&&ar},ew=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Hf=function(e,t){return!t&&console.warn(e)},e2=function(e,t){return e&&(Er[e]=t)&&jy&&(jy[e]=t)||Er},Gf=function(){return 0},Fee={suppressEvents:!0,isStart:!0,kill:!1},Wy={suppressEvents:!0,kill:!1},kee={suppressEvents:!0},tw={},ha=[],nw={},wr={},iw={},n2=30,$y=[],rw="",sw=function(e){var i,r,t=e[0];if(js(t)||mn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=$y.length;r--&&!$y[r].targetTest(t););i=$y[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new R2(e[r],i)))||e.splice(r,1);return e},Tc=function(e){return e._gsap||sw(Wr(e))[0]._gsap},i2=function(e,t,i){return(i=e[t])&&mn(i)?e[t]():XE(i)&&e.getAttribute&&e.getAttribute(t)||i},sr=function(e,t){return(e=e.split(",")).forEach(t)||e},Sn=function(e){return Math.round(1e5*e)/1e5||0},ni=function(e){return Math.round(1e7*e)/1e7||0},Vu=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+r:"-"===i?e-r:"*"===i?e*r:e/r},Uee=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},qy=function(){var i,r,e=ha.length,t=ha.slice(0);for(nw={},ha.length=0,i=0;i<e;i++)(r=t[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},r2=function(e,t,i,r){ha.length&&!xi&&qy(),e.render(t,i,r||xi&&t<0&&(e._initted||e._startAt)),ha.length&&!xi&&qy()},s2=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Kk).length<2?t:ti(e)?e.trim():e},o2=function(e){return e},Gr=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Cc=function(e,t){for(var i in t)e[i]=t[i];return e},a2=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=js(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Xy=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},jf=function(e){var t=e.parent||un,i=e.keyframes?function(e){return function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}}(Mi(e.keyframes)):Gr;if(rr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},c2=function(e,t,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Yy=function(e,t,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},fa=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ac=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},ow=function(e,t,i,r){return e._startAt&&(xi?e._startAt.revert(Wy):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Hee=function n(e){return!e||e._ts&&n(e.parent)},l2=function(e){return e._repeat?zu(e._tTime,e=e.duration()+e._rDelay)*e:0},zu=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Zy=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Ky=function(e){return e._end=ni(e._start+(e._tDur/Math.abs(e._ts||e._rts||Jt)||0))},Jy=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=ni(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Ky(e),i._dirty||Ac(i,e)),e},u2=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Zy(e.rawTime(),t),(!t._dur||$f(0,t.totalDuration(),i)-t._tTime>Jt)&&t.render(i,!0)),Ac(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Jt}},$s=function(e,t,i,r){return t.parent&&fa(t),t._start=ni((To(i)?i:i||e!==un?jr(e,i,t):e._time)+t._delay),t._end=ni(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),c2(e,t,"_first","_last",e._sort?"_start":0),aw(t)||(e._recent=t),r||u2(e,t),e._ts<0&&Jy(e,e._tTime),e},d2=function(e,t){return(Er.ScrollTrigger||ew("scrollTrigger",t))&&Er.ScrollTrigger.create(t,e)},h2=function(e,t,i,r,s){return gw(e,t,s),e._initted?!i&&e._pt&&!xi&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&t2!==Tr.frame?(ha.push(e),e._lazy=[s,r],1):void 0:1},Gee=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},aw=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Hu=function(e,t,i,r){var s=e._repeat,o=ni(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:ni(o*(s+1)+e._rDelay*s):o,a>0&&!r&&Jy(e,e._tTime=e._tDur*a),e.parent&&Ky(e),i||Ac(e.parent,e),e},f2=function(e){return e instanceof Hi?Ac(e):Hu(e,e._dur)},$ee={_start:0,endTime:Gf,totalDuration:Gf},jr=function n(e,t,i){var a,c,l,r=e.labels,s=e._recent||$ee,o=e.duration()>=Hr?s.endTime(!1):e._dur;return ti(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l="%"===t.substr(-1),a=t.indexOf("="),"<"===c||">"===c?(a>=0&&(t=t.replace(/=/,"")),("<"===c?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&i&&(c=c/100*(Mi(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+c:o+c)):null==t?o:+t},Wf=function(e,t,i){var a,c,r=To(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,c=i;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=rr(c.vars.inherit)&&c.parent;o.immediateRender=rr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Ln(t[0],o,t[s+1])},pa=function(e,t){return e||0===e?t(e):t},$f=function(e,t,i){return i<e?e:i>t?t:i},bi=function(e,t){return ti(e)&&(t=Lee.exec(e))?t[1]:""},cw=[].slice,p2=function(e,t){return e&&js(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&js(e[0]))&&!e.nodeType&&e!==Ws},Wr=function(e,t,i){return cn&&!t&&cn.selector?cn.selector(e):!ti(e)||i||!JE&&ju()?Mi(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(r){var s;return ti(r)&&!t||p2(r,1)?(s=i).push.apply(s,Wr(r)):i.push(r)})||i}(e,i):p2(e)?cw.call(e,0):e?[e]:[]:cw.call((t||QE).querySelectorAll(e),0)},lw=function(e){return e=Wr(e)[0]||Hf("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Wr(t,i.querySelectorAll?i:i===e?Hf("Invalid scope")||QE.createElement("div"):e)}},m2=function(e){return e.sort(function(){return.5-Math.random()})},g2=function(e){if(mn(e))return e;var t=js(e)?e:{each:e},i=Dc(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,c=isNaN(r)||a,l=t.axis,u=r,d=r;return ti(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!a&&c&&(u=r[0],d=r[1]),function(h,f,p){var y,v,_,x,S,b,E,A,M,m=(p||t).length,g=o[m];if(!g){if(!(M="auto"===t.grid?0:(t.grid||[1,Hr])[1])){for(E=-Hr;E<(E=p[M++].getBoundingClientRect().left)&&M<m;);M<m&&M--}for(g=o[m]=[],y=c?Math.min(M,m)*u-.5:r%M,v=M===Hr?0:c?m*d/M-.5:r/M|0,E=0,A=Hr,b=0;b<m;b++)_=b%M-y,x=v-(b/M|0),g[b]=S=l?Math.abs("y"===l?x:_):qk(_*_+x*x),S>E&&(E=S),S<A&&(A=S);"random"===r&&m2(g),g.max=E-A,g.min=A,g.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(M>m?m-1:l?"y"===l?m/M:M:Math.max(M,m/M))||0)*("edges"===r?-1:1),g.b=m<0?s-m:s,g.u=bi(t.amount||t.each)||0,i=i&&m<0?A2(i):i}return m=(g[h]-g.min)/g.max||0,ni(g.b+(i?i(m):m)*g.v)+g.u}},uw=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=ni(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(To(i)?0:bi(i))}},y2=function(e,t){var r,s,i=Mi(e);return!i&&js(e)&&(r=i=e.radius||Hr,e.values?(e=Wr(e.values),(s=!To(e[0]))&&(r*=r)):e=uw(e.increment)),pa(t,i?mn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var h,f,a=parseFloat(s?o.x:o),c=parseFloat(s?o.y:0),l=Hr,u=0,d=e.length;d--;)(h=s?(h=e[d].x-a)*h+(f=e[d].y-c)*f:Math.abs(e[d]-a))<l&&(l=h,u=d);return u=!r||l<=r?e[u]:o,s||u===o||To(o)?u:u+bi(o)}:uw(e))},v2=function(e,t,i,r){return pa(Mi(e)?!t:!0===i?!!(i=0):!r,function(){return Mi(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*r)/r})},_2=function(e,t,i){return pa(i,function(r){return e[~~t(r)]})},qf=function(e){for(var r,s,o,a,t=0,i="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?Kk:ZE),i+=e.substr(t,r-t)+v2(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},x2=function(e,t,i,r,s){var o=t-e,a=r-i;return pa(s,function(c){return i+((c-e)/o*a||0)})},M2=function(e,t,i){var o,a,c,r=e.labels,s=Hr;for(o in r)(a=r[o]-t)<0==!!i&&a&&s>(a=Math.abs(a))&&(c=o,s=a);return c},Sr=function(e,t,i){var c,l,u,r=e.vars,s=r[t],o=cn,a=e._ctx;if(s)return c=r[t+"Params"],l=r.callbackScope||e,i&&ha.length&&qy(),a&&(cn=a),u=c?s.apply(l,c):s.call(l),cn=o,u},Xf=function(e){return fa(e),e.scrollTrigger&&e.scrollTrigger.kill(!!xi),e.progress()<1&&Sr(e,"onInterrupt"),e},b2=[],E2=function(e){if(e)if(e=!e.name&&e.default||e,YE()||e.headless){var t=e.name,i=mn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Gf,render:_w,add:pw,kill:gte,modifier:mte,rawVars:0},o={targetTest:0,get:0,getSetter:vw,aliases:{},register:0};if(ju(),e!==r){if(wr[t])return;Gr(r,Gr(Xy(e,s),o)),Cc(r.prototype,Cc(s,Xy(e,o))),wr[r.prop=t]=r,e.targetTest&&($y.push(r),tw[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}e2(t,r),e.register&&e.register(ar,r,or)}else b2.push(e)},Wt=255,Yf={aqua:[0,Wt,Wt],lime:[0,Wt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Wt],navy:[0,0,128],white:[Wt,Wt,Wt],olive:[128,128,0],yellow:[Wt,Wt,0],orange:[Wt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Wt,0,0],pink:[Wt,192,203],cyan:[0,Wt,Wt],transparent:[Wt,Wt,Wt,0]},dw=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*Wt+.5|0},w2=function(e,t,i){var s,o,a,c,l,u,d,h,f,p,r=e?To(e)?[e>>16,e>>8&Wt,e&Wt]:0:Yf.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Yf[e])r=Yf[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&Wt,r&Wt,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&Wt,e&Wt]}else if("hsl"===e.substr(0,3))if(r=p=e.match(ZE),t){if(~e.indexOf("="))return r=e.match(Yk),i&&r.length<4&&(r[3]=1),r}else c=+r[0]%360/360,l=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(l+1):u+l-u*l),r.length>3&&(r[3]*=1),r[0]=dw(c+1/3,s,o),r[1]=dw(c,s,o),r[2]=dw(c-1/3,s,o);else r=e.match(ZE)||Yf.transparent;r=r.map(Number)}return t&&!p&&(s=r[0]/Wt,o=r[1]/Wt,a=r[2]/Wt,u=((d=Math.max(s,o,a))+(h=Math.min(s,o,a)))/2,d===h?c=l=0:(f=d-h,l=u>.5?f/(2-d-h):f/(d+h),c=d===s?(o-a)/f+(o<a?6:0):d===o?(a-s)/f+2:(s-o)/f+4,c*=60),r[0]=~~(c+.5),r[1]=~~(100*l+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},S2=function(e){var t=[],i=[],r=-1;return e.split(ma).forEach(function(s){var o=s.match(Bu)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},T2=function(e,t,i){var c,l,u,d,r="",s=(e+r).match(ma),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(h){return(h=w2(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=S2(e),(c=i.c).join(r)!==u.c.join(r)))for(d=(l=e.replace(ma,"1").split(Bu)).length-1;a<d;a++)r+=l[a]+(~c.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!l)for(d=(l=e.split(ma)).length-1;a<d;a++)r+=l[a]+s[a];return r+l[d]},ma=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Yf)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),tte=/hsl[a]?\(/,C2=function(e){var i,t=e.join(" ");if(ma.lastIndex=0,ma.test(t))return i=tte.test(t),e[1]=T2(e[1],i),e[0]=T2(e[0],i,S2(e[1])),!0},Tr=(n=Date.now,e=500,t=33,i=n(),r=i,o=s=1e3/240,p=function m(g){var _,x,S,b,y=n()-r,v=!0===g;if((y>e||y<0)&&(i+=y-t),((_=(S=(r+=y)-i)-o)>0||v)&&(b=++d.frame,h=S-1e3*d.time,d.time=S/=1e3,o+=_+(_>=s?4:s-_),x=1),v||(c=l(m)),x)for(f=0;f<a.length;f++)a[f](S,h,b,g)},d={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){Jk&&(!JE&&YE()&&(Ws=JE=window,QE=Ws.document||{},Er.gsap=ar,(Ws.gsapVersions||(Ws.gsapVersions=[])).push(ar.version),Qk(jy||Ws.GreenSockGlobals||!Ws.gsap&&Ws||{}),b2.forEach(E2)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&d.sleep(),l=u||function(g){return setTimeout(g,o-1e3*d.time+1|0)},Zf=1,p(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(c),Zf=0,l=Gf},lagSmoothing:function(g,y){e=g||1/0,t=Math.min(y||33,e)},fps:function(g){o=1e3*d.time+(s=1e3/(g||240))},add:function(g,y,v){var _=y?function(x,S,b,E){g(x,S,b,E),d.remove(_)}:g;return d.remove(g),a[v?"unshift":"push"](_),ju(),_},remove:function(g,y){~(y=a.indexOf(g))&&a.splice(y,1)&&f>=y&&f--},_listeners:a=[]}),ju=function(){return!Zf&&Tr.wake()},Mt={},nte=/^[\d.\-M][\d.\-,\s]/,ite=/["']/g,rte=function(e){for(var a,c,l,t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length;s<o;s++)c=i[s],a=s!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[r]=isNaN(l)?l.replace(ite,"").trim():+l,r=c.substr(a+1).trim();return t},A2=function(e){return function(t){return 1-e(1-t)}},D2=function n(e,t){for(var r,i=e._first;i;)i instanceof Hi?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Dc=function(e,t){return e&&(mn(e)?e:Mt[e]||function(e){var t=(e+"").split("("),i=Mt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[rte(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)}(e).split(",").map(s2)):Mt._CE&&nte.test(e)?Mt._CE("",e):i}(e))||t},Ic=function(e,t,i,r){void 0===i&&(i=function(c){return 1-t(1-c)}),void 0===r&&(r=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var o,s={easeIn:t,easeOut:i,easeInOut:r};return sr(e,function(a){for(var c in Mt[a]=Er[a]=s,Mt[o=a.toLowerCase()]=i,s)Mt[o+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=Mt[a+"."+c]=s[c]}),s},I2=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},hw=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/qE*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*Oee((u-o)*s)+1},c="out"===e?a:"in"===e?function(l){return 1-a(1-l)}:I2(a);return s=qE/s,c.config=function(l,u){return n(e,l,u)},c},fw=function n(e,t){void 0===t&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?i:"in"===e?function(s){return 1-i(1-s)}:I2(i);return r.config=function(s){return n(e,s)},r};sr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Ic(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),Mt.Linear.easeNone=Mt.none=Mt.Linear.easeIn,Ic("Elastic",hw("in"),hw("out"),hw()),function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Ic("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),Ic("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),Ic("Circ",function(n){return-(qk(1-n*n)-1)}),Ic("Sine",function(n){return 1===n?1:1-Nee(n*Ree)}),Ic("Back",fw("in"),fw("out"),fw()),Mt.SteppedEase=Mt.steps=Er.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-Jt;return function(a){return((r*$f(0,o,a)|0)+s)*i}}},Uu.ease=Mt["quad.out"],sr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return rw+=n+","+n+"Params,"});var R2=function(e,t){this.id=Pee++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:i2,this.set=t?t.getSetter:vw},Kf=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Hu(this,+t.duration,1,1),this.data=t.data,cn&&(this._ctx=cn,cn.data.push(this)),Zf||Tr.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Hu(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(ju(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Jy(this,i),!s._dp||s.parent||u2(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&$s(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Jt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),r2(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+l2(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+l2(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?zu(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Jt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Zy(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Jt?0:this._rts,this.totalTime($f(-Math.abs(this._delay),this._tDur,s),!1!==r),Ky(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ju(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Jt&&(this._tTime-=Jt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&$s(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(rr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Zy(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=kee);var r=xi;return xi=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),"nested"!==this.data&&!1!==i.kill&&this.kill(),xi=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,f2(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,f2(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(jr(this,i),rr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,rr(r))},e.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Jt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Jt,this},e.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Jt))},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=mn(i)?i:o2,a=function(){var l=r.then;r.then=null,mn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),s(o),r.then=l};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Xf(this)},n}();Gr(Kf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Jt,_prom:0,_ps:!1,_rts:1});var Hi=function(n){function e(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=rr(i.sortChildren),un&&$s(i.parent||un,So(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&d2(So(s),i.scrollTrigger),s}$k(e,n);var t=e.prototype;return t.to=function(r,s,o){return Wf(0,arguments,this),this},t.from=function(r,s,o){return Wf(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Wf(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,jf(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Ln(r,s,jr(this,o),1),this},t.call=function(r,s,o){return $s(this,Ln.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,c,l,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new Ln(r,o,jr(this,c)),this},t.staggerFrom=function(r,s,o,a,c,l,u){return o.runBackwards=1,jf(o).immediateRender=rr(o.immediateRender),this.staggerTo(r,s,o,a,c,l,u)},t.staggerFromTo=function(r,s,o,a,c,l,u,d){return a.startAt=o,jf(a).immediateRender=rr(a.immediateRender),this.staggerTo(r,s,a,c,l,u,d)},t.render=function(r,s,o){var h,f,p,m,g,y,v,_,x,S,b,E,a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:ni(r),d=this._zTime<0!=r<0&&(this._initted||!l);if(this!==un&&u>c&&r>=0&&(u=c),u!==this._tTime||o||d){if(a!==this._time&&l&&(u+=this._time-a,r+=this._time-a),h=u,x=this._start,y=!(_=this._ts),d&&(l||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(b=this._yoyo,g=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*g+r,s,o);if(h=ni(u%g),u===c?(m=this._repeat,h=l):((m=~~(u/g))&&m===u/g&&(h=l,m--),h>l&&(h=l)),S=zu(this._tTime,g),!a&&this._tTime&&S!==m&&this._tTime-S*g-this._dur<=0&&(S=m),b&&1&m&&(h=l-h,E=1),m!==S&&!this._lock){var A=b&&1&S,M=A===(b&&1&m);if(m<S&&(A=!A),a=A?0:u%l?l:u,this._lock=1,this.render(a||(E?0:ni(m*g)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&Sr(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,M&&(this._lock=2,this.render(a=A?l:-1e-4,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;D2(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,ni(a),ni(h)),v&&(u-=h-(h=v._start))),this._tTime=u,this._time=h,this._act=!_,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&!m&&(Sr(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(f=this._first;f;){if(p=f._next,(f._act||h>=f._start)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!y){v=0,p&&(u+=this._zTime=-Jt);break}}f=p}else{f=this._last;for(var w=r<0?r:h;f;){if(p=f._prev,(f._act||w<=f._end)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(w-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(w-f._start)*f._ts,s,o||xi&&(f._initted||f._startAt)),h!==this._time||!this._ts&&!y){v=0,p&&(u+=this._zTime=w?-Jt:Jt);break}}f=p}}if(v&&!s&&(this.pause(),v.render(h>=a?0:-Jt)._zTime=h>=a?1:-1,this._ts))return this._start=x,Ky(this),this.render(r,s,o);this._onUpdate&&!s&&Sr(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(x===this._start||Math.abs(_)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&fa(this,1),!s&&(!(r<0)||a)&&(u||a||!c)&&(Sr(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(To(s)||(s=jr(this,s,r)),!(r instanceof Kf)){if(Mi(r))return r.forEach(function(a){return o.add(a,s)}),this;if(ti(r))return this.addLabel(r,s);if(!mn(r))return this;r=Ln.delayedCall(0,r)}return this!==r?$s(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Hr);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof Ln?s&&c.push(l):(o&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,s,o)))),l=l._next;return c},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return ti(r)?this.removeLabel(r):mn(r)?this.killTweensOf(r):(Yy(this,r),r===this._recent&&(this._recent=this._last),Ac(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ni(Tr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=jr(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Ln.delayedCall(0,s||Gf,o);return a.data="isPause",this._hasPause=1,$s(this,a,jr(this,r))},t.removePause=function(r){var s=this._first;for(r=jr(this,r);s;)s._start===r&&"isPause"===s.data&&fa(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),c=a.length;c--;)ga!==a[c]&&a[c].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=Wr(r),c=this._first,l=To(s);c;)c instanceof Ln?Uee(c._targets,a)&&(l?(!ga||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&o.push(c):(u=c.getTweensOf(a,s)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(r,s){s=s||{};var f,o=this,a=jr(o,r),l=s.startAt,u=s.onStart,d=s.onStartParams,h=s.immediateRender,p=Ln.to(o,Gr({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||Jt,onStart:function(){if(o.pause(),!f){var g=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());p._dur!==g&&Hu(p,g,0,1).render(p._time,!0,!0),f=1}u&&u.apply(p,d||[])}},s));return h?p.render(0):p},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Gr({startAt:{time:jr(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),M2(this,jr(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),M2(this,jr(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Jt)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var l,a=this._first,c=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(l in c)c[l]>=o&&(c[l]+=r);return Ac(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ac(this)},t.totalDuration=function(r){var l,u,d,s=0,o=this,a=o._last,c=Hr;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,$s(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>s&&a._ts&&(s=a._end),a=l;Hu(o,o===un&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(un._ts&&(r2(un,Zy(r,un)),t2=Tr.frame),Tr.frame>=n2){n2+=br.autoSleep||120;var s=un._first;if((!s||!s._ts)&&br.autoSleep&&Tr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Tr.sleep()}}},e}(Kf);Gr(Hi.prototype,{_lock:0,_hasPause:0,_forcing:0});var ga,mw,ate=function(e,t,i,r,s,o,a){var d,h,f,p,m,g,y,v,c=new or(this._pt,e,t,0,1,k2,null,s),l=0,u=0;for(c.b=i,c.e=r,i+="",(y=~(r+="").indexOf("random("))&&(r=qf(r)),o&&(o(v=[i,r],e,t),i=v[0],r=v[1]),h=i.match(KE)||[];d=KE.exec(r);)p=d[0],m=r.substring(l,d.index),f?f=(f+1)%5:"rgba("===m.substr(-5)&&(f=1),p!==h[u++]&&(g=parseFloat(h[u-1])||0,c._pt={_next:c._pt,p:m||1===u?m:",",s:g,c:"="===p.charAt(1)?Vu(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},l=KE.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=a,(Zk.test(r)||y)&&(c.e=0),this._pt=c,c},pw=function(e,t,i,r,s,o,a,c,l,u){mn(r)&&(r=r(s||0,e,o));var p,d=e[t],h="get"!==i?i:mn(d)?l?e[t.indexOf("set")||!mn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():d,f=mn(d)?l?hte:L2:yw;if(ti(r)&&(~r.indexOf("random(")&&(r=qf(r)),"="===r.charAt(1)&&((p=Vu(h,r)+(bi(h)||0))||0===p)&&(r=p)),!u||h!==r||mw)return isNaN(h*r)||""===r?(!d&&!(t in e)&&ew(t,r),ate.call(this,e,t,h,r,f,c||br.stringFilter,l)):(p=new or(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof d?pte:F2,0,f),l&&(p.fp=l),a&&p.modifier(a,this,e),this._pt=p)},P2=function(e,t,i,r,s,o){var a,c,l,u;if(wr[e]&&!1!==(a=new wr[e]).init(s,a.rawVars?t[e]:function(e,t,i,r,s){if(mn(e)&&(e=Jf(e,s,t,i,r)),!js(e)||e.style&&e.nodeType||Mi(e)||Xk(e))return ti(e)?Jf(e,s,t,i,r):e;var a,o={};for(a in e)o[a]=Jf(e[a],s,t,i,r);return o}(t[e],r,s,o,i),i,r,o)&&(i._pt=c=new or(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Gu))for(l=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)l[a._props[u]]=c;return a},gw=function n(e,t,i){var S,b,E,A,M,w,P,L,O,B,W,k,J,r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,c=r.lazy,l=r.onUpdate,u=r.runBackwards,d=r.yoyoEase,h=r.keyframes,f=r.autoRevert,p=e._dur,m=e._startAt,g=e._targets,y=e.parent,v=y&&"nested"===y.data?y.vars.targets:g,_="auto"===e._overwrite&&!$E,x=e.timeline;if(x&&(!h||!s)&&(s="none"),e._ease=Dc(s,Uu.ease),e._yEase=d?A2(Dc(!0===d?s:d,Uu.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!x&&!!r.runBackwards,!x||h&&!r.stagger){if(k=(L=g[0]?Tc(g[0]).harness:0)&&r[L.prop],S=Xy(r,tw),m&&(m._zTime<0&&m.progress(1),t<0&&u&&a&&!f?m.render(-1,!0):m.revert(u&&p?Wy:Fee),m._lazy=0),o){if(fa(e._startAt=Ln.set(g,Gr({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!m&&rr(c),startAt:null,delay:0,onUpdate:l&&function(){return Sr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(xi||!a&&!f)&&e._startAt.revert(Wy),a&&p&&t<=0&&i<=0)return void(t&&(e._zTime=t))}else if(u&&p&&!m)if(t&&(a=!1),E=Gr({overwrite:!1,data:"isFromStart",lazy:a&&!m&&rr(c),immediateRender:a,stagger:0,parent:y},S),k&&(E[L.prop]=k),fa(e._startAt=Ln.set(g,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(xi?e._startAt.revert(Wy):e._startAt.render(-1,!0)),e._zTime=t,a){if(!t)return}else n(e._startAt,Jt,Jt);for(e._pt=e._ptCache=0,c=p&&rr(c)||c&&!p,b=0;b<g.length;b++){if(P=(M=g[b])._gsap||sw(g)[b]._gsap,e._ptLookup[b]=B={},nw[P.id]&&ha.length&&qy(),W=v===g?b:v.indexOf(M),L&&!1!==(O=new L).init(M,k||S,e,W,v)&&(e._pt=A=new or(e._pt,M,O.name,0,1,O.render,O,0,O.priority),O._props.forEach(function($){B[$]=A}),O.priority&&(w=1)),!L||k)for(E in S)wr[E]&&(O=P2(E,S,e,W,M,v))?O.priority&&(w=1):B[E]=A=pw.call(e,M,E,"get",S[E],W,v,0,r.stringFilter);e._op&&e._op[b]&&e.kill(M,e._op[b]),_&&e._pt&&(ga=e,un.killTweensOf(M,B,e.globalTime(t)),J=!e.parent,ga=0),e._pt&&c&&(nw[P.id]=1)}w&&U2(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!J,h&&t<=0&&x.render(Hr,!0,!0)},dte=function(e,t,i,r){var o,a,s=t.ease||r||"power1.inOut";if(Mi(t))a=i[e]||(i[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:s})});else for(o in t)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},Jf=function(e,t,i,r,s){return mn(e)?e.call(t,i,r,s):ti(e)&&~e.indexOf("random(")?qf(e):e},N2=rw+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",O2={};sr(N2+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return O2[n]=1});var Ln=function(n){function e(i,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var x,S,b,E,A,M,w,P,c=(a=n.call(this,o?r:jf(r))||this).vars,l=c.duration,u=c.delay,d=c.immediateRender,h=c.stagger,f=c.overwrite,p=c.keyframes,m=c.defaults,g=c.scrollTrigger,y=c.yoyoEase,v=r.parent||un,_=(Mi(i)||Xk(i)?To(i[0]):"length"in r)?[i]:Wr(i);if(a._targets=_.length?sw(_):Hf("GSAP target "+i+" not found. https://gsap.com",!br.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||h||Gy(l)||Gy(u)){if(r=a.vars,(x=a.timeline=new Hi({data:"nested",defaults:m||{},targets:v&&"nested"===v.data?v.vars.targets:_})).kill(),x.parent=x._dp=So(a),x._start=0,h||Gy(l)||Gy(u)){if(E=_.length,w=h&&g2(h),js(h))for(A in h)~N2.indexOf(A)&&(P||(P={}),P[A]=h[A]);for(S=0;S<E;S++)(b=Xy(r,O2)).stagger=0,y&&(b.yoyoEase=y),P&&Cc(b,P),M=_[S],b.duration=+Jf(l,So(a),S,M,_),b.delay=(+Jf(u,So(a),S,M,_)||0)-a._delay,!h&&1===E&&b.delay&&(a._delay=u=b.delay,a._start+=u,b.delay=0),x.to(M,b,w?w(S,M,_):0),x._ease=Mt.none;x.duration()?l=u=0:a.timeline=0}else if(p){jf(Gr(x.vars.defaults,{ease:"none"})),x._ease=Dc(p.ease||r.ease||"none");var O,B,W,L=0;if(Mi(p))p.forEach(function(k){return x.to(_,k,">")}),x.duration();else{for(A in b={},p)"ease"===A||"easeEach"===A||dte(A,p[A],b,p.easeEach);for(A in b)for(O=b[A].sort(function(k,J){return k.t-J.t}),L=0,S=0;S<O.length;S++)(W={ease:(B=O[S]).e,duration:(B.t-(S?O[S-1].t:0))/100*l})[A]=B.v,x.to(_,W,L),L+=W.duration;x.duration()<l&&x.to({},{duration:l-x.duration()})}}l||a.duration(l=x.duration())}else a.timeline=0;return!0===f&&!$E&&(ga=So(a),un.killTweensOf(_),ga=0),$s(v,So(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!l&&!p&&a._start===ni(v._time)&&rr(d)&&Hee(So(a))&&"nested"!==v.data)&&(a._tTime=-Jt,a.render(Math.max(0,-u)||0)),g&&d2(So(a),g),a}$k(e,n);var t=e.prototype;return t.render=function(r,s,o){var h,f,p,m,g,y,v,_,x,a=this._time,c=this._tDur,l=this._dur,u=r<0,d=r>c-Jt&&!u?c:r<Jt?0:r;if(l){if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=d,_=this.timeline,this._repeat){if(m=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*m+r,s,o);if(h=ni(d%m),d===c?(p=this._repeat,h=l):((p=~~(d/m))&&p===ni(d/m)&&(h=l,p--),h>l&&(h=l)),(y=this._yoyo&&1&p)&&(x=this._yEase,h=l-h),g=zu(this._tTime,m),h===a&&!o&&this._initted&&p===g)return this._tTime=d,this;p!==g&&(_&&this._yEase&&D2(_,y),this.vars.repeatRefresh&&!y&&!this._lock&&this._time!==m&&this._initted&&(this._lock=o=1,this.render(ni(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(h2(this,u?r:h,o,s,d))return this._tTime=0,this;if(!(a===this._time||o&&this.vars.repeatRefresh&&p!==g))return this;if(l!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(x||this._ease)(h/l),this._from&&(this.ratio=v=1-v),h&&!a&&!s&&!p&&(Sr(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(v,f.d),f=f._next;_&&_.render(r<0?r:_._dur*_._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&ow(this,r,0,o),Sr(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&Sr(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&ow(this,r,0,!0),(r||!l)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&fa(this,1),!s&&(!u||a)&&(d||a||y)&&(Sr(this,d===c?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,r){var l,u,d,s=e.ratio,o=t<0||!t&&(!e._start&&Gee(e)&&(e._initted||!aw(e))||(e._ts<0||e._dp._ts<0)&&!aw(e))?0:1,a=e._rDelay,c=0;if(a&&e._repeat&&(c=$f(0,e._tDur,t),u=zu(c,a),e._yoyo&&1&u&&(o=1-o),u!==zu(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||xi||r||e._zTime===Jt||!t&&e._zTime){if(!e._initted&&h2(e,t,r,i,c))return;for(d=e._zTime,e._zTime=t||(i?Jt:0),i||(i=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&ow(e,t,0,!0),e._onUpdate&&!i&&Sr(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&Sr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&fa(e,1),!i&&!xi&&(Sr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,c){Zf||Tr.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||gw(this,l),function(e,t,i,r,s,o,a,c){var u,d,h,f,l=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!l)for(l=e._ptCache[t]=[],h=e._ptLookup,f=e._targets.length;f--;){if((u=h[f][t])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return mw=1,e.vars[t]="+=0",gw(e,a),mw=0,c?Hf(t+" not eligible for reset"):1;l.push(u)}for(f=l.length;f--;)(u=(d=l[f])._pt||d).s=!r&&0!==r||s?u.s+(r||0)+o*u.c:r,u.c=i-u.s,d.e&&(d.e=Sn(i)+bi(d.e)),d.b&&(d.b=u.s+bi(d.b))}(this,r,s,o,a,this._ease(l/this._dur),l,c)?this.resetTo(r,s,o,a,1):(Jy(this,0),this.parent||c2(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?Xf(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,ga&&!0!==ga.vars.overwrite)._first||Xf(this),this.parent&&o!==this.timeline.totalDuration()&&Hu(this,this._dur*this.timeline._tDur/o,0,1),this}var d,h,f,p,m,g,y,a=this._targets,c=r?Wr(r):a,l=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0}(a,c))return"all"===s&&(this._pt=0),Xf(this);for(d=this._op=this._op||[],"all"!==s&&(ti(s)&&(m={},sr(s,function(v){return m[v]=1}),s=m),s=function(e,t){var s,o,a,c,i=e[0]?Tc(e[0]).harness:0,r=i&&i.aliases;if(!r)return t;for(o in s=Cc({},t),r)if(o in s)for(a=(c=r[o].split(",")).length;a--;)s[c[a]]=s[o];return s}(a,s)),y=a.length;y--;)if(~c.indexOf(a[y]))for(m in h=l[y],"all"===s?(d[y]=s,p=h,f={}):(f=d[y]=d[y]||{},p=s),p)(g=h&&h[m])&&((!("kill"in g.d)||!0===g.d.kill(m))&&Yy(this,g,"_pt"),delete h[m]),"all"!==f&&(f[m]=1);return this._initted&&!this._pt&&u&&Xf(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Wf(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Wf(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return un.killTweensOf(r,s,o)},e}(Kf);Gr(Ln.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),sr("staggerTo,staggerFrom,staggerFromTo",function(n){Ln[n]=function(){var e=new Hi,t=cw.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var yw=function(e,t,i){return e[t]=i},L2=function(e,t,i){return e[t](i)},hte=function(e,t,i,r){return e[t](r.fp,i)},fte=function(e,t,i){return e.setAttribute(t,i)},vw=function(e,t){return mn(e[t])?L2:XE(e[t])&&e.setAttribute?fte:yw},F2=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},pte=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},k2=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},_w=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},mte=function(e,t,i,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},gte=function(e){for(var i,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?Yy(this,t,"_pt"):t.dep||(i=1),t=r;return!i},yte=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},U2=function(e){for(var i,r,s,o,t=e._pt;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},or=function(){function n(t,i,r,s,o,a,c,l,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||F2,this.d=c||this,this.set=l||yw,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=yte,this.m=i,this.mt=s,this.tween=r},n}();sr(rw+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return tw[n]=1}),Er.TweenMax=Er.TweenLite=Ln,Er.TimelineLite=Er.TimelineMax=Hi,un=new Hi({sortChildren:!1,defaults:Uu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),br.stringFilter=C2;var Rc=[],Qy={},vte=[],B2=0,_te=0,xw=function(e){return(Qy[e]||vte).map(function(t){return t()})},Mw=function(){var e=Date.now(),t=[];e-B2>2&&(xw("matchMediaInit"),Rc.forEach(function(i){var o,a,c,l,r=i.queries,s=i.conditions;for(a in r)(o=Ws.matchMedia(r[a]).matches)&&(c=1),o!==s[a]&&(s[a]=o,l=1);l&&(i.revert(),c&&t.push(i))}),xw("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),B2=e,xw("matchMedia"))},V2=function(){function n(t,i){this.selector=i&&lw(i),this.data=[],this._r=[],this.isReverted=!1,this.id=_te++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){mn(i)&&(s=r,r=i,i=mn);var o=this,a=function(){var d,l=cn,u=o.selector;return l&&l!==o&&l.data.push(o),s&&(o.selector=lw(s)),cn=o,d=r.apply(o,arguments),mn(d)&&o._r.push(d),cn=l,o.selector=u,o.isReverted=!1,d};return o.last=a,i===mn?a(o,function(c){return o.add(null,c)}):i?o[i]=a:a},e.ignore=function(i){var r=cn;cn=null,i(this),cn=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Ln&&!(r.parent&&"nested"===r.parent.data)&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var l,a=s.getTweens(),c=s.data.length;c--;)"isFlip"===(l=s.data[c]).data&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),c=s.data.length;c--;)(l=s.data[c])instanceof Hi?"nested"!==l.data&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof Ln)&&l.revert&&l.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Rc.length;o--;)Rc[o].id===this.id&&Rc.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),xte=function(){function n(t){this.contexts=[],this.scope=t,cn&&cn.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){js(i)||(i={matches:i});var c,l,u,o=new V2(0,s||this.scope),a=o.conditions={};for(l in cn&&!o.selector&&(o.selector=cn.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i,i)"all"===l?u=1:(c=Ws.matchMedia(i[l]))&&(Rc.indexOf(o)<0&&Rc.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(Mw):c.addEventListener("change",Mw));return u&&r(o,function(d){return o.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),ev={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return E2(r)})},timeline:function(e){return new Hi(e)},getTweensOf:function(e,t){return un.getTweensOf(e,t)},getProperty:function(e,t,i,r){ti(e)&&(e=Wr(e)[0]);var s=Tc(e||{}).get,o=i?o2:s2;return"native"===i&&(i=""),e&&(t?o((wr[t]&&wr[t].get||s)(e,t,i,r)):function(a,c,l){return o((wr[a]&&wr[a].get||s)(e,a,c,l))})},quickSetter:function(e,t,i){if((e=Wr(e)).length>1){var r=e.map(function(u){return ar.quickSetter(u,t,i)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}var o=wr[t],a=Tc(e=e[0]||{}),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var d=new o;Gu._pt=0,d.init(e,i?u+i:u,Gu,0,[e]),d.render(1,d),Gu._pt&&_w(1,Gu)}:a.set(e,c);return o?l:function(u){return l(e,c,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=ar.to(e,Cc(((r={})[t]="+=0.1",r.paused=!0,r),i||{})),o=function(c,l,u){return s.resetTo(t,c,l,u)};return o.tween=s,o},isTweening:function(e){return un.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Dc(e.ease,Uu.ease)),a2(Uu,e||{})},config:function(e){return a2(br,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!wr[a]&&!Er[a]&&Hf(t+" effect requires "+a+" plugin.")}),iw[t]=function(a,c,l){return i(Wr(a),Gr(c||{},s),l)},o&&(Hi.prototype[t]=function(a,c,l){return this.add(iw[t](a,js(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){Mt[e]=Dc(t)},parseEase:function(e,t){return arguments.length?Dc(e,t):Mt},getById:function(e){return un.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new Hi(e);for(i.smoothChildTiming=rr(e.smoothChildTiming),un.remove(i),i._dp=0,i._time=i._tTime=un._time,r=un._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Ln&&r.vars.onComplete===r._targets[0]))&&$s(i,r,r._start-r._delay),r=s;return $s(un,i,0),i},context:function(e,t){return e?new V2(e,t):cn},matchMedia:function(e){return new xte(e)},matchMediaRefresh:function(){return Rc.forEach(function(e){var i,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||Mw()},addEventListener:function(e,t){var i=Qy[e]||(Qy[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Qy[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:function n(e,t,i){var r=t-e;return Mi(e)?_2(e,n(0,e.length),t):pa(i,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function n(e,t,i){var r=t-e,s=2*r;return Mi(e)?_2(e,n(0,e.length-1),t):pa(i,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:g2,random:v2,snap:y2,normalize:function(e,t,i){return x2(e,t,0,1,i)},getUnit:bi,clamp:function(e,t,i){return pa(i,function(r){return $f(e,t,r)})},splitColor:w2,toArray:Wr,selector:lw,mapRange:x2,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||bi(i))}},interpolate:function n(e,t,i,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var c,l,u,d,h,o=ti(e),a={};if(!0===i&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(Mi(e)&&!Mi(t)){for(u=[],h=(d=e.length)-2,l=1;l<d;l++)u.push(n(e[l-1],e[l]));d--,s=function(p){p*=d;var m=Math.min(h,~~p);return u[m](p-m)},i=t}else r||(e=Cc(Mi(e)?[]:{},e));if(!u){for(c in t)pw.call(a,e,c,"get",t[c]);s=function(p){return _w(p,a)||(o?e.p:e)}}}return pa(i,s)},shuffle:m2},install:Qk,effects:iw,ticker:Tr,updateRoot:Hi.updateRoot,plugins:wr,globalTimeline:un,core:{PropTween:or,globals:e2,Tween:Ln,Timeline:Hi,Animation:Kf,getCache:Tc,_removeLinkedListItem:Yy,reverting:function(){return xi},context:function(e){return e&&cn&&(cn.data.push(e),e._ctx=cn),cn},suppressOverwrites:function(e){return $E=e}}};sr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return ev[n]=Ln[n]}),Tr.add(Hi.updateRoot),Gu=ev.to({},{duration:0});var Mte=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},bw=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var c,l;if(ti(s)&&(c={},sr(s,function(u){return c[u]=1}),s=c),t){for(l in c={},s)c[l]=t(s[l]);s=c}!function(e,t){var r,s,o,i=e._targets;for(r in t)for(s=i.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=Mte(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))}(a,s)}}}},ar=ev.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,c;for(o in this.tween=i,t)c=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(c||0)+"",t[o],r,s,0,0,o)).op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)xi?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},bw("roundProps",uw),bw("modifiers"),bw("snap",y2))||ev;Ln.version=Hi.version=ar.version="3.12.5",Jk=1,YE()&&ju();var z2,ya,Wu,Ew,Pc,H2,ww,X2,Co={},Nc=180/Math.PI,$u=Math.PI/180,qu=Math.atan2,G2=1e8,Sw=/([A-Z])/g,Ste=/(left|right|width|margin|padding|x)/i,Tte=/[\s,\(]\S/,qs={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Tw=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Cte=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Ate=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Dte=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},j2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},W2=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Ite=function(e,t,i){return e.style[t]=i},Rte=function(e,t,i){return e.style.setProperty(t,i)},Pte=function(e,t,i){return e._gsap[t]=i},Nte=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Ote=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},Lte=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},dn="transform",cr=dn+"Origin",Fte=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in Co&&s){if(this.tfm=this.tfm||{},"transform"===e)return qs.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(~(e=qs[e]||e).indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Ao(r,a)}):this.tfm[e]=o.x?o[e]:Ao(r,e),e===cr&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(dn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(cr,t,"")),e=dn}(s||t)&&this.props.push(e,t,s[e])},$2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},kte=function(){var s,o,e=this.props,t=this.target,i=t.style,r=t._gsap;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty("--"===e[s].substr(0,2)?e[s]:e[s].replace(Sw,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(!(s=ww())||!s.isStart)&&!i[dn]&&($2(i),r.zOrigin&&i[cr]&&(i[cr]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},q2=function(e,t){var i={target:e,props:[],revert:kte,save:Fte};return e._gsap||ar.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},Cw=function(e,t){var i=ya.createElementNS?ya.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ya.createElement(e);return i&&i.style?i:ya.createElement(e)},Xs=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(Sw,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Xu(t)||t,1)||""},Y2="O,Moz,ms,Ms,Webkit".split(","),Xu=function(e,t,i){var s=(t||Pc).style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Y2[o]+e in s););return o<0?null:(3===o?"ms":o>=0?Y2[o]:"")+e},Aw=function(){typeof window<"u"&&window.document&&(z2=window,Wu=(ya=z2.document).documentElement,Pc=Cw("div")||{style:{}},Cw("div"),dn=Xu(dn),cr=dn+"Origin",Pc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",X2=!!Xu("perspective"),ww=ar.core.reverting,Ew=1)},Dw=function n(e){var o,t=Cw("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Wu.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Wu.removeChild(t),this.style.cssText=s,o},Z2=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},K2=function(e){var t;try{t=e.getBBox()}catch{t=Dw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Dw||(t=Dw.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Z2(e,["x","cx","x1"])||0,y:+Z2(e,["y","cy","y1"])||0,width:0,height:0}},J2=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!K2(e))},Oc=function(e,t){if(t){var r,i=e.style;t in Co&&t!==cr&&(t=dn),i.removeProperty?(("ms"===(r=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty("--"===r?t:t.replace(Sw,"-$1").toLowerCase())):i.removeAttribute(t)}},va=function(e,t,i,r,s,o){var a=new or(e._pt,t,i,0,1,o?W2:j2);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},Q2={deg:1,rad:1,turn:1},Ute={grid:1,flex:1},_a=function n(e,t,i,r){var p,m,g,y,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Pc.style,c=Ste.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),d=100,h="px"===r,f="%"===r;if(r===o||!s||Q2[r]||Q2[o])return s;if("px"!==o&&!h&&(s=n(e,t,i,"px")),y=e.getCTM&&J2(e),(f||"%"===o)&&(Co[t]||~t.indexOf("adius")))return p=y?e.getBBox()[c?"width":"height"]:e[u],Sn(f?s/p*d:s/100*p);if(a[c?"width":"height"]=d+(h?o:r),m=~t.indexOf("adius")||"em"===r&&e.appendChild&&!l?e:e.parentNode,y&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===ya||!m.appendChild)&&(m=ya.body),(g=m._gsap)&&f&&g.width&&c&&g.time===Tr.time&&!g.uncache)return Sn(s/g.width*d);if(!f||"height"!==t&&"width"!==t)(f||"%"===o)&&!Ute[Xs(m,"display")]&&(a.position=Xs(e,"position")),m===e&&(a.position="static"),m.appendChild(Pc),p=Pc[u],m.removeChild(Pc),a.position="absolute";else{var v=e.style[t];e.style[t]=d+r,p=e[u],v?e.style[t]=v:Oc(e,t)}return c&&f&&((g=Tc(m)).time=Tr.time,g.width=m[u]),Sn(h?p*s/d:p&&s?d/p*s:0)},Ao=function(e,t,i,r){var s;return Ew||Aw(),t in qs&&"transform"!==t&&~(t=qs[t]).indexOf(",")&&(t=t.split(",")[0]),Co[t]&&"transform"!==t?(s=ep(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:nv(Xs(e,cr))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=tv[t]&&tv[t](e,t,i)||Xs(e,t)||i2(e,t)||("opacity"===t?1:0)),i&&!~(s+"").trim().indexOf(" ")?_a(e,t,s,i)+i:s},Bte=function(e,t,i,r){if(!i||"none"===i){var s=Xu(t,e,1),o=s&&Xs(e,s,1);o&&o!==i?(t=s,i=o):"borderColor"===t&&(i=Xs(e,"borderTopColor"))}var u,d,h,f,p,m,g,y,v,_,x,a=new or(this._pt,e.style,t,0,1,k2),c=0,l=0;if(a.b=i,a.e=r,i+="","auto"==(r+="")&&(m=e.style[t],e.style[t]=r,r=Xs(e,t)||r,m?e.style[t]=m:Oc(e,t)),C2(u=[i,r]),r=u[1],h=(i=u[0]).match(Bu)||[],(r.match(Bu)||[]).length){for(;d=Bu.exec(r);)g=d[0],v=r.substring(c,d.index),p?p=(p+1)%5:("rgba("===v.substr(-5)||"hsla("===v.substr(-5))&&(p=1),g!==(m=h[l++]||"")&&(f=parseFloat(m)||0,x=m.substr((f+"").length),"="===g.charAt(1)&&(g=Vu(f,g)+x),y=parseFloat(g),_=g.substr((y+"").length),c=Bu.lastIndex-_.length,_||(_=_||br.units[t]||x,c===r.length&&(r+=_,a.e+=_)),x!==_&&(f=_a(e,t,m,_)||0),a._pt={_next:a._pt,p:v||1===l?v:",",s:f,c:y-f,m:p&&p<4||"zIndex"===t?Math.round:0});a.c=c<r.length?r.substring(c,r.length):""}else a.r="display"===t&&"none"===r?W2:j2;return Zk.test(r)&&(a.e=0),this._pt=a,a},eU={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Vte=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(e=i,i=r,r=e),t[0]=eU[i]||i,t[1]=eU[r]||r,t.join(" ")},zte=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,c,l,i=t.t,r=i.style,s=t.u,o=i._gsap;if("all"===s||!0===s)r.cssText="",c=1;else for(l=(s=s.split(",")).length;--l>-1;)Co[a=s[l]]&&(c=1,a="transformOrigin"===a?cr:dn),Oc(i,a);c&&(Oc(i,dn),o&&(o.svg&&i.removeAttribute("transform"),ep(i,1),o.uncache=1,$2(r)))}},tv={clearProps:function(e,t,i,r,s){if("isFromStart"!==s.data){var o=e._pt=new or(e._pt,t,i,0,0,zte);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Qf=[1,0,0,1,0,0],tU={},nU=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},iU=function(e){var t=Xs(e,dn);return nU(t)?Qf:t.substr(7).match(Yk).map(Sn)},Iw=function(e,t){var o,a,c,l,i=e._gsap||Tc(e),r=e.style,s=iU(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?Qf:s:(s===Qf&&!e.offsetParent&&e!==Wu&&!i.svg&&(c=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Wu.appendChild(e)),s=iU(e),c?r.display=c:Oc(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Wu.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Rw=function(e,t,i,r,s,o){var b,E,M,a=e._gsap,c=s||Iw(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=c[0],p=c[1],m=c[2],g=c[3],y=c[4],v=c[5],_=t.split(" "),x=parseFloat(_[0])||0,S=parseFloat(_[1])||0;i?c!==Qf&&(E=f*g-p*m)&&(M=x*(-p/E)+S*(f/E)-(f*v-p*y)/E,x=x*(g/E)+S*(-m/E)+(m*v-g*y)/E,S=M):(x=(b=K2(e)).x+(~_[0].indexOf("%")?x/100*b.width:x),S=b.y+(~(_[1]||_[0]).indexOf("%")?S/100*b.height:S)),r||!1!==r&&a.smooth?(a.xOffset=d+((y=x-l)*f+(v=S-u)*m)-y,a.yOffset=h+(y*p+v*g)-v):a.xOffset=a.yOffset=0,a.xOrigin=x,a.yOrigin=S,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[cr]="0px 0px",o&&(va(o,a,"xOrigin",l,x),va(o,a,"yOrigin",u,S),va(o,a,"xOffset",d,a.xOffset),va(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",x+" "+S)},ep=function(e,t){var i=e._gsap||new R2(e);if("x"in i&&!t&&!i.uncache)return i;var u,d,h,f,p,m,g,y,v,_,x,S,b,E,A,M,w,P,L,O,B,W,k,J,$,de,me,ge,je,at,q,re,r=e.style,s=i.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=Xs(e,cr)||"0";return u=d=h=m=g=y=v=_=x=0,f=p=1,i.svg=!(!e.getCTM||!J2(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(r[dn]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+("none"!==c[dn]?c[dn]:"")),r.scale=r.rotate=r.translate="none"),E=Iw(e,i.svg),i.svg&&(i.uncache?($=e.getBBox(),l=i.xOrigin-$.x+"px "+(i.yOrigin-$.y)+"px",J=""):J=!t&&e.getAttribute("data-svg-origin"),Rw(e,J||l,!!J||i.originIsAbsolute,!1!==i.smooth,E)),S=i.xOrigin||0,b=i.yOrigin||0,E!==Qf&&(P=E[0],L=E[1],O=E[2],B=E[3],u=W=E[4],d=k=E[5],6===E.length?(f=Math.sqrt(P*P+L*L),p=Math.sqrt(B*B+O*O),m=P||L?qu(L,P)*Nc:0,(v=O||B?qu(O,B)*Nc+m:0)&&(p*=Math.abs(Math.cos(v*$u))),i.svg&&(u-=S-(S*P+b*O),d-=b-(S*L+b*B))):(at=E[7],me=E[8],ge=E[9],q=E[11],u=E[12],d=E[13],h=E[14],g=(A=qu(re=E[6],je=E[10]))*Nc,A&&(J=W*(M=Math.cos(-A))+me*(w=Math.sin(-A)),$=k*M+ge*w,de=re*M+je*w,me=W*-w+me*M,ge=k*-w+ge*M,je=re*-w+je*M,q=at*-w+q*M,W=J,k=$,re=de),y=(A=qu(-O,je))*Nc,A&&(M=Math.cos(-A),q=B*(w=Math.sin(-A))+q*M,P=J=P*M-me*w,L=$=L*M-ge*w,O=de=O*M-je*w),m=(A=qu(L,P))*Nc,A&&(J=P*(M=Math.cos(A))+L*(w=Math.sin(A)),$=W*M+k*w,L=L*M-P*w,k=k*M-W*w,P=J,W=$),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,y=180-y),f=Sn(Math.sqrt(P*P+L*L+O*O)),p=Sn(Math.sqrt(k*k+re*re)),A=qu(W,k),v=Math.abs(A)>2e-4?A*Nc:0,x=q?1/(q<0?-q:q):0),i.svg&&(J=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!nU(Xs(e,dn)),J&&e.setAttribute("transform",J))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(f*=-1,v+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=h+o,i.scaleX=Sn(f),i.scaleY=Sn(p),i.rotation=Sn(m)+a,i.rotationX=Sn(g)+a,i.rotationY=Sn(y)+a,i.skewX=v+a,i.skewY=_+a,i.transformPerspective=x+o,(i.zOrigin=parseFloat(l.split(" ")[2])||!t&&i.zOrigin||0)&&(r[cr]=nv(l)),i.xOffset=i.yOffset=0,i.force3D=br.force3D,i.renderTransform=i.svg?Gte:X2?rU:Hte,i.uncache=0,i},nv=function(e){return(e=e.split(" "))[0]+" "+e[1]},Pw=function(e,t,i){var r=bi(t);return Sn(parseFloat(t)+parseFloat(_a(e,"x",i+"px",r)))+r},Hte=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,rU(e,t)},Lc="0deg",tp="0px",Fc=") ",rU=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.z,l=i.rotation,u=i.rotationY,d=i.rotationX,h=i.skewX,f=i.skewY,p=i.scaleX,m=i.scaleY,g=i.transformPerspective,y=i.force3D,v=i.target,_=i.zOrigin,x="",S="auto"===y&&e&&1!==e||!0===y;if(_&&(d!==Lc||u!==Lc)){var M,b=parseFloat(u)*$u,E=Math.sin(b),A=Math.cos(b);b=parseFloat(d)*$u,M=Math.cos(b),o=Pw(v,o,E*M*-_),a=Pw(v,a,-Math.sin(b)*-_),c=Pw(v,c,A*M*-_+_)}g!==tp&&(x+="perspective("+g+Fc),(r||s)&&(x+="translate("+r+"%, "+s+"%) "),(S||o!==tp||a!==tp||c!==tp)&&(x+=c!==tp||S?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+Fc),l!==Lc&&(x+="rotate("+l+Fc),u!==Lc&&(x+="rotateY("+u+Fc),d!==Lc&&(x+="rotateX("+d+Fc),(h!==Lc||f!==Lc)&&(x+="skew("+h+", "+f+Fc),(1!==p||1!==m)&&(x+="scale("+p+", "+m+Fc),v.style[dn]=x||"translate(0, 0)"},Gte=function(e,t){var S,b,E,A,M,i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.rotation,l=i.skewX,u=i.skewY,d=i.scaleX,h=i.scaleY,f=i.target,p=i.xOrigin,m=i.yOrigin,g=i.xOffset,y=i.yOffset,v=i.forceCSS,_=parseFloat(o),x=parseFloat(a);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=$u,l*=$u,S=Math.cos(c)*d,b=Math.sin(c)*d,E=Math.sin(c-l)*-h,A=Math.cos(c-l)*h,l&&(u*=$u,M=Math.tan(l-u),E*=M=Math.sqrt(1+M*M),A*=M,u&&(M=Math.tan(u),S*=M=Math.sqrt(1+M*M),b*=M)),S=Sn(S),b=Sn(b),E=Sn(E),A=Sn(A)):(S=d,A=h,b=E=0),(_&&!~(o+"").indexOf("px")||x&&!~(a+"").indexOf("px"))&&(_=_a(f,"x",o,"px"),x=_a(f,"y",a,"px")),(p||m||g||y)&&(_=Sn(_+p-(p*S+m*E)+g),x=Sn(x+m-(p*b+m*A)+y)),(r||s)&&(M=f.getBBox(),_=Sn(_+r/100*M.width),x=Sn(x+s/100*M.height)),f.setAttribute("transform",M="matrix("+S+","+b+","+E+","+A+","+_+","+x+")"),v&&(f.style[dn]=M)},jte=function(e,t,i,r,s){var d,h,o=360,a=ti(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Nc:1)-r,u=r+l+"deg";return a&&("short"===(d=s.split("_")[1])&&(l%=o)!=l%180&&(l+=l<0?o:-o),"cw"===d&&l<0?l=(l+o*G2)%o-~~(l/o)*o:"ccw"===d&&l>0&&(l=(l-o*G2)%o-~~(l/o)*o)),e._pt=h=new or(e._pt,t,i,r,l,Cte),h.e=u,h.u="deg",e._props.push(i),h},sU=function(e,t){for(var i in t)e[i]=t[i];return e},Wte=function(e,t,i){var a,c,l,u,d,h,p,r=sU({},i._gsap),o=i.style;for(c in r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),o[dn]=t,a=ep(i,1),Oc(i,dn),i.setAttribute("transform",l)):(l=getComputedStyle(i)[dn],o[dn]=t,a=ep(i,1),o[dn]=l),Co)(l=r[c])!==(u=a[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(d=bi(l)!==(p=bi(u))?_a(i,c,l,p):parseFloat(l),h=parseFloat(u),e._pt=new or(e._pt,a,c,d,h-d,Tw),e._pt.u=p||0,e._props.push(c));sU(a,r)};sr("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});tv[e>1?"border"+n:n]=function(a,c,l,u,d){var h,f;if(arguments.length<4)return h=o.map(function(p){return Ao(a,p,l)}),5===(f=h.join(" ")).split(h[0]).length?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(p,m){return f[p]=h[m]=h[m]||h[(m-1)/2|0]}),a.init(c,f,d)}});var oU={name:"css",register:Aw,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var l,u,d,h,f,p,m,g,y,v,_,x,S,b,E,A,o=this._props,a=e.style,c=i.vars.startAt;for(m in Ew||Aw(),this.styles=this.styles||q2(e),A=this.styles.props,this.tween=i,t)if("autoRound"!==m&&(u=t[m],!wr[m]||!P2(m,t,i,r,e,s)))if(p=tv[m],"function"==(f=typeof u)&&(f=typeof(u=u.call(i,r,e,s))),"string"===f&&~u.indexOf("random(")&&(u=qf(u)),p)p(this,e,m,u,i)&&(E=1);else if("--"===m.substr(0,2))l=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",ma.lastIndex=0,ma.test(l)||(g=bi(l),y=bi(u)),y?g!==y&&(l=_a(e,m,l,y)+y):g&&(u+=g),this.add(a,"setProperty",l,u,r,s,0,0,m),o.push(m),A.push(m,0,a[m]);else if("undefined"!==f){if(c&&m in c?(l="function"==typeof c[m]?c[m].call(i,r,e,s):c[m],ti(l)&&~l.indexOf("random(")&&(l=qf(l)),bi(l+"")||"auto"===l||(l+=br.units[m]||bi(Ao(e,m))||""),"="===(l+"").charAt(1)&&(l=Ao(e,m))):l=Ao(e,m),h=parseFloat(l),(v="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),m in qs&&("autoAlpha"===m&&(1===h&&"hidden"===Ao(e,"visibility")&&d&&(h=0),A.push("visibility",0,a.visibility),va(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==m&&"transform"!==m&&~(m=qs[m]).indexOf(",")&&(m=m.split(",")[0])),_=m in Co)if(this.styles.save(m),x||((S=e._gsap).renderTransform&&!t.parseTransform||ep(e,t.parseTransform),b=!1!==t.smoothOrigin&&S.smooth,(x=this._pt=new or(this._pt,a,dn,0,1,S.renderTransform,S,0,-1)).dep=1),"scale"===m)this._pt=new or(this._pt,S,"scaleY",S.scaleY,(v?Vu(S.scaleY,v+d):d)-S.scaleY||0,Tw),this._pt.u=0,o.push("scaleY",m),m+="X";else{if("transformOrigin"===m){A.push(cr,0,a[cr]),u=Vte(u),S.svg?Rw(e,u,0,b,0,this):((y=parseFloat(u.split(" ")[2])||0)!==S.zOrigin&&va(this,S,"zOrigin",S.zOrigin,y),va(this,a,m,nv(l),nv(u)));continue}if("svgOrigin"===m){Rw(e,u,1,b,0,this);continue}if(m in tU){jte(this,S,m,h,v?Vu(h,v+u):u);continue}if("smoothOrigin"===m){va(this,S,"smooth",S.smooth,u);continue}if("force3D"===m){S[m]=u;continue}if("transform"===m){Wte(this,u,e);continue}}else m in a||(m=Xu(m)||m);if(_||(d||0===d)&&(h||0===h)&&!Tte.test(u)&&m in a)d||(d=0),(g=(l+"").substr((h+"").length))!==(y=bi(u)||(m in br.units?br.units[m]:g))&&(h=_a(e,m,l,y)),this._pt=new or(this._pt,_?S:a,m,h,(v?Vu(h,v+d):d)-h,_||"px"!==y&&"zIndex"!==m||!1===t.autoRound?Tw:Dte),this._pt.u=y||0,g!==y&&"%"!==y&&(this._pt.b=l,this._pt.r=Ate);else if(m in a)Bte.call(this,e,m,l,v?v+u:u);else if(m in e)this.add(e,m,l||e[m],v?v+u:u,r,s);else if("parseTransform"!==m){ew(m,u);continue}_||(m in a?A.push(m,0,a[m]):A.push(m,1,l||e[m])),o.push(m)}E&&U2(this)},render:function(e,t){if(t.tween._time||!ww())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ao,aliases:qs,getSetter:function(e,t,i){var r=qs[t];return r&&r.indexOf(",")<0&&(t=r),t in Co&&t!==cr&&(e._gsap.x||Ao(e,"x"))?i&&H2===i?"scale"===t?Nte:Pte:(H2=i||{})&&("scale"===t?Ote:Lte):e.style&&!XE(e.style[t])?Ite:~t.indexOf("-")?Rte:vw(e,t)},core:{_removeProperty:Oc,_getMatrix:Iw}};ar.utils.checkPrefix=Xu,ar.core.getStyleSaver=q2,function(n,e){var r=sr(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){Co[s]=1});sr(e,function(s){br.units[s]="deg",tU[s]=1}),qs[r[13]]=n+","+e,sr("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");qs[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),sr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){br.units[n]="px"}),ar.registerPlugin(oU);var Yu=ar.registerPlugin(oU)||ar;function aU(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function xa(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){aU(s,i,r,o,a,"next",c)}function a(c){aU(s,i,r,o,a,"throw",c)}o(void 0)})}}const Ow=1,Xte=2,Do=3,Io=0,lr=1,Ys=2,kc=100,Zte=101,Kte=102,ene=200,tne=201,nne=202,ine=203,Lw=204,Fw=205,rne=206,sne=207,one=208,ane=209,cne=210,lne=211,une=212,dne=213,hne=214,rv=0,xne=1,Mne=2,ba=0,bne=1,Ene=2,hU=3,wne=4,Sne=5,Tne=6,Cne=7,fU="attached",Ea=301,Uc=302,np=306,Bc=1e3,$r=1001,ip=1002,Yn=1003,Uw=1004,Qu=1005,Tn=1006,rp=1007,_s=1008,Ro=1009,pU=1010,mU=1011,sp=1012,Bw=1013,wa=1014,Cr=1015,op=1016,Vw=1017,zw=1018,ed=1020,gU=35902,yU=1021,vU=1022,ur=1023,_U=1024,xU=1025,td=1026,nd=1027,Hw=1028,av=1029,MU=1030,Gw=1031,jw=1033,cv=33776,lv=33777,uv=33778,dv=33779,Ww=35840,$w=35841,qw=35842,Xw=35843,Yw=36196,Zw=37492,Kw=37496,Jw=37808,Qw=37809,eS=37810,tS=37811,nS=37812,iS=37813,rS=37814,sS=37815,oS=37816,aS=37817,cS=37818,lS=37819,uS=37820,dS=37821,hv=36492,hS=36494,fS=36495,bU=36283,pS=36284,mS=36285,gS=36286,ap=2300,cp=2301,id=2400,rd=2401,Fn="srgb",hi="srgb-linear",xS="display-p3",pv="display-p3-linear",mv="linear",nn="srgb",gv="rec709",yv="p3",sd=7680,Lne=512,Fne=513,kne=514,CU=515,Une=516,Bne=517,Vne=518,zne=519,AU="300 es",Po=2e3;class No{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ei=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const zc=Math.PI/180,od=180/Math.PI;function Ar(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Ei[255&n]+Ei[n>>8&255]+Ei[n>>16&255]+Ei[n>>24&255]+"-"+Ei[255&e]+Ei[e>>8&255]+"-"+Ei[e>>16&15|64]+Ei[e>>24&255]+"-"+Ei[63&t|128]+Ei[t>>8&255]+"-"+Ei[t>>16&255]+Ei[t>>24&255]+Ei[255&i]+Ei[i>>8&255]+Ei[i>>16&255]+Ei[i>>24&255]).toLowerCase()}function gn(n,e,t){return Math.max(e,Math.min(t,n))}function MS(n,e){return(n%e+e)%e}function lp(n,e,t){return(1-t)*n+t*e}function Gi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ct(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const IU_DEG2RAD=zc,IU_radToDeg=function Qne(n){return n*od};class Z{constructor(e=0,t=0){Z.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ut{constructor(e,t,i,r,s,o,a,c,l){ut.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],m=r[0],g=r[3],y=r[6],v=r[1],_=r[4],x=r[7],S=r[2],b=r[5],E=r[8];return s[0]=o*m+a*v+c*S,s[3]=o*g+a*_+c*b,s[6]=o*y+a*x+c*E,s[1]=l*m+u*v+d*S,s[4]=l*g+u*_+d*b,s[7]=l*y+u*x+d*E,s[2]=h*m+f*v+p*S,s[5]=h*g+f*_+p*b,s[8]=h*y+f*x+p*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,f=l*s-o*c,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*l-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(u*t-r*c)*m,e[5]=(r*s-a*t)*m,e[6]=f*m,e[7]=(i*c-l*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(bS.makeScale(e,t)),this}rotate(e){return this.premultiply(bS.makeRotation(-e)),this}translate(e,t){return this.premultiply(bS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const bS=new ut;function RU(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function up(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function sie(){const n=up("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const PU={};function cd(n){n in PU||(PU[n]=!0,console.warn(n))}const NU=(new ut).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),OU=(new ut).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),dp={[hi]:{transfer:mv,primaries:gv,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Fn]:{transfer:nn,primaries:gv,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[pv]:{transfer:mv,primaries:yv,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(OU),fromReference:n=>n.applyMatrix3(NU)},[xS]:{transfer:nn,primaries:yv,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(OU),fromReference:n=>n.applyMatrix3(NU).convertLinearToSRGB()}},aie=new Set([hi,pv]),St={enabled:!0,_workingColorSpace:hi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!aie.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,dp[t].fromReference)((0,dp[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return dp[n].primaries},getTransfer:function(n){return""===n?mv:dp[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(dp[e].luminanceCoefficients)}};function ld(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function ES(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let ud;class cie{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ud&&(ud=up("canvas")),ud.width=e.width,ud.height=e.height;const i=ud.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=ud}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=up("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*ld(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*ld(t[i]/255)):ld(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let lie=0;class dd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lie++}),this.uuid=Ar(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(wS(r[o].isDataTexture?r[o].image:r[o]))}else s=wS(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function wS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?cie.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uie=0,wi=(()=>{class n extends No{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=$r,s=$r,o=Tn,a=_s,c=ur,l=Ro,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uie++}),this.uuid=Ar(),this.name="",this.source=new dd(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Z(0,0),this.repeat=new Z(1,1),this.center=new Z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ut,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Bc:t.x=t.x-Math.floor(t.x);break;case $r:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Bc:t.y=t.y-Math.floor(t.y);break;case $r:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class Bt{constructor(e=0,t=0,i=0,r=1){Bt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],p=c[9],m=c[2],g=c[6],y=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+g)<.1&&Math.abs(l+f+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(l+1)/2,x=(f+1)/2,S=(y+1)/2,b=(u+h)/4,E=(d+m)/4,A=(p+g)/4;return _>x&&_>S?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=b/i,s=E/i):x>S?x<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(x),i=b/r,s=A/r):S<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),i=E/s,r=A/s),this.set(i,r,s,t),this}let v=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(g-p)/v,this.y=(d-m)/v,this.z=(h-u)/v,this.w=Math.acos((l+f+y-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class die extends No{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Bt(0,0,e,t),this.scissorTest=!1,this.viewport=new Bt(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Tn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new wi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new dd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Zs extends die{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class SS extends wi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Yn,this.minFilter=Yn,this.wrapR=$r,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class LU extends wi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Yn,this.minFilter=Yn,this.wrapR=$r,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ii{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=m);if(d!==m||c!==h||l!==f||u!==p){let g=1-a;const y=c*h+l*f+u*p+d*m,v=y>=0?1:-1,_=1-y*y;if(_>Number.EPSILON){const S=Math.sqrt(_),b=Math.atan2(S,y*v);g=Math.sin(g*b)/S,a=Math.sin(a*b)/S}const x=a*v;if(c=c*g+h*x,l=l*g+f*x,u=u*g+p*x,d=d*g+m*x,g===1-a){const S=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=S,l*=S,u*=S,d*=S}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+c*f-l*h,e[t+1]=c*p+u*h+l*d-a*f,e[t+2]=l*p+u*f+a*h-c*d,e[t+3]=u*p-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),h=c(i/2),f=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"YZX":this._x=h*u*d+l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d-h*f*p;break;case"XZY":this._x=h*u*d-l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+l)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-l)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(c+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class I{constructor(e=0,t=0,i=0){I.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(FU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+c*l+o*d-a*u,this.y=i+c*u+a*l-s*d,this.z=r+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return TS.copy(this).projectOnVector(e),this.sub(TS)}reflect(e){return this.sub(TS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const TS=new I,FU=new ii;class ji{constructor(e=new I(1/0,1/0,1/0),t=new I(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(xs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(xs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=xs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,xs):xs.fromBufferAttribute(s,o),xs.applyMatrix4(e.matrixWorld),this.expandByPoint(xs);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),xv.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),xv.copy(i.boundingBox)),xv.applyMatrix4(e.matrixWorld),this.union(xv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,xs),xs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hp),Mv.subVectors(this.max,hp),hd.subVectors(e.a,hp),fd.subVectors(e.b,hp),pd.subVectors(e.c,hp),Ta.subVectors(fd,hd),Ca.subVectors(pd,fd),Hc.subVectors(hd,pd);let t=[0,-Ta.z,Ta.y,0,-Ca.z,Ca.y,0,-Hc.z,Hc.y,Ta.z,0,-Ta.x,Ca.z,0,-Ca.x,Hc.z,0,-Hc.x,-Ta.y,Ta.x,0,-Ca.y,Ca.x,0,-Hc.y,Hc.x,0];return!(!CS(t,hd,fd,pd,Mv)||(t=[1,0,0,0,1,0,0,0,1],!CS(t,hd,fd,pd,Mv)))&&(bv.crossVectors(Ta,Ca),t=[bv.x,bv.y,bv.z],CS(t,hd,fd,pd,Mv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(xs).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Oo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Oo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Oo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Oo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Oo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Oo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Oo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Oo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Oo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Oo=[new I,new I,new I,new I,new I,new I,new I,new I],xs=new I,xv=new ji,hd=new I,fd=new I,pd=new I,Ta=new I,Ca=new I,Hc=new I,hp=new I,Mv=new I,bv=new I,Gc=new I;function CS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Gc.fromArray(n,s);const a=r.x*Math.abs(Gc.x)+r.y*Math.abs(Gc.y)+r.z*Math.abs(Gc.z),c=e.dot(Gc),l=t.dot(Gc),u=i.dot(Gc);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const hie=new ji,fp=new I,AS=new I;class Si{constructor(e=new I,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):hie.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fp.subVectors(e,this.center);const t=fp.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(fp,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(AS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fp.copy(e.center).add(AS)),this.expandByPoint(fp.copy(e.center).sub(AS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Lo=new I,DS=new I,Ev=new I,Aa=new I,IS=new I,wv=new I,RS=new I;class md{constructor(e=new I,t=new I(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Lo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Lo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Lo.copy(this.origin).addScaledVector(this.direction,t),Lo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){DS.copy(e).add(t).multiplyScalar(.5),Ev.copy(t).sub(e).normalize(),Aa.copy(this.origin).sub(DS);const s=.5*e.distanceTo(t),o=-this.direction.dot(Ev),a=Aa.dot(this.direction),c=-Aa.dot(Ev),l=Aa.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*c-a,h=o*a-c,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l):h<=p?(d=0,h=Math.min(Math.max(-s,-c),s),f=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(DS).addScaledVector(Ev,h),f}intersectSphere(e,t){Lo.subVectors(e.center,this.origin);const i=Lo.dot(this.direction),r=Lo.dot(Lo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Lo)}intersectTriangle(e,t,i,r,s){IS.subVectors(t,e),wv.subVectors(i,e),RS.crossVectors(IS,wv);let a,o=this.direction.dot(RS);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Aa.subVectors(this.origin,e);const c=a*this.direction.dot(wv.crossVectors(Aa,wv));if(c<0)return null;const l=a*this.direction.dot(IS.cross(Aa));if(l<0||c+l>o)return null;const u=-a*Aa.dot(RS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ze{constructor(e,t,i,r,s,o,a,c,l,u,d,h,f,p,m,g){ze.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,m,g)}set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,m,g){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=c,y[2]=l,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=p,y[11]=m,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ze).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/gd.setFromMatrixColumn(e,0).length(),s=1/gd.setFromMatrixColumn(e,1).length(),o=1/gd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=f+p*l,t[5]=h-m*l,t[9]=-a*c,t[2]=m-h*l,t[6]=p+f*l,t[10]=o*c}else if("YXZ"===e.order){const h=c*u,f=c*d,p=l*u,m=l*d;t[0]=h+m*a,t[4]=p*a-f,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=m+h*a,t[10]=o*c}else if("ZXY"===e.order){const h=c*u,f=c*d,p=l*u,m=l*d;t[0]=h-m*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=c*u,t[4]=p*l-f,t[8]=h*l+m,t[1]=c*d,t[5]=m*l+h,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const h=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=m-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*d+p,t[10]=h-m*d}else if("XZY"===e.order){const h=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+m,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fie,e,pie)}lookAt(e,t,i){const r=this.elements;return Dr.subVectors(e,t),0===Dr.lengthSq()&&(Dr.z=1),Dr.normalize(),Da.crossVectors(i,Dr),0===Da.lengthSq()&&(1===Math.abs(i.z)?Dr.x+=1e-4:Dr.z+=1e-4,Dr.normalize(),Da.crossVectors(i,Dr)),Da.normalize(),Sv.crossVectors(Dr,Da),r[0]=Da.x,r[4]=Sv.x,r[8]=Dr.x,r[1]=Da.y,r[5]=Sv.y,r[9]=Dr.y,r[2]=Da.z,r[6]=Sv.z,r[10]=Dr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],m=i[6],g=i[10],y=i[14],v=i[3],_=i[7],x=i[11],S=i[15],b=r[0],E=r[4],A=r[8],M=r[12],w=r[1],P=r[5],L=r[9],O=r[13],B=r[2],W=r[6],k=r[10],J=r[14],$=r[3],de=r[7],me=r[11],ge=r[15];return s[0]=o*b+a*w+c*B+l*$,s[4]=o*E+a*P+c*W+l*de,s[8]=o*A+a*L+c*k+l*me,s[12]=o*M+a*O+c*J+l*ge,s[1]=u*b+d*w+h*B+f*$,s[5]=u*E+d*P+h*W+f*de,s[9]=u*A+d*L+h*k+f*me,s[13]=u*M+d*O+h*J+f*ge,s[2]=p*b+m*w+g*B+y*$,s[6]=p*E+m*P+g*W+y*de,s[10]=p*A+m*L+g*k+y*me,s[14]=p*M+m*O+g*J+y*ge,s[3]=v*b+_*w+x*B+S*$,s[7]=v*E+_*P+x*W+S*de,s[11]=v*A+_*L+x*k+S*me,s[15]=v*M+_*O+x*J+S*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*c*d-r*l*d-s*a*h+i*l*h+r*a*f-i*c*f)+e[7]*(+t*c*f-t*l*h+s*o*h-r*o*f+r*l*u-s*c*u)+e[11]*(+t*l*d-t*a*f-s*o*d+i*o*f+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*d+t*a*h+r*o*d-i*o*h+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=d*g*l-m*h*l+m*c*f-a*g*f-d*c*y+a*h*y,_=p*h*l-u*g*l-p*c*f+o*g*f+u*c*y-o*h*y,x=u*m*l-p*d*l+p*a*f-o*m*f-u*a*y+o*d*y,S=p*d*c-u*m*c-p*a*h+o*m*h+u*a*g-o*d*g,b=t*v+i*_+r*x+s*S;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/b;return e[0]=v*E,e[1]=(m*h*s-d*g*s-m*r*f+i*g*f+d*r*y-i*h*y)*E,e[2]=(a*g*s-m*c*s+m*r*l-i*g*l-a*r*y+i*c*y)*E,e[3]=(d*c*s-a*h*s-d*r*l+i*h*l+a*r*f-i*c*f)*E,e[4]=_*E,e[5]=(u*g*s-p*h*s+p*r*f-t*g*f-u*r*y+t*h*y)*E,e[6]=(p*c*s-o*g*s-p*r*l+t*g*l+o*r*y-t*c*y)*E,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*f+t*c*f)*E,e[8]=x*E,e[9]=(p*d*s-u*m*s-p*i*f+t*m*f+u*i*y-t*d*y)*E,e[10]=(o*m*s-p*a*s+p*i*l-t*m*l-o*i*y+t*a*y)*E,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*f-t*a*f)*E,e[12]=S*E,e[13]=(u*m*r-p*d*r+p*i*h-t*m*h-u*i*g+t*d*g)*E,e[14]=(p*a*r-o*m*r-p*i*c+t*m*c+o*i*g-t*a*g)*E,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*h+t*a*h)*E,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,f=s*u,p=s*d,m=o*u,g=o*d,y=a*d,v=c*l,_=c*u,x=c*d,S=i.x,b=i.y,E=i.z;return r[0]=(1-(m+y))*S,r[1]=(f+x)*S,r[2]=(p-_)*S,r[3]=0,r[4]=(f-x)*b,r[5]=(1-(h+y))*b,r[6]=(g+v)*b,r[7]=0,r[8]=(p+_)*E,r[9]=(g-v)*E,r[10]=(1-(h+m))*E,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=gd.set(r[0],r[1],r[2]).length();const o=gd.set(r[4],r[5],r[6]).length(),a=gd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ms.copy(this);const l=1/s,u=1/o,d=1/a;return Ms.elements[0]*=l,Ms.elements[1]*=l,Ms.elements[2]*=l,Ms.elements[4]*=u,Ms.elements[5]*=u,Ms.elements[6]*=u,Ms.elements[8]*=d,Ms.elements[9]*=d,Ms.elements[10]*=d,t.setFromRotationMatrix(Ms),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Po){const c=this.elements,l=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r);let f,p;if(a===Po)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-s),p=-o*s/(o-s)}return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Po){const c=this.elements,l=1/(t-e),u=1/(i-r),d=1/(o-s),h=(t+e)*l,f=(i+r)*u;let p,m;if(a===Po)p=(o+s)*d,m=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,m=-1*d}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=m,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const gd=new I,Ms=new ze,fie=new I(0,0,0),pie=new I(1,1,1),Da=new I,Sv=new I,Dr=new I,kU=new ze,UU=new ii;let Fo=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(gn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-gn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(gn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-gn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return kU.makeRotationFromQuaternion(t),this.setFromRotationMatrix(kU,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return UU.setFromEuler(this),this.setFromQuaternion(UU,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class PS{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let mie=0;const BU=new I,yd=new ii,ko=new ze,Tv=new I,pp=new I,gie=new I,yie=new ii,VU=new I(1,0,0),zU=new I(0,1,0),HU=new I(0,0,1),GU={type:"added"},vie={type:"removed"},vd={type:"childadded",child:null},NS={type:"childremoved",child:null};let Vt=(()=>{class n extends No{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mie++}),this.uuid=Ar(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new I,i=new Fo,r=new ii,s=new I(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ze},normalMatrix:{value:new ut}}),this.matrix=new ze,this.matrixWorld=new ze,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new PS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return yd.setFromAxisAngle(t,i),this.quaternion.multiply(yd),this}rotateOnWorldAxis(t,i){return yd.setFromAxisAngle(t,i),this.quaternion.premultiply(yd),this}rotateX(t){return this.rotateOnAxis(VU,t)}rotateY(t){return this.rotateOnAxis(zU,t)}rotateZ(t){return this.rotateOnAxis(HU,t)}translateOnAxis(t,i){return BU.copy(t).applyQuaternion(this.quaternion),this.position.add(BU.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(VU,t)}translateY(t){return this.translateOnAxis(zU,t)}translateZ(t){return this.translateOnAxis(HU,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ko.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Tv.copy(t):Tv.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),pp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ko.lookAt(pp,Tv,this.up):ko.lookAt(Tv,pp,this.up),this.quaternion.setFromRotationMatrix(ko),s&&(ko.extractRotation(s.matrixWorld),yd.setFromRotationMatrix(ko),this.quaternion.premultiply(yd.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(GU),vd.child=t,this.dispatchEvent(vd),vd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(vie),NS.child=t,this.dispatchEvent(NS),NS.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ko.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ko.multiply(t.parent.matrixWorld)),t.applyMatrix4(ko),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(GU),vd.child=t,this.dispatchEvent(vd),vd.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,t,gie),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,yie,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),m=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=s,r;function a(c){const l=[];for(const u in c){const d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new I(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const bs=new I,Uo=new I,OS=new I,Bo=new I,_d=new I,xd=new I,jU=new I,LS=new I,FS=new I,kS=new I;class qr{constructor(e=new I,t=new I,i=new I){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),bs.subVectors(e,t),r.cross(bs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){bs.subVectors(r,t),Uo.subVectors(i,t),OS.subVectors(e,t);const o=bs.dot(bs),a=bs.dot(Uo),c=bs.dot(OS),l=Uo.dot(Uo),u=Uo.dot(OS),d=o*l-a*a;if(0===d)return s.set(0,0,0),null;const h=1/d,f=(l*c-a*u)*h,p=(o*u-a*c)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,Bo)&&Bo.x>=0&&Bo.y>=0&&Bo.x+Bo.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return null===this.getBarycoord(e,t,i,r,Bo)?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Bo.x),c.addScaledVector(o,Bo.y),c.addScaledVector(a,Bo.z),c)}static isFrontFacing(e,t,i,r){return bs.subVectors(i,t),Uo.subVectors(e,t),bs.cross(Uo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return bs.subVectors(this.c,this.b),Uo.subVectors(this.a,this.b),.5*bs.cross(Uo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return qr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return qr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return qr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;_d.subVectors(r,i),xd.subVectors(s,i),LS.subVectors(e,i);const c=_d.dot(LS),l=xd.dot(LS);if(c<=0&&l<=0)return t.copy(i);FS.subVectors(e,r);const u=_d.dot(FS),d=xd.dot(FS);if(u>=0&&d<=u)return t.copy(r);const h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(_d,o);kS.subVectors(e,s);const f=_d.dot(kS),p=xd.dot(kS);if(p>=0&&f<=p)return t.copy(s);const m=f*l-c*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(xd,a);const g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return jU.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(jU,a);const y=1/(g+m+h);return o=m*y,a=h*y,t.copy(i).addScaledVector(_d,o).addScaledVector(xd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const WU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ia={h:0,s:0,l:0},Cv={h:0,s:0,l:0};function US(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class fe{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Fn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,St.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=St.workingColorSpace){return this.r=e,this.g=t,this.b=i,St.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=St.workingColorSpace){if(e=MS(e,1),t=gn(t,0,1),i=gn(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=US(o,s,e+1/3),this.g=US(o,s,e),this.b=US(o,s,e-1/3)}return St.toWorkingColorSpace(this,r),this}setStyle(e,t=Fn){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Fn){const i=WU[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ld(e.r),this.g=ld(e.g),this.b=ld(e.b),this}copyLinearToSRGB(e){return this.r=ES(e.r),this.g=ES(e.g),this.b=ES(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fn){return St.fromWorkingColorSpace(Ti.copy(this),e),65536*Math.round(gn(255*Ti.r,0,255))+256*Math.round(gn(255*Ti.g,0,255))+Math.round(gn(255*Ti.b,0,255))}getHexString(e=Fn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=St.workingColorSpace){St.fromWorkingColorSpace(Ti.copy(this),t);const i=Ti.r,r=Ti.g,s=Ti.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=St.workingColorSpace){return St.fromWorkingColorSpace(Ti.copy(this),t),e.r=Ti.r,e.g=Ti.g,e.b=Ti.b,e}getStyle(e=Fn){St.fromWorkingColorSpace(Ti.copy(this),e);const t=Ti.r,i=Ti.g,r=Ti.b;return e!==Fn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(Ia),this.setHSL(Ia.h+e,Ia.s+t,Ia.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ia),e.getHSL(Cv);const i=lp(Ia.h,Cv.h,t),r=lp(Ia.s,Cv.s,t),s=lp(Ia.l,Cv.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ti=new fe;fe.NAMES=WU;let _ie=0;class ri extends No{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_ie++}),this.uuid=Ar(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new fe(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=sd,this.stencilZFail=sd,this.stencilZPass=sd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==sd&&(i.stencilFail=this.stencilFail),this.stencilZFail!==sd&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==sd&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class si extends ri{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fo,this.combine=rv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kn=new I,Av=new Z;class Pt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Cr,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return cd("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Av.fromBufferAttribute(this,t),Av.applyMatrix3(e),this.setXY(t,Av.x,Av.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix3(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix4(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyNormalMatrix(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.transformDirection(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Gi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ct(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Gi(t,this.array)),t}setX(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Gi(t,this.array)),t}setY(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Gi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Gi(t,this.array)),t}setW(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array),s=ct(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class $U extends Pt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class qU extends Pt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Ie extends Pt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Mie=0;const Xr=new ze,BS=new Vt,Md=new I,Ir=new ji,gp=new ji,oi=new I;class ft extends No{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mie++}),this.uuid=Ar(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(RU(e)?qU:$U)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new ut).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xr.makeRotationFromQuaternion(e),this.applyMatrix4(Xr),this}rotateX(e){return Xr.makeRotationX(e),this.applyMatrix4(Xr),this}rotateY(e){return Xr.makeRotationY(e),this.applyMatrix4(Xr),this}rotateZ(e){return Xr.makeRotationZ(e),this.applyMatrix4(Xr),this}translate(e,t,i){return Xr.makeTranslation(e,t,i),this.applyMatrix4(Xr),this}scale(e,t,i){return Xr.makeScale(e,t,i),this.applyMatrix4(Xr),this}lookAt(e){return BS.lookAt(e),BS.updateMatrix(),this.applyMatrix4(BS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Md).negate(),this.translate(Md.x,Md.y,Md.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ie(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ji);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new I(-1/0,-1/0,-1/0),new I(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Ir.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(oi.addVectors(this.boundingBox.min,Ir.min),this.boundingBox.expandByPoint(oi),oi.addVectors(this.boundingBox.max,Ir.max),this.boundingBox.expandByPoint(oi)):(this.boundingBox.expandByPoint(Ir.min),this.boundingBox.expandByPoint(Ir.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Si);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new I,1/0);if(e){const i=this.boundingSphere.center;if(Ir.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)gp.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(oi.addVectors(Ir.min,gp.min),Ir.expandByPoint(oi),oi.addVectors(Ir.max,gp.max),Ir.expandByPoint(oi)):(Ir.expandByPoint(gp.min),Ir.expandByPoint(gp.max));Ir.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)oi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(oi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)oi.fromBufferAttribute(a,l),c&&(Md.fromBufferAttribute(e,l),oi.add(Md)),r=Math.max(r,i.distanceToSquared(oi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Pt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let A=0;A<i.count;A++)a[A]=new I,c[A]=new I;const l=new I,u=new I,d=new I,h=new Z,f=new Z,p=new Z,m=new I,g=new I;function y(A,M,w){l.fromBufferAttribute(i,A),u.fromBufferAttribute(i,M),d.fromBufferAttribute(i,w),h.fromBufferAttribute(s,A),f.fromBufferAttribute(s,M),p.fromBufferAttribute(s,w),u.sub(l),d.sub(l),f.sub(h),p.sub(h);const P=1/(f.x*p.y-p.x*f.y);isFinite(P)&&(m.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(P),g.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(P),a[A].add(m),a[M].add(m),a[w].add(m),c[A].add(g),c[M].add(g),c[w].add(g))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let A=0,M=v.length;A<M;++A){const w=v[A],P=w.start;for(let O=P,B=P+w.count;O<B;O+=3)y(e.getX(O+0),e.getX(O+1),e.getX(O+2))}const _=new I,x=new I,S=new I,b=new I;function E(A){S.fromBufferAttribute(r,A),b.copy(S);const M=a[A];_.copy(M),_.sub(S.multiplyScalar(S.dot(M))).normalize(),x.crossVectors(b,M);const P=x.dot(c[A])<0?-1:1;o.setXYZW(A,_.x,_.y,_.z,P)}for(let A=0,M=v.length;A<M;++A){const w=v[A],P=w.start;for(let O=P,B=P+w.count;O<B;O+=3)E(e.getX(O+0)),E(e.getX(O+1)),E(e.getX(O+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Pt(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new I,s=new I,o=new I,a=new I,c=new I,l=new I,u=new I,d=new I;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,c.x,c.y,c.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)oi.fromBufferAttribute(e,t),oi.normalize(),e.setXYZ(t,oi.x,oi.y,oi.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u);let f=0,p=0;for(let m=0,g=c.length;m<g;m++){f=a.isInterleavedBufferAttribute?c[m]*a.data.stride+a.offset:c[m]*u;for(let y=0;y<u;y++)h[p++]=l[f++]}return new Pt(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ft,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){const f=e(l[u],i);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++)u.push(l[d].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],d=s[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const XU=new ze,jc=new md,Dv=new Si,YU=new I,bd=new I,Ed=new I,wd=new I,VS=new I,Iv=new I,Rv=new Z,Pv=new Z,Nv=new Z,ZU=new I,KU=new I,JU=new I,Ov=new I,Lv=new I;class Ht extends Vt{constructor(e=new ft,t=new si){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){Iv.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c];0!==u&&(VS.fromBufferAttribute(s[c],e),Iv.addScaledVector(o?VS:VS.sub(t),u))}t.add(Iv)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),Dv.copy(i.boundingSphere),Dv.applyMatrix4(s),jc.copy(e.ray).recast(e.near),(!1!==Dv.containsPoint(jc.origin)||!(null===jc.intersectSphere(Dv,YU)||jc.origin.distanceToSquared(YU)>(e.far-e.near)**2))&&(XU.copy(s).invert(),jc.copy(e.ray).applyMatrix4(XU),(null===i.boundingBox||!1!==jc.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,jc)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,m=h.length;p<m;p++){const g=h[p],y=o[g.materialIndex];for(let x=Math.max(g.start,f.start),S=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));x<S;x+=3)r=Fv(this,y,e,i,l,u,d,a.getX(x),a.getX(x+1),a.getX(x+2)),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=g.materialIndex,t.push(r))}else for(let g=Math.max(0,f.start),y=Math.min(a.count,f.start+f.count);g<y;g+=3)r=Fv(this,o,e,i,l,u,d,a.getX(g),a.getX(g+1),a.getX(g+2)),r&&(r.faceIndex=Math.floor(g/3),t.push(r));else if(void 0!==c)if(Array.isArray(o))for(let p=0,m=h.length;p<m;p++){const g=h[p],y=o[g.materialIndex];for(let x=Math.max(g.start,f.start),S=Math.min(c.count,Math.min(g.start+g.count,f.start+f.count));x<S;x+=3)r=Fv(this,y,e,i,l,u,d,x,x+1,x+2),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=g.materialIndex,t.push(r))}else for(let g=Math.max(0,f.start),y=Math.min(c.count,f.start+f.count);g<y;g+=3)r=Fv(this,o,e,i,l,u,d,g,g+1,g+2),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}function Fv(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,bd),n.getVertexPosition(c,Ed),n.getVertexPosition(l,wd);const u=function bie(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===c)return null;Lv.copy(a),Lv.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(Lv);return l<t.near||l>t.far?null:{distance:l,point:Lv.clone(),object:n}}(n,e,t,i,bd,Ed,wd,Ov);if(u){r&&(Rv.fromBufferAttribute(r,a),Pv.fromBufferAttribute(r,c),Nv.fromBufferAttribute(r,l),u.uv=qr.getInterpolation(Ov,bd,Ed,wd,Rv,Pv,Nv,new Z)),s&&(Rv.fromBufferAttribute(s,a),Pv.fromBufferAttribute(s,c),Nv.fromBufferAttribute(s,l),u.uv1=qr.getInterpolation(Ov,bd,Ed,wd,Rv,Pv,Nv,new Z)),o&&(ZU.fromBufferAttribute(o,a),KU.fromBufferAttribute(o,c),JU.fromBufferAttribute(o,l),u.normal=qr.getInterpolation(Ov,bd,Ed,wd,ZU,KU,JU,new I),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:c,c:l,normal:new I,materialIndex:0};qr.getNormal(bd,Ed,wd,d.normal),u.face=d}return u}class Sd extends ft{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],d=[];let h=0,f=0;function p(m,g,y,v,_,x,S,b,E,A,M){const w=x/E,P=S/A,L=x/2,O=S/2,B=b/2,W=E+1,k=A+1;let J=0,$=0;const de=new I;for(let me=0;me<k;me++){const ge=me*P-O;for(let je=0;je<W;je++)de[m]=(je*w-L)*v,de[g]=ge*_,de[y]=B,l.push(de.x,de.y,de.z),de[m]=0,de[g]=0,de[y]=b>0?1:-1,u.push(de.x,de.y,de.z),d.push(je/E),d.push(1-me/A),J+=1}for(let me=0;me<A;me++)for(let ge=0;ge<E;ge++){const at=h+ge+W*(me+1),q=h+(ge+1)+W*(me+1),re=h+(ge+1)+W*me;c.push(h+ge+W*me,at,re),c.push(at,q,re),$+=6}a.addGroup(f,$,M),f+=$,h+=J}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Ie(l,3)),this.setAttribute("normal",new Ie(u,3)),this.setAttribute("uv",new Ie(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Td(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Wi(n){const e={};for(let t=0;t<n.length;t++){const i=Td(n[t]);for(const r in i)e[r]=i[r]}return e}function QU(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:St.workingColorSpace}const wie={clone:Td,merge:Wi};class Ks extends ri{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Td(e.uniforms),this.uniformsGroups=function Eie(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class zS extends Vt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ze,this.projectionMatrix=new ze,this.projectionMatrixInverse=new ze,this.coordinateSystem=Po}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Ra=new I,eB=new Z,tB=new Z;class ai extends zS{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*od*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*zc*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*od*Math.atan(Math.tan(.5*zc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ra.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ra.x,Ra.y).multiplyScalar(-e/Ra.z),Ra.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ra.x,Ra.y).multiplyScalar(-e/Ra.z)}getViewSize(e,t){return this.getViewBounds(e,eB,tB),t.subVectors(tB,eB)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*zc*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Cie extends Vt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ai(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new ai(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new ai(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new ai(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new ai(-90,1,e,t);c.layers=this.layers,this.add(c);const l=new ai(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(const l of t)this.remove(l);if(e===Po)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class kv extends wi{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:Ea,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Aie extends Zs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new kv([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Tn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Sd(5,5,5),s=new Ks({name:"CubemapFromEquirect",uniforms:Td(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ht(r,s),a=t.minFilter;return t.minFilter===_s&&(t.minFilter=Tn),new Cie(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const HS=new I,Die=new I,Iie=new ut;class Pa{constructor(e=new I(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=HS.subVectors(i,t).cross(Die.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(HS),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Iie.getNormalMatrix(e),r=this.coplanarPoint(HS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Wc=new Si,Uv=new I;class Bv{constructor(e=new Pa,t=new Pa,i=new Pa,r=new Pa,s=new Pa,o=new Pa){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Po){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],c=r[3],l=r[4],u=r[5],d=r[6],h=r[7],f=r[8],p=r[9],m=r[10],g=r[11],y=r[12],v=r[13],_=r[14],x=r[15];if(i[0].setComponents(c-s,h-l,g-f,x-y).normalize(),i[1].setComponents(c+s,h+l,g+f,x+y).normalize(),i[2].setComponents(c+o,h+u,g+p,x+v).normalize(),i[3].setComponents(c-o,h-u,g-p,x-v).normalize(),i[4].setComponents(c-a,h-d,g-m,x-_).normalize(),t===Po)i[5].setComponents(c+a,h+d,g+m,x+_).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,m,_).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Wc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Wc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Wc)}intersectsSprite(e){return Wc.center.set(0,0,0),Wc.radius=.7071067811865476,Wc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Uv.x=r.normal.x>0?e.max.x:e.min.x,Uv.y=r.normal.y>0?e.max.y:e.min.y,Uv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Uv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function nB(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Rie(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))},update:function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);return void((!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const l=e.get(a);if(void 0===l)e.set(a,function t(a,c){const l=a.array,u=a.usage,d=l.byteLength,h=n.createBuffer();let f;if(n.bindBuffer(c,h),n.bufferData(c,l,u),a.onUploadCallback(),l instanceof Float32Array)f=n.FLOAT;else if(l instanceof Uint16Array)f=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else{if(!(l instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);f=n.UNSIGNED_BYTE}return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,c,l){const u=c.array,d=c._updateRange,h=c.updateRanges;if(n.bindBuffer(l,a),-1===d.count&&0===h.length&&n.bufferSubData(l,0,u),0!==h.length){for(let f=0,p=h.length;f<p;f++){const m=h[f];n.bufferSubData(l,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}c.clearUpdateRanges()}-1!==d.count&&(n.bufferSubData(l,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),c.onUploadCallback()})(l.buffer,a,c),l.version=a.version}}}}class zo extends ft{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,f=[],p=[],m=[],g=[];for(let y=0;y<u;y++){const v=y*h-o;for(let _=0;_<l;_++)p.push(_*d-s,-v,0),m.push(0,0,1),g.push(_/a),g.push(1-y/c)}for(let y=0;y<c;y++)for(let v=0;v<a;v++){const x=v+l*(y+1),S=v+1+l*(y+1),b=v+1+l*y;f.push(v+l*y,x,b),f.push(x,S,b)}this.setIndex(f),this.setAttribute("position",new Ie(p,3)),this.setAttribute("normal",new Ie(m,3)),this.setAttribute("uv",new Ie(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zo(e.width,e.height,e.widthSegments,e.heightSegments)}}const pt={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Me={common:{diffuse:{value:new fe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ut},alphaMap:{value:null},alphaMapTransform:{value:new ut},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ut}},envmap:{envMap:{value:null},envMapRotation:{value:new ut},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ut}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ut}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ut},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ut},normalScale:{value:new Z(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ut},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ut}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ut}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ut}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ut},alphaTest:{value:0},uvTransform:{value:new ut}},sprite:{diffuse:{value:new fe(16777215)},opacity:{value:1},center:{value:new Z(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ut},alphaMap:{value:null},alphaMapTransform:{value:new ut},alphaTest:{value:0}}},Js={basic:{uniforms:Wi([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.fog]),vertexShader:pt.meshbasic_vert,fragmentShader:pt.meshbasic_frag},lambert:{uniforms:Wi([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,Me.lights,{emissive:{value:new fe(0)}}]),vertexShader:pt.meshlambert_vert,fragmentShader:pt.meshlambert_frag},phong:{uniforms:Wi([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,Me.lights,{emissive:{value:new fe(0)},specular:{value:new fe(1118481)},shininess:{value:30}}]),vertexShader:pt.meshphong_vert,fragmentShader:pt.meshphong_frag},standard:{uniforms:Wi([Me.common,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.roughnessmap,Me.metalnessmap,Me.fog,Me.lights,{emissive:{value:new fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag},toon:{uniforms:Wi([Me.common,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.gradientmap,Me.fog,Me.lights,{emissive:{value:new fe(0)}}]),vertexShader:pt.meshtoon_vert,fragmentShader:pt.meshtoon_frag},matcap:{uniforms:Wi([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,{matcap:{value:null}}]),vertexShader:pt.meshmatcap_vert,fragmentShader:pt.meshmatcap_frag},points:{uniforms:Wi([Me.points,Me.fog]),vertexShader:pt.points_vert,fragmentShader:pt.points_frag},dashed:{uniforms:Wi([Me.common,Me.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pt.linedashed_vert,fragmentShader:pt.linedashed_frag},depth:{uniforms:Wi([Me.common,Me.displacementmap]),vertexShader:pt.depth_vert,fragmentShader:pt.depth_frag},normal:{uniforms:Wi([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,{opacity:{value:1}}]),vertexShader:pt.meshnormal_vert,fragmentShader:pt.meshnormal_frag},sprite:{uniforms:Wi([Me.sprite,Me.fog]),vertexShader:pt.sprite_vert,fragmentShader:pt.sprite_frag},background:{uniforms:{uvTransform:{value:new ut},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pt.background_vert,fragmentShader:pt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ut}},vertexShader:pt.backgroundCube_vert,fragmentShader:pt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pt.cube_vert,fragmentShader:pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pt.equirect_vert,fragmentShader:pt.equirect_frag},distanceRGBA:{uniforms:Wi([Me.common,Me.displacementmap,{referencePosition:{value:new I},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pt.distanceRGBA_vert,fragmentShader:pt.distanceRGBA_frag},shadow:{uniforms:Wi([Me.lights,Me.fog,{color:{value:new fe(0)},opacity:{value:1}}]),vertexShader:pt.shadow_vert,fragmentShader:pt.shadow_frag}};Js.physical={uniforms:Wi([Js.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ut},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ut},clearcoatNormalScale:{value:new Z(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ut},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ut},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ut},sheen:{value:0},sheenColor:{value:new fe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ut},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ut},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ut},transmissionSamplerSize:{value:new Z},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ut},attenuationDistance:{value:0},attenuationColor:{value:new fe(0)},specularColor:{value:new fe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ut},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ut},anisotropyVector:{value:new Z},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ut}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag};const Vv={r:0,b:0,g:0},$c=new Fo,Rse=new ze;function Pse(n,e,t,i,r,s,o){const a=new fe(0);let l,u,c=!0===s?0:1,d=null,h=0,f=null;function p(v){let _=!0===v.isScene?v.background:null;return _&&_.isTexture&&(_=(v.backgroundBlurriness>0?t:e).get(_)),_}function y(v,_){v.getRGB(Vv,QU(n)),i.buffers.color.setClear(Vv.r,Vv.g,Vv.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(v,_=1){a.set(v),c=_,y(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(v){c=v,y(a,c)},render:function m(v){let _=!1;const x=p(v);null===x?y(a,c):x&&x.isColor&&(y(x,1),_=!0);const S=n.xr.getEnvironmentBlendMode();"additive"===S?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===S&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||_)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function g(v,_){const x=p(_);x&&(x.isCubeTexture||x.mapping===np)?(void 0===u&&(u=new Ht(new Sd(1,1,1),new Ks({name:"BackgroundCubeMaterial",uniforms:Td(Js.backgroundCube.uniforms),vertexShader:Js.backgroundCube.vertexShader,fragmentShader:Js.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,b,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),$c.copy(_.backgroundRotation),$c.x*=-1,$c.y*=-1,$c.z*=-1,x.isCubeTexture&&!1===x.isRenderTargetTexture&&($c.y*=-1,$c.z*=-1),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Rse.makeRotationFromEuler($c)),u.material.toneMapped=St.getTransfer(x.colorSpace)!==nn,(d!==x||h!==x.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=x,h=x.version,f=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(void 0===l&&(l=new Ht(new zo(2,2),new Ks({name:"BackgroundMaterial",uniforms:Td(Js.background.uniforms),vertexShader:Js.background.vertexShader,fragmentShader:Js.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=x,l.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,l.material.toneMapped=St.getTransfer(x.colorSpace)!==nn,!0===x.matrixAutoUpdate&&x.updateMatrix(),l.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||h!==x.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=x,h=x.version,f=n.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null))}}}function Nse(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null);let s=r,o=!1;function l(w){return n.bindVertexArray(w)}function u(w){return n.deleteVertexArray(w)}function h(w){const P=[],L=[],O=[];for(let B=0;B<t;B++)P[B]=0,L[B]=0,O[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:L,attributeDivisors:O,object:w,attributes:{},index:null}}function m(){const w=s.newAttributes;for(let P=0,L=w.length;P<L;P++)w[P]=0}function g(w){y(w,0)}function y(w,P){const O=s.enabledAttributes,B=s.attributeDivisors;s.newAttributes[w]=1,0===O[w]&&(n.enableVertexAttribArray(w),O[w]=1),B[w]!==P&&(n.vertexAttribDivisor(w,P),B[w]=P)}function v(){const w=s.newAttributes,P=s.enabledAttributes;for(let L=0,O=P.length;L<O;L++)P[L]!==w[L]&&(n.disableVertexAttribArray(L),P[L]=0)}function _(w,P,L,O,B,W,k){!0===k?n.vertexAttribIPointer(w,P,L,B,W):n.vertexAttribPointer(w,P,L,O,B,W)}function A(){M(),o=!0,s!==r&&(s=r,l(s.object))}function M(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(w,P,L,O,B){let W=!1;const k=function d(w,P,L){const O=!0===L.wireframe;let B=i[w.id];void 0===B&&(B={},i[w.id]=B);let W=B[P.id];void 0===W&&(W={},B[P.id]=W);let k=W[O];return void 0===k&&(k=h(function c(){return n.createVertexArray()}()),W[O]=k),k}(O,L,P);s!==k&&(s=k,l(s.object)),W=function f(w,P,L,O){const B=s.attributes,W=P.attributes;let k=0;const J=L.getAttributes();for(const $ in J)if(J[$].location>=0){const me=B[$];let ge=W[$];if(void 0===ge&&("instanceMatrix"===$&&w.instanceMatrix&&(ge=w.instanceMatrix),"instanceColor"===$&&w.instanceColor&&(ge=w.instanceColor)),void 0===me||me.attribute!==ge||ge&&me.data!==ge.data)return!0;k++}return s.attributesNum!==k||s.index!==O}(w,O,L,B),W&&function p(w,P,L,O){const B={},W=P.attributes;let k=0;const J=L.getAttributes();for(const $ in J)if(J[$].location>=0){let me=W[$];void 0===me&&("instanceMatrix"===$&&w.instanceMatrix&&(me=w.instanceMatrix),"instanceColor"===$&&w.instanceColor&&(me=w.instanceColor));const ge={};ge.attribute=me,me&&me.data&&(ge.data=me.data),B[$]=ge,k++}s.attributes=B,s.attributesNum=k,s.index=O}(w,O,L,B),null!==B&&e.update(B,n.ELEMENT_ARRAY_BUFFER),(W||o)&&(o=!1,function x(w,P,L,O){m();const B=O.attributes,W=L.getAttributes(),k=P.defaultAttributeValues;for(const J in W){const $=W[J];if($.location>=0){let de=B[J];if(void 0===de&&("instanceMatrix"===J&&w.instanceMatrix&&(de=w.instanceMatrix),"instanceColor"===J&&w.instanceColor&&(de=w.instanceColor)),void 0!==de){const me=de.normalized,ge=de.itemSize,je=e.get(de);if(void 0===je)continue;const at=je.buffer,q=je.type,re=je.bytesPerElement,ve=q===n.INT||q===n.UNSIGNED_INT||de.gpuType===Bw;if(de.isInterleavedBufferAttribute){const ye=de.data,Ve=ye.stride,Je=de.offset;if(ye.isInstancedInterleavedBuffer){for(let Oe=0;Oe<$.locationSize;Oe++)y($.location+Oe,ye.meshPerAttribute);!0!==w.isInstancedMesh&&void 0===O._maxInstanceCount&&(O._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let Oe=0;Oe<$.locationSize;Oe++)g($.location+Oe);n.bindBuffer(n.ARRAY_BUFFER,at);for(let Oe=0;Oe<$.locationSize;Oe++)_($.location+Oe,ge/$.locationSize,q,me,Ve*re,(Je+ge/$.locationSize*Oe)*re,ve)}else{if(de.isInstancedBufferAttribute){for(let ye=0;ye<$.locationSize;ye++)y($.location+ye,de.meshPerAttribute);!0!==w.isInstancedMesh&&void 0===O._maxInstanceCount&&(O._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let ye=0;ye<$.locationSize;ye++)g($.location+ye);n.bindBuffer(n.ARRAY_BUFFER,at);for(let ye=0;ye<$.locationSize;ye++)_($.location+ye,ge/$.locationSize,q,me,ge*re,ge/$.locationSize*ye*re,ve)}}else if(void 0!==k){const me=k[J];if(void 0!==me)switch(me.length){case 2:n.vertexAttrib2fv($.location,me);break;case 3:n.vertexAttrib3fv($.location,me);break;case 4:n.vertexAttrib4fv($.location,me);break;default:n.vertexAttrib1fv($.location,me)}}}}v()}(w,P,L,O),null!==B&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(B).buffer))},reset:A,resetDefaultState:M,dispose:function S(){A();for(const w in i){const P=i[w];for(const L in P){const O=P[L];for(const B in O)u(O[B].object),delete O[B];delete P[L]}delete i[w]}},releaseStatesOfGeometry:function b(w){if(void 0===i[w.id])return;const P=i[w.id];for(const L in P){const O=P[L];for(const B in O)u(O[B].object),delete O[B];delete P[L]}delete i[w.id]},releaseStatesOfProgram:function E(w){for(const P in i){const L=i[P];if(void 0===L[w.id])continue;const O=L[w.id];for(const B in O)u(O[B].object),delete O[B];delete L[w.id]}},initAttributes:m,enableAttribute:g,disableUnusedAttributes:v}}function Ose(n,e,t){let i;function o(l,u,d){0!==d&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}this.setMode=function r(l){i=l},this.render=function s(l,u){n.drawArrays(i,l,u),t.update(u,i,1)},this.renderInstances=o,this.renderMultiDraw=function a(l,u,d){if(0===d)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];t.update(f,i,1)},this.renderMultiDrawInstances=function c(l,u,d,h){if(0===d)return;const f=e.get("WEBGL_multi_draw");if(null===f)for(let p=0;p<l.length;p++)o(l[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(i,l,0,u,0,h,0,d);let p=0;for(let m=0;m<d;m++)p+=u[m];for(let m=0;m<h.length;m++)t.update(p,i,h[m])}}}function Lse(n,e,t,i){let r;function c(b){if("highp"===b){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return"mediump"===b&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=void 0!==t.precision?t.precision:"highp";const u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const d=!0===t.logarithmicDepthBuffer,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const b=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,textureFormatReadable:function o(b){return!(b!==ur&&i.convert(b)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(b){const E=b===op&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(b!==Ro&&i.convert(b)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&b!==Cr&&!E)},precision:l,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:f,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:f>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function Fse(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Pa,a=new ut,c={value:null,needsUpdate:!1};function u(d,h,f,p){const m=null!==d?d.length:0;let g=null;if(0!==m){if(g=c.value,!0!==p||null===g){const y=f+4*m,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===g||g.length<y)&&(g=new Float32Array(y));for(let _=0,x=f;_!==m;++_,x+=4)o.copy(d[_]).applyMatrix4(v,a),o.normal.toArray(g,x),g[x+3]=o.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=0!==d.length||h||0!==i||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,y=n.get(d);if(!r||null===p||0===p.length||s&&!g)s?u(null):function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const v=s?0:i,_=4*v;let x=y.clippingState||null;c.value=x,x=u(p,h,_,f);for(let S=0;S!==_;++S)x[S]=t[S];y.clippingState=x,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}}}function kse(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=Ea:304===a&&(o.mapping=Uc),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new Aie(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class yp extends zS{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const iB=[.125,.215,.35,.446,.526,.582],GS=new yp,rB=new fe;let jS=null,WS=0,$S=0,qS=!1;const Xc=(1+Math.sqrt(5))/2,Id=1/Xc,sB=[new I(-Xc,Id,0),new I(Xc,Id,0),new I(-Id,0,Xc),new I(Id,0,Xc),new I(0,Xc,-Id),new I(0,Xc,Id),new I(-1,1,-1),new I(1,1,-1),new I(-1,1,1),new I(1,1,1)];class oB{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){jS=this._renderer.getRenderTarget(),WS=this._renderer.getActiveCubeFace(),$S=this._renderer.getActiveMipmapLevel(),qS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=lB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=cB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jS,WS,$S),this._renderer.xr.enabled=qS,e.scissorTest=!1,zv(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Ea||e.mapping===Uc?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),jS=this._renderer.getRenderTarget(),WS=this._renderer.getActiveCubeFace(),$S=this._renderer.getActiveMipmapLevel(),qS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Tn,minFilter:Tn,generateMipmaps:!1,type:op,format:ur,colorSpace:hi,depthBuffer:!1},r=aB(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=aB(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Use(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+iB.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=iB[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,g=2,y=1,v=new Float32Array(m*p*f),_=new Float32Array(g*p*f),x=new Float32Array(y*p*f);for(let b=0;b<f;b++){const E=b%3*2/3-1,A=b>2?0:-1;v.set([E,A,0,E+2/3,A,0,E+2/3,A+1,0,E,A,0,E+2/3,A+1,0,E,A+1,0],m*p*b),_.set(h,g*p*b),x.set([b,b,b,b,b,b],y*p*b)}const S=new ft;S.setAttribute("position",new Pt(v,m)),S.setAttribute("uv",new Pt(_,g)),S.setAttribute("faceIndex",new Pt(x,y)),e.push(S),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function Bse(n,e,t){const i=new Float32Array(20),r=new I(0,1,0);return new Ks({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ht(this._lodPlanes[0],e);this._renderer.compile(t,GS)}_sceneToCubeUV(e,t,i,r){const a=new ai(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(rB),u.toneMapping=ba,u.autoClear=!1;const f=new si({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Ht(new Sd,f);let m=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,m=!0):(f.color.copy(rB),m=!0);for(let y=0;y<6;y++){const v=y%3;0===v?(a.up.set(0,c[y],0),a.lookAt(l[y],0,0)):1===v?(a.up.set(0,0,c[y]),a.lookAt(0,l[y],0)):(a.up.set(0,c[y],0),a.lookAt(0,0,l[y]));const _=this._cubeSize;zv(r,v*_,y>2?_:0,_,_),u.setRenderTarget(r),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ea||e.mapping===Uc;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=lB()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=cB());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ht(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;zv(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,GS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,o,sB[(r-s-1)%sB.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Ht(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,m=s/p,g=isFinite(s)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const y=[];let v=0;for(let E=0;E<20;++E){const A=E/m,M=Math.exp(-A*A/2);y.push(M),0===E?v+=M:E<g&&(v+=2*M)}for(let E=0;E<y.length;E++)y[E]=y[E]/v;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=y,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:_}=this;h.dTheta.value=p,h.mipInt.value=_-i;const x=this._sizeLods[r];zv(t,3*x*(r>_-4?r-_+4:0),4*(this._cubeSize-x),3*x,2*x),c.setRenderTarget(t),c.render(d,GS)}}function aB(n,e,t){const i=new Zs(n,e,t);return i.texture.mapping=np,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function zv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function cB(){return new Ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function lB(){return new Ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Vse(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=c===Ea||c===Uc;if(l||u){let d=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==d?d.texture.pmremVersion:0))return null===t&&(t=new oB(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(void 0!==d)return d.texture;{const f=a.image;return l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)?(null===t&&(t=new oB(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function zse(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&cd("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Hse(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const m=h.morphAttributes[p];for(let g=0,y=m.length;g<y;g++)e.remove(m[g])}h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function l(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(null!==f){const v=f.array;m=f.version;for(let _=0,x=v.length;_<x;_+=3){const S=v[_+0],b=v[_+1],E=v[_+2];h.push(S,b,b,E,E,S)}}else{if(void 0===p)return;m=p.version;for(let _=0,x=p.array.length/3-1;_<x;_+=3){const S=_+0,b=_+1,E=_+2;h.push(S,b,b,E,E,S)}}const g=new(RU(h)?qU:$U)(h,1);g.version=m;const y=s.get(d);y&&e.remove(y),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function c(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const f=d.morphAttributes;for(const p in f){const m=f[p];for(let g=0,y=m.length;g<y;g++)e.update(m[g],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&l(d)}else l(d);return s.get(d)}}}function Gse(n,e,t){let i,s,o;function l(h,f,p){0!==p&&(n.drawElementsInstanced(i,f,s,h*o,p),t.update(f,i,p))}this.setMode=function r(h){i=h},this.setIndex=function a(h){s=h.type,o=h.bytesPerElement},this.render=function c(h,f){n.drawElements(i,f,s,h*o),t.update(f,i,1)},this.renderInstances=l,this.renderMultiDraw=function u(h,f,p){if(0===p)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,s,h,0,p);let g=0;for(let y=0;y<p;y++)g+=f[y];t.update(g,i,1)},this.renderMultiDrawInstances=function d(h,f,p,m){if(0===p)return;const g=e.get("WEBGL_multi_draw");if(null===g)for(let y=0;y<h.length;y++)l(h[y]/o,f[y],m[y]);else{g.multiDrawElementsInstancedWEBGL(i,f,0,s,h,0,m,0,p);let y=0;for(let v=0;v<p;v++)y+=f[v];for(let v=0;v<m.length;v++)t.update(y,i,m[v])}}}function jse(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Wse(n,e,t){const i=new WeakMap,r=new Bt;return{update:function s(o,a,c){const l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=void 0!==u?u.length:0;let h=i.get(a);if(void 0===h||h.count!==d){let M=function(){E.dispose(),i.delete(a),a.removeEventListener("dispose",M)};void 0!==h&&h.texture.dispose();const f=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,m=void 0!==a.morphAttributes.color,g=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let _=0;!0===f&&(_=1),!0===p&&(_=2),!0===m&&(_=3);let x=a.attributes.position.count*_,S=1;x>e.maxTextureSize&&(S=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const b=new Float32Array(x*S*4*d),E=new SS(b,x,S,d);E.type=Cr,E.needsUpdate=!0;const A=4*_;for(let w=0;w<d;w++){const P=g[w],L=y[w],O=v[w],B=x*S*4*w;for(let W=0;W<P.count;W++){const k=W*A;!0===f&&(r.fromBufferAttribute(P,W),b[B+k+0]=r.x,b[B+k+1]=r.y,b[B+k+2]=r.z,b[B+k+3]=0),!0===p&&(r.fromBufferAttribute(L,W),b[B+k+4]=r.x,b[B+k+5]=r.y,b[B+k+6]=r.z,b[B+k+7]=0),!0===m&&(r.fromBufferAttribute(O,W),b[B+k+8]=r.x,b[B+k+9]=r.y,b[B+k+10]=r.z,b[B+k+11]=4===O.itemSize?r.w:1)}}h={count:d,texture:E,size:new Z(x,S)},i.set(a,h),a.addEventListener("dispose",M)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let f=0;for(let m=0;m<l.length;m++)f+=l[m];const p=a.morphTargetsRelative?1:1-f;c.getUniforms().setValue(n,"morphTargetBaseInfluence",p),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}}}function $se(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,d=e.get(c,c.geometry);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){const h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d},dispose:function o(){r=new WeakMap}}}class uB extends wi{constructor(e,t,i,r,s,o,a,c,l,u=td){if(u!==td&&u!==nd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===td&&(i=wa),void 0===i&&u===nd&&(i=ed),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Yn,this.minFilter=void 0!==c?c:Yn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const dB=new wi,hB=new uB(1,1),fB=new SS,pB=new LU,mB=new kv,gB=[],yB=[],vB=new Float32Array(16),_B=new Float32Array(9),xB=new Float32Array(4);function Rd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=gB[r];if(void 0===s&&(s=new Float32Array(r),gB[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Zn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Kn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Hv(n,e){let t=yB[e];void 0===t&&(t=new Int32Array(e),yB[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function qse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Xse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;n.uniform2fv(this.addr,e),Kn(t,e)}}function Yse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zn(t,e))return;n.uniform3fv(this.addr,e),Kn(t,e)}}function Zse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;n.uniform4fv(this.addr,e),Kn(t,e)}}function Kse(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Zn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Kn(t,e)}else{if(Zn(t,i))return;xB.set(i),n.uniformMatrix2fv(this.addr,!1,xB),Kn(t,i)}}function Jse(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Zn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Kn(t,e)}else{if(Zn(t,i))return;_B.set(i),n.uniformMatrix3fv(this.addr,!1,_B),Kn(t,i)}}function Qse(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Zn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Kn(t,e)}else{if(Zn(t,i))return;vB.set(i),n.uniformMatrix4fv(this.addr,!1,vB),Kn(t,i)}}function eoe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function toe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;n.uniform2iv(this.addr,e),Kn(t,e)}}function noe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zn(t,e))return;n.uniform3iv(this.addr,e),Kn(t,e)}}function ioe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;n.uniform4iv(this.addr,e),Kn(t,e)}}function roe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function soe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;n.uniform2uiv(this.addr,e),Kn(t,e)}}function ooe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zn(t,e))return;n.uniform3uiv(this.addr,e),Kn(t,e)}}function aoe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;n.uniform4uiv(this.addr,e),Kn(t,e)}}function coe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();let s;i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),this.type===n.SAMPLER_2D_SHADOW?(hB.compareFunction=515,s=hB):s=dB,t.setTexture2D(e||s,r)}function loe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||pB,r)}function uoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||mB,r)}function doe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||fB,r)}function foe(n,e){n.uniform1fv(this.addr,e)}function poe(n,e){const t=Rd(e,this.size,2);n.uniform2fv(this.addr,t)}function moe(n,e){const t=Rd(e,this.size,3);n.uniform3fv(this.addr,t)}function goe(n,e){const t=Rd(e,this.size,4);n.uniform4fv(this.addr,t)}function yoe(n,e){const t=Rd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function voe(n,e){const t=Rd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function _oe(n,e){const t=Rd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function xoe(n,e){n.uniform1iv(this.addr,e)}function Moe(n,e){n.uniform2iv(this.addr,e)}function boe(n,e){n.uniform3iv(this.addr,e)}function Eoe(n,e){n.uniform4iv(this.addr,e)}function woe(n,e){n.uniform1uiv(this.addr,e)}function Soe(n,e){n.uniform2uiv(this.addr,e)}function Toe(n,e){n.uniform3uiv(this.addr,e)}function Coe(n,e){n.uniform4uiv(this.addr,e)}function Aoe(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Zn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||dB,s[o])}function Doe(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Zn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||pB,s[o])}function Ioe(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Zn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||mB,s[o])}function Roe(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Zn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||fB,s[o])}class Noe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function hoe(n){switch(n){case 5126:return qse;case 35664:return Xse;case 35665:return Yse;case 35666:return Zse;case 35674:return Kse;case 35675:return Jse;case 35676:return Qse;case 5124:case 35670:return eoe;case 35667:case 35671:return toe;case 35668:case 35672:return noe;case 35669:case 35673:return ioe;case 5125:return roe;case 36294:return soe;case 36295:return ooe;case 36296:return aoe;case 35678:case 36198:case 36298:case 36306:case 35682:return coe;case 35679:case 36299:case 36307:return loe;case 35680:case 36300:case 36308:case 36293:return uoe;case 36289:case 36303:case 36311:case 36292:return doe}}(t.type)}}class Ooe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function Poe(n){switch(n){case 5126:return foe;case 35664:return poe;case 35665:return moe;case 35666:return goe;case 35674:return yoe;case 35675:return voe;case 35676:return _oe;case 5124:case 35670:return xoe;case 35667:case 35671:return Moe;case 35668:case 35672:return boe;case 35669:case 35673:return Eoe;case 5125:return woe;case 36294:return Soe;case 36295:return Toe;case 36296:return Coe;case 35678:case 36198:case 36298:case 36306:case 35682:return Aoe;case 35679:case 36299:case 36307:return Doe;case 35680:case 36300:case 36308:case 36293:return Ioe;case 36289:case 36303:case 36311:case 36292:return Roe}}(t.type)}}class Loe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const YS=/(\w+)(\])?(\[|\.)?/g;function MB(n,e){n.seq.push(e),n.map[e.id]=e}function Foe(n,e,t){const i=n.name,r=i.length;for(YS.lastIndex=0;;){const s=YS.exec(i);let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&YS.lastIndex+2===r){MB(t,void 0===l?new Noe(a,n,e):new Ooe(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new Loe(a),MB(t,d)),t=d}}}class Gv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);Foe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function bB(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const koe=37297;let Uoe=0;function EB(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Boe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function zoe(n,e){const t=function Voe(n){const e=St.getPrimaries(St.workingColorSpace),t=St.getPrimaries(n);let i;switch(e===t?i="":e===yv&&t===gv?i="LinearDisplayP3ToLinearSRGB":e===gv&&t===yv&&(i="LinearSRGBToLinearDisplayP3"),n){case hi:case pv:return[i,"LinearTransferOETF"];case Fn:case xS:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Hoe(n,e){let t;switch(e){case bne:t="Linear";break;case Ene:t="Reinhard";break;case hU:t="OptimizedCineon";break;case wne:t="ACESFilmic";break;case Tne:t="AgX";break;case Cne:t="Neutral";break;case Sne:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const jv=new I;function vp(n){return""!==n}function wB(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function SB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const qoe=/^[ \t]*#include +<([\w\d./]+)>/gm;function ZS(n){return n.replace(qoe,Yoe)}const Xoe=new Map;function Yoe(n,e){let t=pt[e];if(void 0===t){const i=Xoe.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=pt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return ZS(t)}const Zoe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function TB(n){return n.replace(Zoe,Koe)}function Koe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function CB(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function iae(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function Joe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Ow?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Xte?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Do&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function Qoe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ea:case Uc:e="ENVMAP_TYPE_CUBE";break;case np:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function eae(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Uc&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function tae(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case rv:e="ENVMAP_BLENDING_MULTIPLY";break;case xne:e="ENVMAP_BLENDING_MIX";break;case Mne:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function nae(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=function joe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(vp).join("\n")}(t),p=function Woe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,y,v=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(vp).join("\n"),g.length>0&&(g+="\n"),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(vp).join("\n"),y.length>0&&(y+="\n")):(g=[CB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(vp).join("\n"),y=[CB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ba?"#define TONE_MAPPING":"",t.toneMapping!==ba?pt.tonemapping_pars_fragment:"",t.toneMapping!==ba?Hoe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",pt.colorspace_pars_fragment,zoe("linearToOutputTexel",t.outputColorSpace),(St.getLuminanceCoefficients(jv),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${jv.x.toFixed(4)}, ${jv.y.toFixed(4)}, ${jv.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(vp).join("\n")),o=ZS(o),o=wB(o,t),o=SB(o,t),a=ZS(a),a=wB(a,t),a=SB(a,t),o=TB(o),a=TB(a),!0!==t.isRawShaderMaterial&&(v="#version 300 es\n",g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",t.glslVersion===AU?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AU?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const x=v+y+a,S=bB(r,r.VERTEX_SHADER,v+g+o),b=bB(r,r.FRAGMENT_SHADER,x);function E(P){if(n.debug.checkShaderErrors){const L=r.getProgramInfoLog(m).trim(),O=r.getShaderInfoLog(S).trim(),B=r.getShaderInfoLog(b).trim();let W=!0,k=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(W=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,m,S,b);else{const J=EB(r,S,"vertex"),$=EB(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+P.name+"\nMaterial Type: "+P.type+"\n\nProgram Info Log: "+L+"\n"+J+"\n"+$)}else""!==L?console.warn("THREE.WebGLProgram: Program Info Log:",L):(""===O||""===B)&&(k=!1);k&&(P.diagnostics={runnable:W,programLog:L,vertexShader:{log:O,prefix:g},fragmentShader:{log:B,prefix:y}})}r.deleteShader(S),r.deleteShader(b),A=new Gv(r,m),M=function $oe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,m)}let A,M;r.attachShader(m,S),r.attachShader(m,b),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===A&&E(this),A},this.getAttributes=function(){return void 0===M&&E(this),M};let w=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===w&&(w=r.getProgramParameter(m,koe)),w},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Uoe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=b,this}let rae=0;class sae{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new oae(e),t.set(e,i)),i}}class oae{constructor(e){this.id=rae++,this.code=e,this.usedTimes=0}}function aae(n,e,t,i,r,s,o){const a=new PS,c=new sae,l=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(M){return l.add(M),0===M?"uv":`uv${M}`}return{getParameters:function g(M,w,P,L,O){const B=L.fog,W=O.geometry,J=(M.isMeshStandardMaterial?t:e).get(M.envMap||(M.isMeshStandardMaterial?L.environment:null)),$=J&&J.mapping===np?J.image.height:null,de=p[M.type];null!==M.precision&&(f=r.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const me=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,ge=void 0!==me?me.length:0;let at,q,re,ve,je=0;if(void 0!==W.morphAttributes.position&&(je=1),void 0!==W.morphAttributes.normal&&(je=2),void 0!==W.morphAttributes.color&&(je=3),de){const Tt=Js[de];at=Tt.vertexShader,q=Tt.fragmentShader}else at=M.vertexShader,q=M.fragmentShader,c.update(M),re=c.getVertexShaderID(M),ve=c.getFragmentShaderID(M);const ye=n.getRenderTarget(),Ve=!0===O.isInstancedMesh,Je=!0===O.isBatchedMesh,Oe=!!M.map,R=!!J,ue=!!M.aoMap,oe=!!M.lightMap,xe=!!M.bumpMap,Q=!!M.normalMap,He=!!M.displacementMap,be=!!M.emissiveMap,Ce=!!M.metalnessMap,N=!!M.roughnessMap,C=M.anisotropy>0,H=M.clearcoat>0,ne=M.iridescence>0,te=M.sheen>0,Le=M.transmission>0,_e=C&&!!M.anisotropyMap,Se=H&&!!M.clearcoatMap,st=H&&!!M.clearcoatNormalMap,le=H&&!!M.clearcoatRoughnessMap,Ee=ne&&!!M.iridescenceMap,_t=ne&&!!M.iridescenceThicknessMap,Qe=te&&!!M.sheenColorMap,Ae=te&&!!M.sheenRoughnessMap,et=!!M.specularMap,ot=!!M.specularColorMap,ln=!!M.specularIntensityMap,T=Le&&!!M.transmissionMap,V=Le&&!!M.thicknessMap,X=!!M.alphaMap,tt=!!M.extensions;let An=ba;M.toneMapped&&(null===ye||!0===ye.isXRRenderTarget)&&(An=n.toneMapping);const Jn={shaderID:de,shaderType:M.type,shaderName:M.name,vertexShader:at,fragmentShader:q,defines:M.defines,customVertexShaderID:re,customFragmentShaderID:ve,isRawShaderMaterial:!0===M.isRawShaderMaterial,glslVersion:M.glslVersion,precision:f,batching:Je,batchingColor:Je&&null!==O._colorsTexture,instancing:Ve,instancingColor:Ve&&null!==O.instanceColor,instancingMorph:Ve&&null!==O.morphTexture,supportsVertexTextures:h,outputColorSpace:null===ye?n.outputColorSpace:!0===ye.isXRRenderTarget?ye.texture.colorSpace:hi,alphaToCoverage:!!M.alphaToCoverage,map:Oe,matcap:!!M.matcap,envMap:R,envMapMode:R&&J.mapping,envMapCubeUVHeight:$,aoMap:ue,lightMap:oe,bumpMap:xe,normalMap:Q,displacementMap:h&&He,emissiveMap:be,normalMapObjectSpace:Q&&1===M.normalMapType,normalMapTangentSpace:Q&&0===M.normalMapType,metalnessMap:Ce,roughnessMap:N,anisotropy:C,anisotropyMap:_e,clearcoat:H,clearcoatMap:Se,clearcoatNormalMap:st,clearcoatRoughnessMap:le,dispersion:M.dispersion>0,iridescence:ne,iridescenceMap:Ee,iridescenceThicknessMap:_t,sheen:te,sheenColorMap:Qe,sheenRoughnessMap:Ae,specularMap:et,specularColorMap:ot,specularIntensityMap:ln,transmission:Le,transmissionMap:T,thicknessMap:V,gradientMap:!!M.gradientMap,opaque:!1===M.transparent&&1===M.blending&&!1===M.alphaToCoverage,alphaMap:X,alphaTest:M.alphaTest>0,alphaHash:!!M.alphaHash,combine:M.combine,mapUv:Oe&&m(M.map.channel),aoMapUv:ue&&m(M.aoMap.channel),lightMapUv:oe&&m(M.lightMap.channel),bumpMapUv:xe&&m(M.bumpMap.channel),normalMapUv:Q&&m(M.normalMap.channel),displacementMapUv:He&&m(M.displacementMap.channel),emissiveMapUv:be&&m(M.emissiveMap.channel),metalnessMapUv:Ce&&m(M.metalnessMap.channel),roughnessMapUv:N&&m(M.roughnessMap.channel),anisotropyMapUv:_e&&m(M.anisotropyMap.channel),clearcoatMapUv:Se&&m(M.clearcoatMap.channel),clearcoatNormalMapUv:st&&m(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:le&&m(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Ee&&m(M.iridescenceMap.channel),iridescenceThicknessMapUv:_t&&m(M.iridescenceThicknessMap.channel),sheenColorMapUv:Qe&&m(M.sheenColorMap.channel),sheenRoughnessMapUv:Ae&&m(M.sheenRoughnessMap.channel),specularMapUv:et&&m(M.specularMap.channel),specularColorMapUv:ot&&m(M.specularColorMap.channel),specularIntensityMapUv:ln&&m(M.specularIntensityMap.channel),transmissionMapUv:T&&m(M.transmissionMap.channel),thicknessMapUv:V&&m(M.thicknessMap.channel),alphaMapUv:X&&m(M.alphaMap.channel),vertexTangents:!!W.attributes.tangent&&(Q||C),vertexColors:M.vertexColors,vertexAlphas:!0===M.vertexColors&&!!W.attributes.color&&4===W.attributes.color.itemSize,pointsUvs:!0===O.isPoints&&!!W.attributes.uv&&(Oe||X),fog:!!B,useFog:!0===M.fog,fogExp2:!!B&&B.isFogExp2,flatShading:!0===M.flatShading,sizeAttenuation:!0===M.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===O.isSkinnedMesh,morphTargets:void 0!==W.morphAttributes.position,morphNormals:void 0!==W.morphAttributes.normal,morphColors:void 0!==W.morphAttributes.color,morphTargetsCount:ge,morphTextureStride:je,numDirLights:w.directional.length,numPointLights:w.point.length,numSpotLights:w.spot.length,numSpotLightMaps:w.spotLightMap.length,numRectAreaLights:w.rectArea.length,numHemiLights:w.hemi.length,numDirLightShadows:w.directionalShadowMap.length,numPointLightShadows:w.pointShadowMap.length,numSpotLightShadows:w.spotShadowMap.length,numSpotLightShadowsWithMaps:w.numSpotLightShadowsWithMaps,numLightProbes:w.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:An,decodeVideoTexture:Oe&&!0===M.map.isVideoTexture&&St.getTransfer(M.map.colorSpace)===nn,premultipliedAlpha:M.premultipliedAlpha,doubleSided:2===M.side,flipSided:1===M.side,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:tt&&!0===M.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(tt&&!0===M.extensions.multiDraw||Je)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return Jn.vertexUv1s=l.has(1),Jn.vertexUv2s=l.has(2),Jn.vertexUv3s=l.has(3),l.clear(),Jn},getProgramCacheKey:function y(M){const w=[];if(M.shaderID?w.push(M.shaderID):(w.push(M.customVertexShaderID),w.push(M.customFragmentShaderID)),void 0!==M.defines)for(const P in M.defines)w.push(P),w.push(M.defines[P]);return!1===M.isRawShaderMaterial&&(function v(M,w){M.push(w.precision),M.push(w.outputColorSpace),M.push(w.envMapMode),M.push(w.envMapCubeUVHeight),M.push(w.mapUv),M.push(w.alphaMapUv),M.push(w.lightMapUv),M.push(w.aoMapUv),M.push(w.bumpMapUv),M.push(w.normalMapUv),M.push(w.displacementMapUv),M.push(w.emissiveMapUv),M.push(w.metalnessMapUv),M.push(w.roughnessMapUv),M.push(w.anisotropyMapUv),M.push(w.clearcoatMapUv),M.push(w.clearcoatNormalMapUv),M.push(w.clearcoatRoughnessMapUv),M.push(w.iridescenceMapUv),M.push(w.iridescenceThicknessMapUv),M.push(w.sheenColorMapUv),M.push(w.sheenRoughnessMapUv),M.push(w.specularMapUv),M.push(w.specularColorMapUv),M.push(w.specularIntensityMapUv),M.push(w.transmissionMapUv),M.push(w.thicknessMapUv),M.push(w.combine),M.push(w.fogExp2),M.push(w.sizeAttenuation),M.push(w.morphTargetsCount),M.push(w.morphAttributeCount),M.push(w.numDirLights),M.push(w.numPointLights),M.push(w.numSpotLights),M.push(w.numSpotLightMaps),M.push(w.numHemiLights),M.push(w.numRectAreaLights),M.push(w.numDirLightShadows),M.push(w.numPointLightShadows),M.push(w.numSpotLightShadows),M.push(w.numSpotLightShadowsWithMaps),M.push(w.numLightProbes),M.push(w.shadowMapType),M.push(w.toneMapping),M.push(w.numClippingPlanes),M.push(w.numClipIntersection),M.push(w.depthPacking)}(w,M),function _(M,w){a.disableAll(),w.supportsVertexTextures&&a.enable(0),w.instancing&&a.enable(1),w.instancingColor&&a.enable(2),w.instancingMorph&&a.enable(3),w.matcap&&a.enable(4),w.envMap&&a.enable(5),w.normalMapObjectSpace&&a.enable(6),w.normalMapTangentSpace&&a.enable(7),w.clearcoat&&a.enable(8),w.iridescence&&a.enable(9),w.alphaTest&&a.enable(10),w.vertexColors&&a.enable(11),w.vertexAlphas&&a.enable(12),w.vertexUv1s&&a.enable(13),w.vertexUv2s&&a.enable(14),w.vertexUv3s&&a.enable(15),w.vertexTangents&&a.enable(16),w.anisotropy&&a.enable(17),w.alphaHash&&a.enable(18),w.batching&&a.enable(19),w.dispersion&&a.enable(20),w.batchingColor&&a.enable(21),M.push(a.mask),a.disableAll(),w.fog&&a.enable(0),w.useFog&&a.enable(1),w.flatShading&&a.enable(2),w.logarithmicDepthBuffer&&a.enable(3),w.skinning&&a.enable(4),w.morphTargets&&a.enable(5),w.morphNormals&&a.enable(6),w.morphColors&&a.enable(7),w.premultipliedAlpha&&a.enable(8),w.shadowMapEnabled&&a.enable(9),w.doubleSided&&a.enable(10),w.flipSided&&a.enable(11),w.useDepthPacking&&a.enable(12),w.dithering&&a.enable(13),w.transmission&&a.enable(14),w.sheen&&a.enable(15),w.opaque&&a.enable(16),w.pointsUvs&&a.enable(17),w.decodeVideoTexture&&a.enable(18),w.alphaToCoverage&&a.enable(19),M.push(a.mask)}(w,M),w.push(n.outputColorSpace)),w.push(M.customProgramCacheKey),w.join()},getUniforms:function x(M){const w=p[M.type];let P;return P=w?wie.clone(Js[w].uniforms):M.uniforms,P},acquireProgram:function S(M,w){let P;for(let L=0,O=u.length;L<O;L++){const B=u[L];if(B.cacheKey===w){P=B,++P.usedTimes;break}}return void 0===P&&(P=new iae(n,w,M,s),u.push(P)),P},releaseProgram:function b(M){if(0==--M.usedTimes){const w=u.indexOf(M);u[w]=u[u.length-1],u.pop(),M.destroy()}},releaseShaderCache:function E(M){c.remove(M)},programs:u,dispose:function A(){c.dispose()}}}function cae(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function lae(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function AB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function DB(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,m,g){let y=n[e];return void 0===y?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:g},n[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=p,y.renderOrder=d.renderOrder,y.z=m,y.group=g),e++,y}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,m,g){const y=o(d,h,f,p,m,g);f.transmission>0?i.push(y):!0===f.transparent?r.push(y):t.push(y)},unshift:function c(d,h,f,p,m,g){const y=o(d,h,f,p,m,g);f.transmission>0?i.unshift(y):!0===f.transparent?r.unshift(y):t.unshift(y)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function l(d,h){t.length>1&&t.sort(d||lae),i.length>1&&i.sort(h||AB),r.length>1&&r.sort(h||AB)}}}function uae(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new DB,n.set(i,[o])):r>=s.length?(o=new DB,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function dae(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new I,color:new fe};break;case"SpotLight":t={position:new I,direction:new I,color:new fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new I,color:new fe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new I,skyColor:new fe,groundColor:new fe};break;case"RectAreaLight":t={color:new fe,position:new I,halfWidth:new I,halfHeight:new I}}return n[e.id]=t,t}}}let fae=0;function pae(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mae(n){const e=new dae,t=function hae(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Z};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Z,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new I);const r=new I,s=new ze,o=new ze;return{setup:function a(l){let u=0,d=0,h=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let f=0,p=0,m=0,g=0,y=0,v=0,_=0,x=0,S=0,b=0,E=0;l.sort(pae);for(let M=0,w=l.length;M<w;M++){const P=l[M],L=P.color,O=P.intensity,B=P.distance,W=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)u+=L.r*O,d+=L.g*O,h+=L.b*O;else if(P.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(P.sh.coefficients[k],O);E++}else if(P.isDirectionalLight){const k=e.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const J=P.shadow,$=t.get(P);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,i.directionalShadow[f]=$,i.directionalShadowMap[f]=W,i.directionalShadowMatrix[f]=P.shadow.matrix,v++}i.directional[f]=k,f++}else if(P.isSpotLight){const k=e.get(P);k.position.setFromMatrixPosition(P.matrixWorld),k.color.copy(L).multiplyScalar(O),k.distance=B,k.coneCos=Math.cos(P.angle),k.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),k.decay=P.decay,i.spot[m]=k;const J=P.shadow;if(P.map&&(i.spotLightMap[S]=P.map,S++,J.updateMatrices(P),P.castShadow&&b++),i.spotLightMatrix[m]=J.matrix,P.castShadow){const $=t.get(P);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,i.spotShadow[m]=$,i.spotShadowMap[m]=W,x++}m++}else if(P.isRectAreaLight){const k=e.get(P);k.color.copy(L).multiplyScalar(O),k.halfWidth.set(.5*P.width,0,0),k.halfHeight.set(0,.5*P.height,0),i.rectArea[g]=k,g++}else if(P.isPointLight){const k=e.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity),k.distance=P.distance,k.decay=P.decay,P.castShadow){const J=P.shadow,$=t.get(P);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,$.shadowCameraNear=J.camera.near,$.shadowCameraFar=J.camera.far,i.pointShadow[p]=$,i.pointShadowMap[p]=W,i.pointShadowMatrix[p]=P.shadow.matrix,_++}i.point[p]=k,p++}else if(P.isHemisphereLight){const k=e.get(P);k.skyColor.copy(P.color).multiplyScalar(O),k.groundColor.copy(P.groundColor).multiplyScalar(O),i.hemi[y]=k,y++}}g>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=Me.LTC_FLOAT_1,i.rectAreaLTC2=Me.LTC_FLOAT_2):(i.rectAreaLTC1=Me.LTC_HALF_1,i.rectAreaLTC2=Me.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;const A=i.hash;(A.directionalLength!==f||A.pointLength!==p||A.spotLength!==m||A.rectAreaLength!==g||A.hemiLength!==y||A.numDirectionalShadows!==v||A.numPointShadows!==_||A.numSpotShadows!==x||A.numSpotMaps!==S||A.numLightProbes!==E)&&(i.directional.length=f,i.spot.length=m,i.rectArea.length=g,i.point.length=p,i.hemi.length=y,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=x+S-b,i.spotLightMap.length=S,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=E,A.directionalLength=f,A.pointLength=p,A.spotLength=m,A.rectAreaLength=g,A.hemiLength=y,A.numDirectionalShadows=v,A.numPointShadows=_,A.numSpotShadows=x,A.numSpotMaps=S,A.numLightProbes=E,i.version=fae++)},setupView:function c(l,u){let d=0,h=0,f=0,p=0,m=0;const g=u.matrixWorldInverse;for(let y=0,v=l.length;y<v;y++){const _=l[y];if(_.isDirectionalLight){const x=i.directional[d];x.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(g),d++}else if(_.isSpotLight){const x=i.spot[f];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(g),f++}else if(_.isRectAreaLight){const x=i.rectArea[p];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(g),o.identity(),s.copy(_.matrixWorld),s.premultiply(g),o.extractRotation(s),x.halfWidth.set(.5*_.width,0,0),x.halfHeight.set(0,.5*_.height,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),p++}else if(_.isPointLight){const x=i.point[h];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(g),h++}else if(_.isHemisphereLight){const x=i.hemi[m];x.direction.setFromMatrixPosition(_.matrixWorld),x.direction.transformDirection(g),m++}}},state:i}}function IB(n){const e=new mae(n),t=[],i=[],l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(u){l.camera=u,t.length=0,i.length=0},state:l,setupLights:function a(){e.setup(t)},setupLightsView:function c(u){e.setupView(t,u)},pushLight:function s(u){t.push(u)},pushShadow:function o(u){i.push(u)}}}function gae(n){let e=new WeakMap;return{get:function t(r,s=0){const o=e.get(r);let a;return void 0===o?(a=new IB(n),e.set(r,[a])):s>=o.length?(a=new IB(n),o.push(a)):a=o[s],a},dispose:function i(){e=new WeakMap}}}class RB extends ri{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class PB extends ri{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function _ae(n,e,t){let i=new Bv;const r=new Z,s=new Z,o=new Bt,a=new RB({depthPacking:3201}),c=new PB,l={},u=t.maxTextureSize,d={[Io]:1,[lr]:0,[Ys]:2},h=new Ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Z},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new ft;p.setAttribute("position",new Pt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ht(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ow;let y=this.type;function v(b,E){const A=e.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===b.mapPass&&(b.mapPass=new Zs(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(E,null,A,h,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(E,null,A,f,m,null)}function _(b,E,A,M){let w=null;const P=!0===A.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(void 0!==P)w=P;else if(w=!0===A.isPointLight?c:a,n.localClippingEnabled&&!0===E.clipShadows&&Array.isArray(E.clippingPlanes)&&0!==E.clippingPlanes.length||E.displacementMap&&0!==E.displacementScale||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const L=w.uuid,O=E.uuid;let B=l[L];void 0===B&&(B={},l[L]=B);let W=B[O];void 0===W&&(W=w.clone(),B[O]=W,E.addEventListener("dispose",S)),w=W}return w.visible=E.visible,w.wireframe=E.wireframe,w.side=M===Do?null!==E.shadowSide?E.shadowSide:E.side:null!==E.shadowSide?E.shadowSide:d[E.side],w.alphaMap=E.alphaMap,w.alphaTest=E.alphaTest,w.map=E.map,w.clipShadows=E.clipShadows,w.clippingPlanes=E.clippingPlanes,w.clipIntersection=E.clipIntersection,w.displacementMap=E.displacementMap,w.displacementScale=E.displacementScale,w.displacementBias=E.displacementBias,w.wireframeLinewidth=E.wireframeLinewidth,w.linewidth=E.linewidth,!0===A.isPointLight&&!0===w.isMeshDistanceMaterial&&(n.properties.get(w).light=A),w}function x(b,E,A,M,w){if(!1===b.visible)return;if(b.layers.test(E.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&w===Do)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,b.matrixWorld);const O=e.update(b),B=b.material;if(Array.isArray(B)){const W=O.groups;for(let k=0,J=W.length;k<J;k++){const $=W[k],de=B[$.materialIndex];if(de&&de.visible){const me=_(b,de,M,w);b.onBeforeShadow(n,b,E,A,O,me,$),n.renderBufferDirect(A,null,O,me,b,$),b.onAfterShadow(n,b,E,A,O,me,$)}}}else if(B.visible){const W=_(b,B,M,w);b.onBeforeShadow(n,b,E,A,O,W,null),n.renderBufferDirect(A,null,O,W,b,null),b.onAfterShadow(n,b,E,A,O,W,null)}}const L=b.children;for(let O=0,B=L.length;O<B;O++)x(L[O],E,A,M,w)}function S(b){b.target.removeEventListener("dispose",S);for(const A in l){const M=l[A],w=b.target.uuid;w in M&&(M[w].dispose(),delete M[w])}}this.render=function(b,E,A){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const M=n.getRenderTarget(),w=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),L=n.state;L.setBlending(0),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const O=y!==Do&&this.type===Do,B=y===Do&&this.type!==Do;for(let W=0,k=b.length;W<k;W++){const J=b[W],$=J.shadow;if(void 0===$){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(!1===$.autoUpdate&&!1===$.needsUpdate)continue;r.copy($.mapSize);const de=$.getFrameExtents();if(r.multiply(de),s.copy($.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/de.x),r.x=s.x*de.x,$.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/de.y),r.y=s.y*de.y,$.mapSize.y=s.y)),null===$.map||!0===O||!0===B){const ge=this.type!==Do?{minFilter:Yn,magFilter:Yn}:{};null!==$.map&&$.map.dispose(),$.map=new Zs(r.x,r.y,ge),$.map.texture.name=J.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();const me=$.getViewportCount();for(let ge=0;ge<me;ge++){const je=$.getViewport(ge);o.set(s.x*je.x,s.y*je.y,s.x*je.z,s.y*je.w),L.viewport(o),$.updateMatrices(J,ge),i=$.getFrustum(),x(E,A,$.camera,J,this.type)}!0!==$.isPointLightShadow&&this.type===Do&&v($,A),$.needsUpdate=!1}y=this.type,g.needsUpdate=!1,n.setRenderTarget(M,w,P)}}function xae(n){const r=new function e(){let T=!1;const V=new Bt;let z=null;const X=new Bt(0,0,0,0);return{setMask:function(ae){z!==ae&&!T&&(n.colorMask(ae,ae,ae,ae),z=ae)},setLocked:function(ae){T=ae},setClear:function(ae,Fe,tt,An,Jn){!0===Jn&&(ae*=An,Fe*=An,tt*=An),V.set(ae,Fe,tt,An),!1===X.equals(V)&&(n.clearColor(ae,Fe,tt,An),X.copy(V))},reset:function(){T=!1,z=null,X.set(-1,0,0,0)}}},s=new function t(){let T=!1,V=null,z=null,X=null;return{setTest:function(ae){ae?ve(n.DEPTH_TEST):ye(n.DEPTH_TEST)},setMask:function(ae){V!==ae&&!T&&(n.depthMask(ae),V=ae)},setFunc:function(ae){if(z!==ae){switch(ae){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}z=ae}},setLocked:function(ae){T=ae},setClear:function(ae){X!==ae&&(n.clearDepth(ae),X=ae)},reset:function(){T=!1,V=null,z=null,X=null}}},o=new function i(){let T=!1,V=null,z=null,X=null,ae=null,Fe=null,tt=null,An=null,Jn=null;return{setTest:function(Tt){T||(Tt?ve(n.STENCIL_TEST):ye(n.STENCIL_TEST))},setMask:function(Tt){V!==Tt&&!T&&(n.stencilMask(Tt),V=Tt)},setFunc:function(Tt,Qn,Un){(z!==Tt||X!==Qn||ae!==Un)&&(n.stencilFunc(Tt,Qn,Un),z=Tt,X=Qn,ae=Un)},setOp:function(Tt,Qn,Un){(Fe!==Tt||tt!==Qn||An!==Un)&&(n.stencilOp(Tt,Qn,Un),Fe=Tt,tt=Qn,An=Un)},setLocked:function(Tt){T=Tt},setClear:function(Tt){Jn!==Tt&&(n.clearStencil(Tt),Jn=Tt)},reset:function(){T=!1,V=null,z=null,X=null,ae=null,Fe=null,tt=null,An=null,Jn=null}}},a=new WeakMap,c=new WeakMap;let l={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,g=null,y=null,v=null,_=null,x=null,S=null,b=new fe(0,0,0),E=0,A=!1,M=null,w=null,P=null,L=null,O=null;const B=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let W=!1,k=0;const J=n.getParameter(n.VERSION);-1!==J.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(J)[1]),W=k>=1):-1!==J.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),W=k>=2);let $=null,de={};const me=n.getParameter(n.SCISSOR_BOX),ge=n.getParameter(n.VIEWPORT),je=(new Bt).fromArray(me),at=(new Bt).fromArray(ge);function q(T,V,z,X){const ae=new Uint8Array(4),Fe=n.createTexture();n.bindTexture(T,Fe),n.texParameteri(T,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(T,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let tt=0;tt<z;tt++)T===n.TEXTURE_3D||T===n.TEXTURE_2D_ARRAY?n.texImage3D(V,0,n.RGBA,1,1,X,0,n.RGBA,n.UNSIGNED_BYTE,ae):n.texImage2D(V+tt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ae);return Fe}const re={};function ve(T){!0!==l[T]&&(n.enable(T),l[T]=!0)}function ye(T){!1!==l[T]&&(n.disable(T),l[T]=!1)}re[n.TEXTURE_2D]=q(n.TEXTURE_2D,n.TEXTURE_2D,1),re[n.TEXTURE_CUBE_MAP]=q(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),re[n.TEXTURE_2D_ARRAY]=q(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),re[n.TEXTURE_3D]=q(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),ve(n.DEPTH_TEST),s.setFunc(3),xe(!1),Q(1),ve(n.CULL_FACE),ue(0);const gt={[kc]:n.FUNC_ADD,[Zte]:n.FUNC_SUBTRACT,[Kte]:n.FUNC_REVERSE_SUBTRACT};gt[103]=n.MIN,gt[104]=n.MAX;const R={[ene]:n.ZERO,[tne]:n.ONE,[nne]:n.SRC_COLOR,[Lw]:n.SRC_ALPHA,[cne]:n.SRC_ALPHA_SATURATE,[one]:n.DST_COLOR,[rne]:n.DST_ALPHA,[ine]:n.ONE_MINUS_SRC_COLOR,[Fw]:n.ONE_MINUS_SRC_ALPHA,[ane]:n.ONE_MINUS_DST_COLOR,[sne]:n.ONE_MINUS_DST_ALPHA,[lne]:n.CONSTANT_COLOR,[une]:n.ONE_MINUS_CONSTANT_COLOR,[dne]:n.CONSTANT_ALPHA,[hne]:n.ONE_MINUS_CONSTANT_ALPHA};function ue(T,V,z,X,ae,Fe,tt,An,Jn,Tt){if(0!==T){if(!1===p&&(ve(n.BLEND),p=!0),5===T)ae=ae||V,Fe=Fe||z,tt=tt||X,(V!==g||ae!==_)&&(n.blendEquationSeparate(gt[V],gt[ae]),g=V,_=ae),(z!==y||X!==v||Fe!==x||tt!==S)&&(n.blendFuncSeparate(R[z],R[X],R[Fe],R[tt]),y=z,v=X,x=Fe,S=tt),(!1===An.equals(b)||Jn!==E)&&(n.blendColor(An.r,An.g,An.b,Jn),b.copy(An),E=Jn),m=T,A=!1;else if(T!==m||Tt!==A){if((100!==g||100!==_)&&(n.blendEquation(n.FUNC_ADD),g=100,_=100),Tt)switch(T){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",T)}else switch(T){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",T)}y=null,v=null,x=null,S=null,b.set(0,0,0),E=0,m=T,A=Tt}}else!0===p&&(ye(n.BLEND),p=!1)}function xe(T){M!==T&&(n.frontFace(T?n.CW:n.CCW),M=T)}function Q(T){0!==T?(ve(n.CULL_FACE),T!==w&&n.cullFace(1===T?n.BACK:2===T?n.FRONT:n.FRONT_AND_BACK)):ye(n.CULL_FACE),w=T}function be(T,V,z){T?(ve(n.POLYGON_OFFSET_FILL),(L!==V||O!==z)&&(n.polygonOffset(V,z),L=V,O=z)):ye(n.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:o},enable:ve,disable:ye,bindFramebuffer:function Ve(T,V){return u[T]!==V&&(n.bindFramebuffer(T,V),u[T]=V,T===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=V),T===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=V),!0)},drawBuffers:function Je(T,V){let z=h,X=!1;if(T){z=d.get(V),void 0===z&&(z=[],d.set(V,z));const ae=T.textures;if(z.length!==ae.length||z[0]!==n.COLOR_ATTACHMENT0){for(let Fe=0,tt=ae.length;Fe<tt;Fe++)z[Fe]=n.COLOR_ATTACHMENT0+Fe;z.length=ae.length,X=!0}}else z[0]!==n.BACK&&(z[0]=n.BACK,X=!0);X&&n.drawBuffers(z)},useProgram:function Oe(T){return f!==T&&(n.useProgram(T),f=T,!0)},setBlending:ue,setMaterial:function oe(T,V){2===T.side?ye(n.CULL_FACE):ve(n.CULL_FACE);let z=1===T.side;V&&(z=!z),xe(z),1===T.blending&&!1===T.transparent?ue(0):ue(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.blendColor,T.blendAlpha,T.premultipliedAlpha),s.setFunc(T.depthFunc),s.setTest(T.depthTest),s.setMask(T.depthWrite),r.setMask(T.colorWrite);const X=T.stencilWrite;o.setTest(X),X&&(o.setMask(T.stencilWriteMask),o.setFunc(T.stencilFunc,T.stencilRef,T.stencilFuncMask),o.setOp(T.stencilFail,T.stencilZFail,T.stencilZPass)),be(T.polygonOffset,T.polygonOffsetFactor,T.polygonOffsetUnits),!0===T.alphaToCoverage?ve(n.SAMPLE_ALPHA_TO_COVERAGE):ye(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:xe,setCullFace:Q,setLineWidth:function He(T){T!==P&&(W&&n.lineWidth(T),P=T)},setPolygonOffset:be,setScissorTest:function Ce(T){T?ve(n.SCISSOR_TEST):ye(n.SCISSOR_TEST)},activeTexture:function N(T){void 0===T&&(T=n.TEXTURE0+B-1),$!==T&&(n.activeTexture(T),$=T)},bindTexture:function C(T,V,z){void 0===z&&(z=null===$?n.TEXTURE0+B-1:$);let X=de[z];void 0===X&&(X={type:void 0,texture:void 0},de[z]=X),(X.type!==T||X.texture!==V)&&($!==z&&(n.activeTexture(z),$=z),n.bindTexture(T,V||re[T]),X.type=T,X.texture=V)},unbindTexture:function H(){const T=de[$];void 0!==T&&void 0!==T.type&&(n.bindTexture(T.type,null),T.type=void 0,T.texture=void 0)},compressedTexImage2D:function se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},compressedTexImage3D:function ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},texImage2D:function Ee(){try{n.texImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},texImage3D:function _t(){try{n.texImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},updateUBOMapping:function et(T,V){let z=c.get(V);void 0===z&&(z=new WeakMap,c.set(V,z));let X=z.get(T);void 0===X&&(X=n.getUniformBlockIndex(V,T.name),z.set(T,X))},uniformBlockBinding:function ot(T,V){const X=c.get(V).get(T);a.get(V)!==X&&(n.uniformBlockBinding(V,X,T.__bindingPointIndex),a.set(V,X))},texStorage2D:function st(){try{n.texStorage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},texStorage3D:function le(){try{n.texStorage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},texSubImage2D:function te(){try{n.texSubImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},texSubImage3D:function Le(){try{n.texSubImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},compressedTexSubImage2D:function _e(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},compressedTexSubImage3D:function Se(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}},scissor:function Qe(T){!1===je.equals(T)&&(n.scissor(T.x,T.y,T.z,T.w),je.copy(T))},viewport:function Ae(T){!1===at.equals(T)&&(n.viewport(T.x,T.y,T.z,T.w),at.copy(T))},reset:function ln(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),l={},$=null,de={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,g=null,y=null,v=null,_=null,x=null,S=null,b=new fe(0,0,0),E=0,A=!1,M=null,w=null,P=null,L=null,O=null,je.set(0,0,n.canvas.width,n.canvas.height),at.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}}}function KS(n,e,t,i){const r=function wae(n){switch(n){case Ro:case pU:return{byteLength:1,components:1};case sp:case mU:case op:return{byteLength:2,components:1};case Vw:case zw:return{byteLength:2,components:4};case wa:case Bw:case Cr:return{byteLength:4,components:1};case gU:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}(i);switch(t){case yU:case _U:return n*e;case xU:return n*e*2;case Hw:case av:return n*e/r.components*r.byteLength;case MU:case Gw:return n*e*2/r.components*r.byteLength;case vU:return n*e*3/r.components*r.byteLength;case ur:case jw:return n*e*4/r.components*r.byteLength;case cv:case lv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case uv:case dv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $w:case Xw:return Math.max(n,16)*Math.max(e,8)/4;case Ww:case qw:return Math.max(n,8)*Math.max(e,8)/2;case Yw:case Zw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Kw:case Jw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Qw:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case eS:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case tS:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case nS:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case iS:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case rS:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case sS:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case oS:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case aS:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case cS:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case lS:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case uS:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case dS:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case hv:case hS:case fS:return Math.ceil(n/4)*Math.ceil(e/4)*16;case bU:case pS:return Math.ceil(n/4)*Math.ceil(e/4)*8;case mS:case gS:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Sae(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),l=new Z,u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function p(N,C){return f?new OffscreenCanvas(N,C):up("canvas")}function m(N,C,H){let se=1;const ne=Ce(N);if((ne.width>H||ne.height>H)&&(se=H/Math.max(ne.width,ne.height)),se<1){if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){const te=Math.floor(se*ne.width),Le=Math.floor(se*ne.height);void 0===d&&(d=p(te,Le));const _e=C?p(te,Le):d;return _e.width=te,_e.height=Le,_e.getContext("2d").drawImage(N,0,0,te,Le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ne.width+"x"+ne.height+") to ("+te+"x"+Le+")."),_e}return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ne.width+"x"+ne.height+")."),N}return N}function g(N){return N.generateMipmaps&&N.minFilter!==Yn&&N.minFilter!==Tn}function y(N){n.generateMipmap(N)}function v(N,C,H,se,ne=!1){if(null!==N){if(void 0!==n[N])return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let te=C;if(C===n.RED&&(H===n.FLOAT&&(te=n.R32F),H===n.HALF_FLOAT&&(te=n.R16F),H===n.UNSIGNED_BYTE&&(te=n.R8)),C===n.RED_INTEGER&&(H===n.UNSIGNED_BYTE&&(te=n.R8UI),H===n.UNSIGNED_SHORT&&(te=n.R16UI),H===n.UNSIGNED_INT&&(te=n.R32UI),H===n.BYTE&&(te=n.R8I),H===n.SHORT&&(te=n.R16I),H===n.INT&&(te=n.R32I)),C===n.RG&&(H===n.FLOAT&&(te=n.RG32F),H===n.HALF_FLOAT&&(te=n.RG16F),H===n.UNSIGNED_BYTE&&(te=n.RG8)),C===n.RG_INTEGER&&(H===n.UNSIGNED_BYTE&&(te=n.RG8UI),H===n.UNSIGNED_SHORT&&(te=n.RG16UI),H===n.UNSIGNED_INT&&(te=n.RG32UI),H===n.BYTE&&(te=n.RG8I),H===n.SHORT&&(te=n.RG16I),H===n.INT&&(te=n.RG32I)),C===n.RGB&&H===n.UNSIGNED_INT_5_9_9_9_REV&&(te=n.RGB9_E5),C===n.RGBA){const Le=ne?mv:St.getTransfer(se);H===n.FLOAT&&(te=n.RGBA32F),H===n.HALF_FLOAT&&(te=n.RGBA16F),H===n.UNSIGNED_BYTE&&(te=Le===nn?n.SRGB8_ALPHA8:n.RGBA8),H===n.UNSIGNED_SHORT_4_4_4_4&&(te=n.RGBA4),H===n.UNSIGNED_SHORT_5_5_5_1&&(te=n.RGB5_A1)}return(te===n.R16F||te===n.R32F||te===n.RG16F||te===n.RG32F||te===n.RGBA16F||te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),te}function _(N,C){let H;return N?null===C||C===wa||C===ed?H=n.DEPTH24_STENCIL8:C===Cr?H=n.DEPTH32F_STENCIL8:C===sp&&(H=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===C||C===wa||C===ed?H=n.DEPTH_COMPONENT24:C===Cr?H=n.DEPTH_COMPONENT32F:C===sp&&(H=n.DEPTH_COMPONENT16),H}function x(N,C){return!0===g(N)||N.isFramebufferTexture&&N.minFilter!==Yn&&N.minFilter!==Tn?Math.log2(Math.max(C.width,C.height))+1:void 0!==N.mipmaps&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?C.mipmaps.length:1}function S(N){const C=N.target;C.removeEventListener("dispose",S),function E(N){const C=i.get(N);if(void 0===C.__webglInit)return;const H=N.source,se=h.get(H);if(se){const ne=se[C.__cacheKey];ne.usedTimes--,0===ne.usedTimes&&A(N),0===Object.keys(se).length&&h.delete(H)}i.remove(N)}(C),C.isVideoTexture&&u.delete(C)}function b(N){const C=N.target;C.removeEventListener("dispose",b),function M(N){const C=i.get(N);if(N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let se=0;se<6;se++){if(Array.isArray(C.__webglFramebuffer[se]))for(let ne=0;ne<C.__webglFramebuffer[se].length;ne++)n.deleteFramebuffer(C.__webglFramebuffer[se][ne]);else n.deleteFramebuffer(C.__webglFramebuffer[se]);C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer[se])}else{if(Array.isArray(C.__webglFramebuffer))for(let se=0;se<C.__webglFramebuffer.length;se++)n.deleteFramebuffer(C.__webglFramebuffer[se]);else n.deleteFramebuffer(C.__webglFramebuffer);if(C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer),C.__webglMultisampledFramebuffer&&n.deleteFramebuffer(C.__webglMultisampledFramebuffer),C.__webglColorRenderbuffer)for(let se=0;se<C.__webglColorRenderbuffer.length;se++)C.__webglColorRenderbuffer[se]&&n.deleteRenderbuffer(C.__webglColorRenderbuffer[se]);C.__webglDepthRenderbuffer&&n.deleteRenderbuffer(C.__webglDepthRenderbuffer)}const H=N.textures;for(let se=0,ne=H.length;se<ne;se++){const te=i.get(H[se]);te.__webglTexture&&(n.deleteTexture(te.__webglTexture),o.memory.textures--),i.remove(H[se])}i.remove(N)}(C)}function A(N){const C=i.get(N);n.deleteTexture(C.__webglTexture),delete h.get(N.source)[C.__cacheKey],o.memory.textures--}let w=0;function B(N,C){const H=i.get(N);if(N.isVideoTexture&&function He(N){const C=o.render.frame;u.get(N)!==C&&(u.set(N,C),N.update())}(N),!1===N.isRenderTargetTexture&&N.version>0&&H.__version!==N.version){const se=N.image;if(null===se)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==se.complete)return void at(H,N,C);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,H.__webglTexture,n.TEXTURE0+C)}const $={[Bc]:n.REPEAT,[$r]:n.CLAMP_TO_EDGE,[ip]:n.MIRRORED_REPEAT},de={[Yn]:n.NEAREST,[Uw]:n.NEAREST_MIPMAP_NEAREST,[Qu]:n.NEAREST_MIPMAP_LINEAR,[Tn]:n.LINEAR,[rp]:n.LINEAR_MIPMAP_NEAREST,[_s]:n.LINEAR_MIPMAP_LINEAR},me={[Lne]:n.NEVER,[zne]:n.ALWAYS,[Fne]:n.LESS,[CU]:n.LEQUAL,[kne]:n.EQUAL,[Vne]:n.GEQUAL,[Une]:n.GREATER,[Bne]:n.NOTEQUAL};function ge(N,C){if(C.type===Cr&&!1===e.has("OES_texture_float_linear")&&(C.magFilter===Tn||1007===C.magFilter||C.magFilter===Qu||C.magFilter===_s||C.minFilter===Tn||1007===C.minFilter||C.minFilter===Qu||C.minFilter===_s)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(N,n.TEXTURE_WRAP_S,$[C.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,$[C.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,$[C.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,de[C.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,de[C.minFilter]),C.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,me[C.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(C.magFilter===Yn||C.minFilter!==Qu&&C.minFilter!==_s||C.type===Cr&&!1===e.has("OES_texture_float_linear"))return;if(C.anisotropy>1||i.get(C).__currentAnisotropy){const H=e.get("EXT_texture_filter_anisotropic");n.texParameterf(N,H.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,r.getMaxAnisotropy())),i.get(C).__currentAnisotropy=C.anisotropy}}}function je(N,C){let H=!1;void 0===N.__webglInit&&(N.__webglInit=!0,C.addEventListener("dispose",S));const se=C.source;let ne=h.get(se);void 0===ne&&(ne={},h.set(se,ne));const te=function O(N){const C=[];return C.push(N.wrapS),C.push(N.wrapT),C.push(N.wrapR||0),C.push(N.magFilter),C.push(N.minFilter),C.push(N.anisotropy),C.push(N.internalFormat),C.push(N.format),C.push(N.type),C.push(N.generateMipmaps),C.push(N.premultiplyAlpha),C.push(N.flipY),C.push(N.unpackAlignment),C.push(N.colorSpace),C.join()}(C);if(te!==N.__cacheKey){void 0===ne[te]&&(ne[te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,H=!0),ne[te].usedTimes++;const Le=ne[N.__cacheKey];void 0!==Le&&(ne[N.__cacheKey].usedTimes--,0===Le.usedTimes&&A(C)),N.__cacheKey=te,N.__webglTexture=ne[te].texture}return H}function at(N,C,H){let se=n.TEXTURE_2D;(C.isDataArrayTexture||C.isCompressedArrayTexture)&&(se=n.TEXTURE_2D_ARRAY),C.isData3DTexture&&(se=n.TEXTURE_3D);const ne=je(N,C),te=C.source;t.bindTexture(se,N.__webglTexture,n.TEXTURE0+H);const Le=i.get(te);if(te.version!==Le.__version||!0===ne){t.activeTexture(n.TEXTURE0+H);const _e=St.getPrimaries(St.workingColorSpace),Se=""===C.colorSpace?null:St.getPrimaries(C.colorSpace),st=""===C.colorSpace||_e===Se?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,C.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,C.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);let le=m(C.image,!1,r.maxTextureSize);le=be(C,le);const Ee=s.convert(C.format,C.colorSpace),_t=s.convert(C.type);let Ae,Qe=v(C.internalFormat,Ee,_t,C.colorSpace,C.isVideoTexture);ge(se,C);const et=C.mipmaps,ot=!0!==C.isVideoTexture,ln=void 0===Le.__version||!0===ne,T=te.dataReady,V=x(C,le);if(C.isDepthTexture)Qe=_(C.format===nd,C.type),ln&&(ot?t.texStorage2D(n.TEXTURE_2D,1,Qe,le.width,le.height):t.texImage2D(n.TEXTURE_2D,0,Qe,le.width,le.height,0,Ee,_t,null));else if(C.isDataTexture)if(et.length>0){ot&&ln&&t.texStorage2D(n.TEXTURE_2D,V,Qe,et[0].width,et[0].height);for(let z=0,X=et.length;z<X;z++)Ae=et[z],ot?T&&t.texSubImage2D(n.TEXTURE_2D,z,0,0,Ae.width,Ae.height,Ee,_t,Ae.data):t.texImage2D(n.TEXTURE_2D,z,Qe,Ae.width,Ae.height,0,Ee,_t,Ae.data);C.generateMipmaps=!1}else ot?(ln&&t.texStorage2D(n.TEXTURE_2D,V,Qe,le.width,le.height),T&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,le.width,le.height,Ee,_t,le.data)):t.texImage2D(n.TEXTURE_2D,0,Qe,le.width,le.height,0,Ee,_t,le.data);else if(C.isCompressedTexture)if(C.isCompressedArrayTexture){ot&&ln&&t.texStorage3D(n.TEXTURE_2D_ARRAY,V,Qe,et[0].width,et[0].height,le.depth);for(let z=0,X=et.length;z<X;z++)if(Ae=et[z],C.format!==ur)if(null!==Ee)if(ot){if(T)if(C.layerUpdates.size>0){const ae=KS(Ae.width,Ae.height,C.format,C.type);for(const Fe of C.layerUpdates){const tt=Ae.data.subarray(Fe*ae/Ae.data.BYTES_PER_ELEMENT,(Fe+1)*ae/Ae.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,z,0,0,Fe,Ae.width,Ae.height,1,Ee,tt,0,0)}C.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,z,0,0,0,Ae.width,Ae.height,le.depth,Ee,Ae.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,z,Qe,Ae.width,Ae.height,le.depth,0,Ae.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ot?T&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,z,0,0,0,Ae.width,Ae.height,le.depth,Ee,_t,Ae.data):t.texImage3D(n.TEXTURE_2D_ARRAY,z,Qe,Ae.width,Ae.height,le.depth,0,Ee,_t,Ae.data)}else{ot&&ln&&t.texStorage2D(n.TEXTURE_2D,V,Qe,et[0].width,et[0].height);for(let z=0,X=et.length;z<X;z++)Ae=et[z],C.format!==ur?null!==Ee?ot?T&&t.compressedTexSubImage2D(n.TEXTURE_2D,z,0,0,Ae.width,Ae.height,Ee,Ae.data):t.compressedTexImage2D(n.TEXTURE_2D,z,Qe,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ot?T&&t.texSubImage2D(n.TEXTURE_2D,z,0,0,Ae.width,Ae.height,Ee,_t,Ae.data):t.texImage2D(n.TEXTURE_2D,z,Qe,Ae.width,Ae.height,0,Ee,_t,Ae.data)}else if(C.isDataArrayTexture)if(ot){if(ln&&t.texStorage3D(n.TEXTURE_2D_ARRAY,V,Qe,le.width,le.height,le.depth),T)if(C.layerUpdates.size>0){const z=KS(le.width,le.height,C.format,C.type);for(const X of C.layerUpdates){const ae=le.data.subarray(X*z/le.data.BYTES_PER_ELEMENT,(X+1)*z/le.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,X,le.width,le.height,1,Ee,_t,ae)}C.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,le.width,le.height,le.depth,Ee,_t,le.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Qe,le.width,le.height,le.depth,0,Ee,_t,le.data);else if(C.isData3DTexture)ot?(ln&&t.texStorage3D(n.TEXTURE_3D,V,Qe,le.width,le.height,le.depth),T&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,le.width,le.height,le.depth,Ee,_t,le.data)):t.texImage3D(n.TEXTURE_3D,0,Qe,le.width,le.height,le.depth,0,Ee,_t,le.data);else if(C.isFramebufferTexture){if(ln)if(ot)t.texStorage2D(n.TEXTURE_2D,V,Qe,le.width,le.height);else{let z=le.width,X=le.height;for(let ae=0;ae<V;ae++)t.texImage2D(n.TEXTURE_2D,ae,Qe,z,X,0,Ee,_t,null),z>>=1,X>>=1}}else if(et.length>0){if(ot&&ln){const z=Ce(et[0]);t.texStorage2D(n.TEXTURE_2D,V,Qe,z.width,z.height)}for(let z=0,X=et.length;z<X;z++)Ae=et[z],ot?T&&t.texSubImage2D(n.TEXTURE_2D,z,0,0,Ee,_t,Ae):t.texImage2D(n.TEXTURE_2D,z,Qe,Ee,_t,Ae);C.generateMipmaps=!1}else if(ot){if(ln){const z=Ce(le);t.texStorage2D(n.TEXTURE_2D,V,Qe,z.width,z.height)}T&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee,_t,le)}else t.texImage2D(n.TEXTURE_2D,0,Qe,Ee,_t,le);g(C)&&y(se),Le.__version=te.version,C.onUpdate&&C.onUpdate(C)}N.__version=C.version}function re(N,C,H,se,ne,te){const Le=s.convert(H.format,H.colorSpace),_e=s.convert(H.type),Se=v(H.internalFormat,Le,_e,H.colorSpace);if(!i.get(C).__hasExternalTextures){const le=Math.max(1,C.width>>te),Ee=Math.max(1,C.height>>te);ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY?t.texImage3D(ne,te,Se,le,Ee,C.depth,0,Le,_e,null):t.texImage2D(ne,te,Se,le,Ee,0,Le,_e,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),Q(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,se,ne,i.get(H).__webglTexture,0,xe(C)):(ne===n.TEXTURE_2D||ne>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ne<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,se,ne,i.get(H).__webglTexture,te),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ve(N,C,H){if(n.bindRenderbuffer(n.RENDERBUFFER,N),C.depthBuffer){const se=C.depthTexture,te=_(C.stencilBuffer,se&&se.isDepthTexture?se.type:null),Le=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,_e=xe(C);Q(C)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,te,C.width,C.height):H?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,te,C.width,C.height):n.renderbufferStorage(n.RENDERBUFFER,te,C.width,C.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Le,n.RENDERBUFFER,N)}else{const se=C.textures;for(let ne=0;ne<se.length;ne++){const te=se[ne],Le=s.convert(te.format,te.colorSpace),_e=s.convert(te.type),Se=v(te.internalFormat,Le,_e,te.colorSpace),st=xe(C);H&&!1===Q(C)?n.renderbufferStorageMultisample(n.RENDERBUFFER,st,Se,C.width,C.height):Q(C)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,st,Se,C.width,C.height):n.renderbufferStorage(n.RENDERBUFFER,Se,C.width,C.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ve(N){const C=i.get(N),H=!0===N.isWebGLCubeRenderTarget;if(N.depthTexture&&!C.__autoAllocateDepthBuffer){if(H)throw new Error("target.depthTexture not supported in Cube render targets");!function ye(N,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!C.depthTexture||!C.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(C.depthTexture).__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),B(C.depthTexture,0);const se=i.get(C.depthTexture).__webglTexture,ne=xe(C);if(C.depthTexture.format===td)Q(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,se,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,se,0);else{if(C.depthTexture.format!==nd)throw new Error("Unknown depthTexture format");Q(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,se,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,se,0)}}(C.__webglFramebuffer,N)}else if(H){C.__webglDepthbuffer=[];for(let se=0;se<6;se++)t.bindFramebuffer(n.FRAMEBUFFER,C.__webglFramebuffer[se]),C.__webglDepthbuffer[se]=n.createRenderbuffer(),ve(C.__webglDepthbuffer[se],N,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,C.__webglFramebuffer),C.__webglDepthbuffer=n.createRenderbuffer(),ve(C.__webglDepthbuffer,N,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}const R=[],ue=[];function xe(N){return Math.min(r.maxSamples,N.samples)}function Q(N){const C=i.get(N);return N.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==C.__useRenderToTexture}function be(N,C){const H=N.colorSpace,se=N.format,ne=N.type;return!0===N.isCompressedTexture||!0===N.isVideoTexture||H!==hi&&""!==H&&(St.getTransfer(H)===nn?(se!==ur||ne!==Ro)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",H)),C}function Ce(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(l.width=N.naturalWidth||N.width,l.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(l.width=N.displayWidth,l.height=N.displayHeight):(l.width=N.width,l.height=N.height),l}this.allocateTextureUnit=function L(){const N=w;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),w+=1,N},this.resetTextureUnits=function P(){w=0},this.setTexture2D=B,this.setTexture2DArray=function W(N,C){const H=i.get(N);N.version>0&&H.__version!==N.version?at(H,N,C):t.bindTexture(n.TEXTURE_2D_ARRAY,H.__webglTexture,n.TEXTURE0+C)},this.setTexture3D=function k(N,C){const H=i.get(N);N.version>0&&H.__version!==N.version?at(H,N,C):t.bindTexture(n.TEXTURE_3D,H.__webglTexture,n.TEXTURE0+C)},this.setTextureCube=function J(N,C){const H=i.get(N);N.version>0&&H.__version!==N.version?function q(N,C,H){if(6!==C.image.length)return;const se=je(N,C),ne=C.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+H);const te=i.get(ne);if(ne.version!==te.__version||!0===se){t.activeTexture(n.TEXTURE0+H);const Le=St.getPrimaries(St.workingColorSpace),_e=""===C.colorSpace?null:St.getPrimaries(C.colorSpace),Se=""===C.colorSpace||Le===_e?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,C.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,C.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Se);const st=C.isCompressedTexture||C.image[0].isCompressedTexture,le=C.image[0]&&C.image[0].isDataTexture,Ee=[];for(let X=0;X<6;X++)Ee[X]=st||le?le?C.image[X].image:C.image[X]:m(C.image[X],!0,r.maxCubemapSize),Ee[X]=be(C,Ee[X]);const _t=Ee[0],Qe=s.convert(C.format,C.colorSpace),Ae=s.convert(C.type),et=v(C.internalFormat,Qe,Ae,C.colorSpace),ot=!0!==C.isVideoTexture,ln=void 0===te.__version||!0===se,T=ne.dataReady;let z,V=x(C,_t);if(ge(n.TEXTURE_CUBE_MAP,C),st){ot&&ln&&t.texStorage2D(n.TEXTURE_CUBE_MAP,V,et,_t.width,_t.height);for(let X=0;X<6;X++){z=Ee[X].mipmaps;for(let ae=0;ae<z.length;ae++){const Fe=z[ae];C.format!==ur?null!==Qe?ot?T&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae,0,0,Fe.width,Fe.height,Qe,Fe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae,et,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ot?T&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae,0,0,Fe.width,Fe.height,Qe,Ae,Fe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae,et,Fe.width,Fe.height,0,Qe,Ae,Fe.data)}}}else{if(z=C.mipmaps,ot&&ln){z.length>0&&V++;const X=Ce(Ee[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,V,et,X.width,X.height)}for(let X=0;X<6;X++)if(le){ot?T&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,Ee[X].width,Ee[X].height,Qe,Ae,Ee[X].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,et,Ee[X].width,Ee[X].height,0,Qe,Ae,Ee[X].data);for(let ae=0;ae<z.length;ae++){const tt=z[ae].image[X].image;ot?T&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae+1,0,0,tt.width,tt.height,Qe,Ae,tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae+1,et,tt.width,tt.height,0,Qe,Ae,tt.data)}}else{ot?T&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,Qe,Ae,Ee[X]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,et,Qe,Ae,Ee[X]);for(let ae=0;ae<z.length;ae++){const Fe=z[ae];ot?T&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae+1,0,0,Qe,Ae,Fe.image[X]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae+1,et,Qe,Ae,Fe.image[X])}}}g(C)&&y(n.TEXTURE_CUBE_MAP),te.__version=ne.version,C.onUpdate&&C.onUpdate(C)}N.__version=C.version}(H,N,C):t.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+C)},this.rebindTextures=function Je(N,C,H){const se=i.get(N);void 0!==C&&re(se.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==H&&Ve(N)},this.setupRenderTarget=function Oe(N){const C=N.texture,H=i.get(N),se=i.get(C);N.addEventListener("dispose",b);const ne=N.textures,te=!0===N.isWebGLCubeRenderTarget,Le=ne.length>1;if(Le||(void 0===se.__webglTexture&&(se.__webglTexture=n.createTexture()),se.__version=C.version,o.memory.textures++),te){H.__webglFramebuffer=[];for(let _e=0;_e<6;_e++)if(C.mipmaps&&C.mipmaps.length>0){H.__webglFramebuffer[_e]=[];for(let Se=0;Se<C.mipmaps.length;Se++)H.__webglFramebuffer[_e][Se]=n.createFramebuffer()}else H.__webglFramebuffer[_e]=n.createFramebuffer()}else{if(C.mipmaps&&C.mipmaps.length>0){H.__webglFramebuffer=[];for(let _e=0;_e<C.mipmaps.length;_e++)H.__webglFramebuffer[_e]=n.createFramebuffer()}else H.__webglFramebuffer=n.createFramebuffer();if(Le)for(let _e=0,Se=ne.length;_e<Se;_e++){const st=i.get(ne[_e]);void 0===st.__webglTexture&&(st.__webglTexture=n.createTexture(),o.memory.textures++)}if(N.samples>0&&!1===Q(N)){H.__webglMultisampledFramebuffer=n.createFramebuffer(),H.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,H.__webglMultisampledFramebuffer);for(let _e=0;_e<ne.length;_e++){const Se=ne[_e];H.__webglColorRenderbuffer[_e]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,H.__webglColorRenderbuffer[_e]);const st=s.convert(Se.format,Se.colorSpace),le=s.convert(Se.type),Ee=v(Se.internalFormat,st,le,Se.colorSpace,!0===N.isXRRenderTarget),_t=xe(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,_t,Ee,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+_e,n.RENDERBUFFER,H.__webglColorRenderbuffer[_e])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(H.__webglDepthRenderbuffer=n.createRenderbuffer(),ve(H.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(te){t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture),ge(n.TEXTURE_CUBE_MAP,C);for(let _e=0;_e<6;_e++)if(C.mipmaps&&C.mipmaps.length>0)for(let Se=0;Se<C.mipmaps.length;Se++)re(H.__webglFramebuffer[_e][Se],N,C,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Se);else re(H.__webglFramebuffer[_e],N,C,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0);g(C)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Le){for(let _e=0,Se=ne.length;_e<Se;_e++){const st=ne[_e],le=i.get(st);t.bindTexture(n.TEXTURE_2D,le.__webglTexture),ge(n.TEXTURE_2D,st),re(H.__webglFramebuffer,N,st,n.COLOR_ATTACHMENT0+_e,n.TEXTURE_2D,0),g(st)&&y(n.TEXTURE_2D)}t.unbindTexture()}else{let _e=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(_e=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(_e,se.__webglTexture),ge(_e,C),C.mipmaps&&C.mipmaps.length>0)for(let Se=0;Se<C.mipmaps.length;Se++)re(H.__webglFramebuffer[Se],N,C,n.COLOR_ATTACHMENT0,_e,Se);else re(H.__webglFramebuffer,N,C,n.COLOR_ATTACHMENT0,_e,0);g(C)&&y(_e),t.unbindTexture()}N.depthBuffer&&Ve(N)},this.updateRenderTargetMipmap=function gt(N){const C=N.textures;for(let H=0,se=C.length;H<se;H++){const ne=C[H];if(g(ne)){const te=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Le=i.get(ne).__webglTexture;t.bindTexture(te,Le),y(te),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function oe(N){if(N.samples>0)if(!1===Q(N)){const C=N.textures,H=N.width,se=N.height;let ne=n.COLOR_BUFFER_BIT;const te=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=i.get(N),_e=C.length>1;if(_e)for(let Se=0;Se<C.length;Se++)t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Le.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglFramebuffer);for(let Se=0;Se<C.length;Se++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(ne|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(ne|=n.STENCIL_BUFFER_BIT)),_e){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Le.__webglColorRenderbuffer[Se]);const st=i.get(C[Se]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,st,0)}n.blitFramebuffer(0,0,H,se,0,0,H,se,ne,n.NEAREST),!0===c&&(R.length=0,ue.length=0,R.push(n.COLOR_ATTACHMENT0+Se),N.depthBuffer&&!1===N.resolveDepthBuffer&&(R.push(te),ue.push(te),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ue)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,R))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),_e)for(let Se=0;Se<C.length;Se++){t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.RENDERBUFFER,Le.__webglColorRenderbuffer[Se]);const st=i.get(C[Se]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.TEXTURE_2D,st,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglMultisampledFramebuffer)}else N.depthBuffer&&!1===N.resolveDepthBuffer&&c&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Ve,this.setupFrameBufferTexture=re,this.useMultisampledRTT=Q}function Tae(n,e){return{convert:function t(i,r=""){let s;const o=St.getTransfer(r);if(i===Ro)return n.UNSIGNED_BYTE;if(i===Vw)return n.UNSIGNED_SHORT_4_4_4_4;if(i===zw)return n.UNSIGNED_SHORT_5_5_5_1;if(i===gU)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===pU)return n.BYTE;if(i===mU)return n.SHORT;if(i===sp)return n.UNSIGNED_SHORT;if(i===Bw)return n.INT;if(i===wa)return n.UNSIGNED_INT;if(i===Cr)return n.FLOAT;if(i===op)return n.HALF_FLOAT;if(i===yU)return n.ALPHA;if(i===vU)return n.RGB;if(i===ur)return n.RGBA;if(i===_U)return n.LUMINANCE;if(i===xU)return n.LUMINANCE_ALPHA;if(i===td)return n.DEPTH_COMPONENT;if(i===nd)return n.DEPTH_STENCIL;if(i===Hw)return n.RED;if(i===av)return n.RED_INTEGER;if(i===MU)return n.RG;if(i===Gw)return n.RG_INTEGER;if(i===jw)return n.RGBA_INTEGER;if(i===cv||i===lv||i===uv||i===dv)if(o===nn){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===cv)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===lv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===uv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===dv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===cv)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===lv)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===uv)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===dv)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===Ww||i===$w||i===qw||i===Xw){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(i===Ww)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===$w)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===qw)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Xw)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Yw||i===Zw||i===Kw){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(i===Yw||i===Zw)return o===nn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Kw)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(i===Jw||i===Qw||i===eS||i===tS||i===nS||i===iS||i===rS||i===sS||i===oS||i===aS||i===cS||i===lS||i===uS||i===dS){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(i===Jw)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Qw)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===eS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===tS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===nS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===iS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===rS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===sS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===oS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===aS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===cS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===lS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===uS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===dS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===hv||i===hS||i===fS){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===hv)return o===nn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===hS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===fS)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===bU||i===pS||i===mS||i===gS){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===hv)return s.COMPRESSED_RED_RGTC1_EXT;if(i===pS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===mS)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===gS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===ed?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}class Cae extends ai{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ho extends Vt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Aae={type:"move"};class JS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ho,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ho,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new I,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new I),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ho,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new I,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new I),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i),y=this._getHandJoint(l,m);null!==g&&(y.matrix.fromArray(g.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=g.radius),y.visible=null!==g}const h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Aae)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new Ho;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Rae{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new wi;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Ks({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ht(new zo(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Pae extends No{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,p=null;const m=new Rae,g=t.getContextAttributes();let y=null,v=null;const _=[],x=[],S=new Z;let b=null;const E=new ai;E.layers.enable(1),E.viewport=new Bt;const A=new ai;A.layers.enable(2),A.viewport=new Bt;const M=[E,A],w=new Cae;w.layers.enable(1),w.layers.enable(2);let P=null,L=null;function O(q){const re=x.indexOf(q.inputSource);if(-1===re)return;const ve=_[re];void 0!==ve&&(ve.update(q.inputSource,q.frame,l||o),ve.dispatchEvent({type:q.type,data:q.inputSource}))}function B(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",B),r.removeEventListener("inputsourceschange",W);for(let q=0;q<_.length;q++){const re=x[q];null!==re&&(x[q]=null,_[q].disconnect(re))}P=null,L=null,m.reset(),e.setRenderTarget(y),f=null,h=null,d=null,r=null,v=null,at.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(S.width,S.height,!1),i.dispatchEvent({type:"sessionend"})}function W(q){for(let re=0;re<q.removed.length;re++){const ve=q.removed[re],ye=x.indexOf(ve);ye>=0&&(x[ye]=null,_[ye].disconnect(ve))}for(let re=0;re<q.added.length;re++){const ve=q.added[re];let ye=x.indexOf(ve);if(-1===ye){for(let Je=0;Je<_.length;Je++){if(Je>=x.length){x.push(ve),ye=Je;break}if(null===x[Je]){x[Je]=ve,ye=Je;break}}if(-1===ye)break}const Ve=_[ye];Ve&&Ve.connect(ve)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let re=_[q];return void 0===re&&(re=new JS,_[q]=re),re.getTargetRaySpace()},this.getControllerGrip=function(q){let re=_[q];return void 0===re&&(re=new JS,_[q]=re),re.getGripSpace()},this.getHand=function(q){let re=_[q];return void 0===re&&(re=new JS,_[q]=re),re.getHandSpace()},this.setFramebufferScaleFactor=function(q){s=q,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){a=q,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(q){l=q},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var q=xa(function*(re){if(r=re,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",B),r.addEventListener("inputsourceschange",W),!0!==g.xrCompatible&&(yield t.makeXRCompatible()),b=e.getPixelRatio(),e.getSize(S),void 0===r.renderState.layers)f=new XRWebGLLayer(r,t,{antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),v=new Zs(f.framebufferWidth,f.framebufferHeight,{format:ur,type:Ro,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil});else{let ve=null,ye=null,Ve=null;g.depth&&(Ve=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ve=g.stencil?nd:td,ye=g.stencil?ed:wa);const Je={colorFormat:t.RGBA8,depthFormat:Ve,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(Je),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new Zs(h.textureWidth,h.textureHeight,{format:ur,type:Ro,depthTexture:new uB(h.textureWidth,h.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,ve),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}v.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=yield r.requestReferenceSpace(a),at.setContext(r),at.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(re){return q.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};const k=new I,J=new I;function de(q,re){null===re?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(re.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(null===r)return;null!==m.texture&&(q.near=m.depthNear,q.far=m.depthFar),w.near=A.near=E.near=q.near,w.far=A.far=E.far=q.far,(P!==w.near||L!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),P=w.near,L=w.far,E.near=P,E.far=L,A.near=P,A.far=L,E.updateProjectionMatrix(),A.updateProjectionMatrix(),q.updateProjectionMatrix());const re=q.parent,ve=w.cameras;de(w,re);for(let ye=0;ye<ve.length;ye++)de(ve[ye],re);2===ve.length?function $(q,re,ve){k.setFromMatrixPosition(re.matrixWorld),J.setFromMatrixPosition(ve.matrixWorld);const ye=k.distanceTo(J),Ve=re.projectionMatrix.elements,Je=ve.projectionMatrix.elements,Oe=Ve[14]/(Ve[10]-1),gt=Ve[14]/(Ve[10]+1),R=(Ve[9]+1)/Ve[5],ue=(Ve[9]-1)/Ve[5],oe=(Ve[8]-1)/Ve[0],xe=(Je[8]+1)/Je[0],Q=Oe*oe,He=Oe*xe,be=ye/(-oe+xe),Ce=be*-oe;re.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Ce),q.translateZ(be),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const N=Oe+be,C=gt+be;q.projectionMatrix.makePerspective(Q-Ce,He+(ye-Ce),R*gt/C*N,ue*gt/C*N,N,C),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}(w,E,A):w.projectionMatrix.copy(E.projectionMatrix),function me(q,re,ve){null===ve?q.matrix.copy(re.matrixWorld):(q.matrix.copy(ve.matrixWorld),q.matrix.invert(),q.matrix.multiply(re.matrixWorld)),q.matrix.decompose(q.position,q.quaternion,q.scale),q.updateMatrixWorld(!0),q.projectionMatrix.copy(re.projectionMatrix),q.projectionMatrixInverse.copy(re.projectionMatrixInverse),q.isPerspectiveCamera&&(q.fov=2*od*Math.atan(1/q.projectionMatrix.elements[5]),q.zoom=1)}(q,w,re)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==h||null!==f)return c},this.setFoveation=function(q){c=q,null!==h&&(h.fixedFoveation=q),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=q)},this.hasDepthSensing=function(){return null!==m.texture},this.getDepthSensingMesh=function(){return m.getMesh(w)};let ge=null;const at=new nB;at.setAnimationLoop(function je(q,re){if(u=re.getViewerPose(l||o),p=re,null!==u){const ve=u.views;null!==f&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let ye=!1;ve.length!==w.cameras.length&&(w.cameras.length=0,ye=!0);for(let Je=0;Je<ve.length;Je++){const Oe=ve[Je];let gt=null;if(null!==f)gt=f.getViewport(Oe);else{const ue=d.getViewSubImage(h,Oe);gt=ue.viewport,0===Je&&(e.setRenderTargetTextures(v,ue.colorTexture,h.ignoreDepthValues?void 0:ue.depthStencilTexture),e.setRenderTarget(v))}let R=M[Je];void 0===R&&(R=new ai,R.layers.enable(Je),R.viewport=new Bt,M[Je]=R),R.matrix.fromArray(Oe.transform.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale),R.projectionMatrix.fromArray(Oe.projectionMatrix),R.projectionMatrixInverse.copy(R.projectionMatrix).invert(),R.viewport.set(gt.x,gt.y,gt.width,gt.height),0===Je&&(w.matrix.copy(R.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===ye&&w.cameras.push(R)}const Ve=r.enabledFeatures;if(Ve&&Ve.includes("depth-sensing")){const Je=d.getDepthInformation(ve[0]);Je&&Je.isValid&&Je.texture&&m.init(e,Je,r.renderState)}}for(let ve=0;ve<_.length;ve++){const ye=x[ve],Ve=_[ve];null!==ye&&void 0!==Ve&&Ve.update(ye,re,l||o)}ge&&ge(q,re),re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:re}),p=null}),this.setAnimationLoop=function(q){ge=q},this.dispose=function(){}}}const Yc=new Fo,Nae=new ze;function Oae(n,e){function t(g,y){!0===g.matrixAutoUpdate&&g.updateMatrix(),y.value.copy(g.matrix)}function s(g,y){g.opacity.value=y.opacity,y.color&&g.diffuse.value.copy(y.color),y.emissive&&g.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(g.map.value=y.map,t(y.map,g.mapTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,t(y.alphaMap,g.alphaMapTransform)),y.bumpMap&&(g.bumpMap.value=y.bumpMap,t(y.bumpMap,g.bumpMapTransform),g.bumpScale.value=y.bumpScale,1===y.side&&(g.bumpScale.value*=-1)),y.normalMap&&(g.normalMap.value=y.normalMap,t(y.normalMap,g.normalMapTransform),g.normalScale.value.copy(y.normalScale),1===y.side&&g.normalScale.value.negate()),y.displacementMap&&(g.displacementMap.value=y.displacementMap,t(y.displacementMap,g.displacementMapTransform),g.displacementScale.value=y.displacementScale,g.displacementBias.value=y.displacementBias),y.emissiveMap&&(g.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,g.emissiveMapTransform)),y.specularMap&&(g.specularMap.value=y.specularMap,t(y.specularMap,g.specularMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest);const v=e.get(y),_=v.envMap,x=v.envMapRotation;_&&(g.envMap.value=_,Yc.copy(x),Yc.x*=-1,Yc.y*=-1,Yc.z*=-1,_.isCubeTexture&&!1===_.isRenderTargetTexture&&(Yc.y*=-1,Yc.z*=-1),g.envMapRotation.value.setFromMatrix4(Nae.makeRotationFromEuler(Yc)),g.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,g.reflectivity.value=y.reflectivity,g.ior.value=y.ior,g.refractionRatio.value=y.refractionRatio),y.lightMap&&(g.lightMap.value=y.lightMap,g.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,g.lightMapTransform)),y.aoMap&&(g.aoMap.value=y.aoMap,g.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,g.aoMapTransform))}return{refreshFogUniforms:function i(g,y){y.color.getRGB(g.fogColor.value,QU(n)),y.isFog?(g.fogNear.value=y.near,g.fogFar.value=y.far):y.isFogExp2&&(g.fogDensity.value=y.density)},refreshMaterialUniforms:function r(g,y,v,_,x){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(g,y):y.isMeshToonMaterial?(s(g,y),function d(g,y){y.gradientMap&&(g.gradientMap.value=y.gradientMap)}(g,y)):y.isMeshPhongMaterial?(s(g,y),function u(g,y){g.specular.value.copy(y.specular),g.shininess.value=Math.max(y.shininess,1e-4)}(g,y)):y.isMeshStandardMaterial?(s(g,y),function h(g,y){g.metalness.value=y.metalness,y.metalnessMap&&(g.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,g.metalnessMapTransform)),g.roughness.value=y.roughness,y.roughnessMap&&(g.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,g.roughnessMapTransform)),y.envMap&&(g.envMapIntensity.value=y.envMapIntensity)}(g,y),y.isMeshPhysicalMaterial&&function f(g,y,v){g.ior.value=y.ior,y.sheen>0&&(g.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),g.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(g.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,g.sheenColorMapTransform)),y.sheenRoughnessMap&&(g.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,g.sheenRoughnessMapTransform))),y.clearcoat>0&&(g.clearcoat.value=y.clearcoat,g.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(g.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,g.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(g.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),1===y.side&&g.clearcoatNormalScale.value.negate())),y.dispersion>0&&(g.dispersion.value=y.dispersion),y.iridescence>0&&(g.iridescence.value=y.iridescence,g.iridescenceIOR.value=y.iridescenceIOR,g.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(g.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,g.iridescenceMapTransform)),y.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),y.transmission>0&&(g.transmission.value=y.transmission,g.transmissionSamplerMap.value=v.texture,g.transmissionSamplerSize.value.set(v.width,v.height),y.transmissionMap&&(g.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,g.transmissionMapTransform)),g.thickness.value=y.thickness,y.thicknessMap&&(g.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=y.attenuationDistance,g.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(g.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(g.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=y.specularIntensity,g.specularColor.value.copy(y.specularColor),y.specularColorMap&&(g.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,g.specularColorMapTransform)),y.specularIntensityMap&&(g.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,g.specularIntensityMapTransform))}(g,y,x)):y.isMeshMatcapMaterial?(s(g,y),function p(g,y){y.matcap&&(g.matcap.value=y.matcap)}(g,y)):y.isMeshDepthMaterial?s(g,y):y.isMeshDistanceMaterial?(s(g,y),function m(g,y){const v=e.get(y).light;g.referencePosition.value.setFromMatrixPosition(v.matrixWorld),g.nearDistance.value=v.shadow.camera.near,g.farDistance.value=v.shadow.camera.far}(g,y)):y.isMeshNormalMaterial?s(g,y):y.isLineBasicMaterial?(function o(g,y){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,y.map&&(g.map.value=y.map,t(y.map,g.mapTransform))}(g,y),y.isLineDashedMaterial&&function a(g,y){g.dashSize.value=y.dashSize,g.totalSize.value=y.dashSize+y.gapSize,g.scale.value=y.scale}(g,y)):y.isPointsMaterial?function c(g,y,v,_){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.size.value=y.size*v,g.scale.value=.5*_,y.map&&(g.map.value=y.map,t(y.map,g.uvTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,t(y.alphaMap,g.alphaMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest)}(g,y,v,_):y.isSpriteMaterial?function l(g,y){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.rotation.value=y.rotation,y.map&&(g.map.value=y.map,t(y.map,g.mapTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,t(y.alphaMap,g.alphaMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest)}(g,y):y.isShadowMaterial?(g.color.value.copy(y.color),g.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}}}function Lae(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(v,_,x,S){const b=v.value,E=_+"_"+x;if(void 0===S[E])return S[E]="number"==typeof b||"boolean"==typeof b?b:b.clone(),!0;{const A=S[E];if("number"==typeof b||"boolean"==typeof b){if(A!==b)return S[E]=b,!0}else if(!1===A.equals(b))return A.copy(b),!0}return!1}function m(v){const _={boundary:0,storage:0};return"number"==typeof v||"boolean"==typeof v?(_.boundary=4,_.storage=4):v.isVector2?(_.boundary=8,_.storage=8):v.isVector3||v.isColor?(_.boundary=16,_.storage=12):v.isVector4?(_.boundary=16,_.storage=16):v.isMatrix3?(_.boundary=48,_.storage=48):v.isMatrix4?(_.boundary=64,_.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),_}function g(v){const _=v.target;_.removeEventListener("dispose",g);const x=o.indexOf(_.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}return{bind:function c(v,_){i.uniformBlockBinding(v,_.program)},update:function l(v,_){let x=r[v.id];void 0===x&&(function p(v){const _=v.uniforms;let x=0;for(let E=0,A=_.length;E<A;E++){const M=Array.isArray(_[E])?_[E]:[_[E]];for(let w=0,P=M.length;w<P;w++){const L=M[w],O=Array.isArray(L.value)?L.value:[L.value];for(let B=0,W=O.length;B<W;B++){const J=m(O[B]),$=x%16,de=$%J.boundary,me=$+de;x+=de,0!==me&&16-me<J.storage&&(x+=16-me),L.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=x,x+=J.storage}}}const b=x%16;b>0&&(x+=16-b),v.__size=x,v.__cache={}}(v),x=function u(v){const _=function d(){for(let v=0;v<a;v++)if(-1===o.indexOf(v))return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();v.__bindingPointIndex=_;const x=n.createBuffer(),S=v.__size,b=v.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,S,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,x),x}(v),r[v.id]=x,v.addEventListener("dispose",g)),i.updateUBOMapping(v,_.program);const b=e.render.frame;s[v.id]!==b&&(function h(v){const x=v.uniforms,S=v.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[v.id]);for(let b=0,E=x.length;b<E;b++){const A=Array.isArray(x[b])?x[b]:[x[b]];for(let M=0,w=A.length;M<w;M++){const P=A[M];if(!0===f(P,b,M,S)){const L=P.__offset,O=Array.isArray(P.value)?P.value:[P.value];let B=0;for(let W=0;W<O.length;W++){const k=O[W],J=m(k);"number"==typeof k||"boolean"==typeof k?(P.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,L+B,P.__data)):k.isMatrix3?(P.__data[0]=k.elements[0],P.__data[1]=k.elements[1],P.__data[2]=k.elements[2],P.__data[3]=0,P.__data[4]=k.elements[3],P.__data[5]=k.elements[4],P.__data[6]=k.elements[5],P.__data[7]=0,P.__data[8]=k.elements[6],P.__data[9]=k.elements[7],P.__data[10]=k.elements[8],P.__data[11]=0):(k.toArray(P.__data,B),B+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,L,P.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(v),s[v.id]=b)},dispose:function y(){for(const v in r)n.deleteBuffer(r[v]);o=[],r={},s={}}}}class Fae{constructor(e={}){const{canvas:t=sie(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const f=new Uint32Array(4),p=new Int32Array(4);let m=null,g=null;const y=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Fn,this.toneMapping=ba,this.toneMappingExposure=1;const _=this;let x=!1,S=0,b=0,E=null,A=-1,M=null;const w=new Bt,P=new Bt;let L=null;const O=new fe(0);let B=0,W=t.width,k=t.height,J=1,$=null,de=null;const me=new Bt(0,0,W,k),ge=new Bt(0,0,W,k);let je=!1;const at=new Bv;let q=!1,re=!1;const ve=new ze,ye=new I,Ve=new Bt,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Oe=!1;function gt(){return null===E?J:1}let oe,xe,Q,He,be,Ce,N,C,H,se,ne,te,Le,_e,Se,st,le,Ee,_t,Qe,Ae,et,ot,ln,R=i;function ue(D,F){return t.getContext(D,F)}try{const D={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r167"),t.addEventListener("webglcontextlost",z,!1),t.addEventListener("webglcontextrestored",X,!1),t.addEventListener("webglcontextcreationerror",ae,!1),null===R){const F="webgl2";if(R=ue(F,D),null===R)throw ue(F)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}function T(){oe=new zse(R),oe.init(),et=new Tae(R,oe),xe=new Lse(R,oe,e,et),Q=new xae(R),He=new jse(R),be=new cae,Ce=new Sae(R,oe,Q,be,xe,et,He),N=new kse(_),C=new Vse(_),H=new Rie(R),ot=new Nse(R,H),se=new Hse(R,H,He,ot),ne=new $se(R,se,H,He),_t=new Wse(R,xe,Ce),st=new Fse(be),te=new aae(_,N,C,oe,xe,ot,st),Le=new Oae(_,be),_e=new uae,Se=new gae(oe),Ee=new Pse(_,N,C,Q,ne,h,c),le=new _ae(_,ne,xe),ln=new Lae(R,He,xe,Q),Qe=new Ose(R,oe,He),Ae=new Gse(R,oe,He),He.programs=te.programs,_.capabilities=xe,_.extensions=oe,_.properties=be,_.renderLists=_e,_.shadowMap=le,_.state=Q,_.info=He}T();const V=new Pae(_,R);function z(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function X(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const D=He.autoReset,F=le.enabled,G=le.autoUpdate,j=le.needsUpdate,U=le.type;T(),He.autoReset=D,le.enabled=F,le.autoUpdate=G,le.needsUpdate=j,le.type=U}function ae(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function Fe(D){const F=D.target;F.removeEventListener("dispose",Fe),function tt(D){(function An(D){const F=be.get(D).programs;void 0!==F&&(F.forEach(function(G){te.releaseProgram(G)}),D.isShaderMaterial&&te.releaseShaderCache(D))})(D),be.remove(D)}(F)}function Jn(D,F,G){!0===D.transparent&&2===D.side&&!1===D.forceSinglePass?(D.side=1,D.needsUpdate=!0,Y_(D,F,G),D.side=0,D.needsUpdate=!0,Y_(D,F,G),D.side=2):Y_(D,F,G)}this.xr=V,this.getContext=function(){return R},this.getContextAttributes=function(){return R.getContextAttributes()},this.forceContextLoss=function(){const D=oe.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=oe.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(D){void 0!==D&&(J=D,this.setSize(W,k,!1))},this.getSize=function(D){return D.set(W,k)},this.setSize=function(D,F,G=!0){V.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=D,k=F,t.width=Math.floor(D*J),t.height=Math.floor(F*J),!0===G&&(t.style.width=D+"px",t.style.height=F+"px"),this.setViewport(0,0,D,F))},this.getDrawingBufferSize=function(D){return D.set(W*J,k*J).floor()},this.setDrawingBufferSize=function(D,F,G){W=D,k=F,J=G,t.width=Math.floor(D*G),t.height=Math.floor(F*G),this.setViewport(0,0,D,F)},this.getCurrentViewport=function(D){return D.copy(w)},this.getViewport=function(D){return D.copy(me)},this.setViewport=function(D,F,G,j){D.isVector4?me.set(D.x,D.y,D.z,D.w):me.set(D,F,G,j),Q.viewport(w.copy(me).multiplyScalar(J).round())},this.getScissor=function(D){return D.copy(ge)},this.setScissor=function(D,F,G,j){D.isVector4?ge.set(D.x,D.y,D.z,D.w):ge.set(D,F,G,j),Q.scissor(P.copy(ge).multiplyScalar(J).round())},this.getScissorTest=function(){return je},this.setScissorTest=function(D){Q.setScissorTest(je=D)},this.setOpaqueSort=function(D){$=D},this.setTransparentSort=function(D){de=D},this.getClearColor=function(D){return D.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function(D=!0,F=!0,G=!0){let j=0;if(D){let U=!1;if(null!==E){const pe=E.texture.format;U=pe===jw||pe===Gw||pe===av}if(U){const pe=E.texture.type,we=pe===Ro||pe===wa||pe===sp||pe===ed||pe===Vw||pe===zw,Re=Ee.getClearColor(),Pe=Ee.getClearAlpha(),$e=Re.r,nt=Re.g,qe=Re.b;we?(f[0]=$e,f[1]=nt,f[2]=qe,f[3]=Pe,R.clearBufferuiv(R.COLOR,0,f)):(p[0]=$e,p[1]=nt,p[2]=qe,p[3]=Pe,R.clearBufferiv(R.COLOR,0,p))}else j|=R.COLOR_BUFFER_BIT}F&&(j|=R.DEPTH_BUFFER_BIT),G&&(j|=R.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),R.clear(j)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",z,!1),t.removeEventListener("webglcontextrestored",X,!1),t.removeEventListener("webglcontextcreationerror",ae,!1),_e.dispose(),Se.dispose(),be.dispose(),N.dispose(),C.dispose(),ne.dispose(),ot.dispose(),ln.dispose(),te.dispose(),V.dispose(),V.removeEventListener("sessionstart",Un),V.removeEventListener("sessionend",ja),fi.stop()},this.renderBufferDirect=function(D,F,G,j,U,pe){null===F&&(F=Je);const we=U.isMesh&&U.matrixWorld.determinant()<0,Re=function Bhe(D,F,G,j,U){!0!==F.isScene&&(F=Je),Ce.resetTextureUnits();const pe=F.fog,Re=null===E?_.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:hi,Pe=(j.isMeshStandardMaterial?C:N).get(j.envMap||(j.isMeshStandardMaterial?F.environment:null)),$e=!0===j.vertexColors&&!!G.attributes.color&&4===G.attributes.color.itemSize,nt=!!G.attributes.tangent&&(!!j.normalMap||j.anisotropy>0),qe=!!G.morphAttributes.position,Rt=!!G.morphAttributes.normal,rn=!!G.morphAttributes.color;let vn=ba;j.toneMapped&&(null===E||!0===E.isXRRenderTarget)&&(vn=_.toneMapping);const Nr=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,Nt=void 0!==Nr?Nr.length:0,Ue=be.get(j),pi=g.state.lights;!0!==q||!0!==re&&D===M||st.setState(j,D,D===M&&j.id===A);let Ot=!1;j.version===Ue.__version?(Ue.needsLights&&Ue.lightsStateVersion!==pi.state.version||Ue.outputColorSpace!==Re||U.isBatchedMesh&&!1===Ue.batching||!U.isBatchedMesh&&!0===Ue.batching||U.isBatchedMesh&&!0===Ue.batchingColor&&null===U.colorTexture||U.isBatchedMesh&&!1===Ue.batchingColor&&null!==U.colorTexture||U.isInstancedMesh&&!1===Ue.instancing||!U.isInstancedMesh&&!0===Ue.instancing||U.isSkinnedMesh&&!1===Ue.skinning||!U.isSkinnedMesh&&!0===Ue.skinning||U.isInstancedMesh&&!0===Ue.instancingColor&&null===U.instanceColor||U.isInstancedMesh&&!1===Ue.instancingColor&&null!==U.instanceColor||U.isInstancedMesh&&!0===Ue.instancingMorph&&null===U.morphTexture||U.isInstancedMesh&&!1===Ue.instancingMorph&&null!==U.morphTexture||Ue.envMap!==Pe||!0===j.fog&&Ue.fog!==pe||void 0!==Ue.numClippingPlanes&&(Ue.numClippingPlanes!==st.numPlanes||Ue.numIntersection!==st.numIntersection)||Ue.vertexAlphas!==$e||Ue.vertexTangents!==nt||Ue.morphTargets!==qe||Ue.morphNormals!==Rt||Ue.morphColors!==rn||Ue.toneMapping!==vn||Ue.morphTargetsCount!==Nt)&&(Ot=!0):(Ot=!0,Ue.__version=j.version);let ws=Ue.currentProgram;!0===Ot&&(ws=Y_(j,F,U));let Zd=!1,Or=!1,DC=!1;const Bn=ws.getUniforms(),Wa=Ue.uniforms;if(Q.useProgram(ws.program)&&(Zd=!0,Or=!0,DC=!0),j.id!==A&&(A=j.id,Or=!0),Zd||M!==D){Bn.setValue(R,"projectionMatrix",D.projectionMatrix),Bn.setValue(R,"viewMatrix",D.matrixWorldInverse);const Kr=Bn.map.cameraPosition;void 0!==Kr&&Kr.setValue(R,ye.setFromMatrixPosition(D.matrixWorld)),xe.logarithmicDepthBuffer&&Bn.setValue(R,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial)&&Bn.setValue(R,"isOrthographic",!0===D.isOrthographicCamera),M!==D&&(M=D,Or=!0,DC=!0)}if(U.isSkinnedMesh){Bn.setOptional(R,U,"bindMatrix"),Bn.setOptional(R,U,"bindMatrixInverse");const Kr=U.skeleton;Kr&&(null===Kr.boneTexture&&Kr.computeBoneTexture(),Bn.setValue(R,"boneTexture",Kr.boneTexture,Ce))}U.isBatchedMesh&&(Bn.setOptional(R,U,"batchingTexture"),Bn.setValue(R,"batchingTexture",U._matricesTexture,Ce),Bn.setOptional(R,U,"batchingIdTexture"),Bn.setValue(R,"batchingIdTexture",U._indirectTexture,Ce),Bn.setOptional(R,U,"batchingColorTexture"),null!==U._colorsTexture&&Bn.setValue(R,"batchingColorTexture",U._colorsTexture,Ce));const IC=G.morphAttributes;if((void 0!==IC.position||void 0!==IC.normal||void 0!==IC.color)&&_t.update(U,G,ws),(Or||Ue.receiveShadow!==U.receiveShadow)&&(Ue.receiveShadow=U.receiveShadow,Bn.setValue(R,"receiveShadow",U.receiveShadow)),j.isMeshGouraudMaterial&&null!==j.envMap&&(Wa.envMap.value=Pe,Wa.flipEnvMap.value=Pe.isCubeTexture&&!1===Pe.isRenderTargetTexture?-1:1),j.isMeshStandardMaterial&&null===j.envMap&&null!==F.environment&&(Wa.envMapIntensity.value=F.environmentIntensity),Or&&(Bn.setValue(R,"toneMappingExposure",_.toneMappingExposure),Ue.needsLights&&function Vhe(D,F){D.ambientLightColor.needsUpdate=F,D.lightProbe.needsUpdate=F,D.directionalLights.needsUpdate=F,D.directionalLightShadows.needsUpdate=F,D.pointLights.needsUpdate=F,D.pointLightShadows.needsUpdate=F,D.spotLights.needsUpdate=F,D.spotLightShadows.needsUpdate=F,D.rectAreaLights.needsUpdate=F,D.hemisphereLights.needsUpdate=F}(Wa,DC),pe&&!0===j.fog&&Le.refreshFogUniforms(Wa,pe),Le.refreshMaterialUniforms(Wa,j,J,k,g.state.transmissionRenderTarget[D.id]),Gv.upload(R,zz(Ue),Wa,Ce)),j.isShaderMaterial&&!0===j.uniformsNeedUpdate&&(Gv.upload(R,zz(Ue),Wa,Ce),j.uniformsNeedUpdate=!1),j.isSpriteMaterial&&Bn.setValue(R,"center",U.center),Bn.setValue(R,"modelViewMatrix",U.modelViewMatrix),Bn.setValue(R,"normalMatrix",U.normalMatrix),Bn.setValue(R,"modelMatrix",U.matrixWorld),j.isShaderMaterial||j.isRawShaderMaterial){const Kr=j.uniformsGroups;for(let RC=0,Hhe=Kr.length;RC<Hhe;RC++){const Gz=Kr[RC];ln.update(Gz,ws),ln.bind(Gz,ws)}}return ws}(D,F,G,j,U);Q.setMaterial(j,we);let Pe=G.index,$e=1;if(!0===j.wireframe){if(Pe=se.getWireframeAttribute(G),void 0===Pe)return;$e=2}const nt=G.drawRange,qe=G.attributes.position;let Rt=nt.start*$e,rn=(nt.start+nt.count)*$e;null!==pe&&(Rt=Math.max(Rt,pe.start*$e),rn=Math.min(rn,(pe.start+pe.count)*$e)),null!==Pe?(Rt=Math.max(Rt,0),rn=Math.min(rn,Pe.count)):null!=qe&&(Rt=Math.max(Rt,0),rn=Math.min(rn,qe.count));const vn=rn-Rt;if(vn<0||vn===1/0)return;ot.setup(U,j,Re,G,Pe);let Nr,Nt=Qe;if(null!==Pe&&(Nr=H.get(Pe),Nt=Ae,Nt.setIndex(Nr)),U.isMesh)!0===j.wireframe?(Q.setLineWidth(j.wireframeLinewidth*gt()),Nt.setMode(R.LINES)):Nt.setMode(R.TRIANGLES);else if(U.isLine){let Ue=j.linewidth;void 0===Ue&&(Ue=1),Q.setLineWidth(Ue*gt()),Nt.setMode(U.isLineSegments?R.LINES:U.isLineLoop?R.LINE_LOOP:R.LINE_STRIP)}else U.isPoints?Nt.setMode(R.POINTS):U.isSprite&&Nt.setMode(R.TRIANGLES);if(U.isBatchedMesh)if(null!==U._multiDrawInstances)Nt.renderMultiDrawInstances(U._multiDrawStarts,U._multiDrawCounts,U._multiDrawCount,U._multiDrawInstances);else if(oe.get("WEBGL_multi_draw"))Nt.renderMultiDraw(U._multiDrawStarts,U._multiDrawCounts,U._multiDrawCount);else{const Ue=U._multiDrawStarts,pi=U._multiDrawCounts,Ot=U._multiDrawCount,ws=Pe?H.get(Pe).bytesPerElement:1,Zd=be.get(j).currentProgram.getUniforms();for(let Or=0;Or<Ot;Or++)Zd.setValue(R,"_gl_DrawID",Or),Nt.render(Ue[Or]/ws,pi[Or])}else if(U.isInstancedMesh)Nt.renderInstances(Rt,vn,U.count);else if(G.isInstancedBufferGeometry){const pi=Math.min(G.instanceCount,void 0!==G._maxInstanceCount?G._maxInstanceCount:1/0);Nt.renderInstances(Rt,vn,pi)}else Nt.render(Rt,vn)},this.compile=function(D,F,G=null){null===G&&(G=D),g=Se.get(G),g.init(F),v.push(g),G.traverseVisible(function(U){U.isLight&&U.layers.test(F.layers)&&(g.pushLight(U),U.castShadow&&g.pushShadow(U))}),D!==G&&D.traverseVisible(function(U){U.isLight&&U.layers.test(F.layers)&&(g.pushLight(U),U.castShadow&&g.pushShadow(U))}),g.setupLights();const j=new Set;return D.traverse(function(U){const pe=U.material;if(pe)if(Array.isArray(pe))for(let we=0;we<pe.length;we++){const Re=pe[we];Jn(Re,G,U),j.add(Re)}else Jn(pe,G,U),j.add(pe)}),v.pop(),g=null,j},this.compileAsync=function(D,F,G=null){const j=this.compile(D,F,G);return new Promise(U=>{function pe(){j.forEach(function(we){be.get(we).currentProgram.isReady()&&j.delete(we)}),0!==j.size?setTimeout(pe,10):U(D)}null!==oe.get("KHR_parallel_shader_compile")?pe():setTimeout(pe,10)})};let Tt=null;function Un(){fi.stop()}function ja(){fi.start()}const fi=new nB;function Xo(D,F,G,j){if(!1===D.visible)return;if(D.layers.test(F.layers))if(D.isGroup)G=D.renderOrder;else if(D.isLOD)!0===D.autoUpdate&&D.update(F);else if(D.isLight)g.pushLight(D),D.castShadow&&g.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||at.intersectsSprite(D)){j&&Ve.setFromMatrixPosition(D.matrixWorld).applyMatrix4(ve);const we=ne.update(D),Re=D.material;Re.visible&&m.push(D,we,Re,G,Ve.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||at.intersectsObject(D))){const we=ne.update(D),Re=D.material;if(j&&(void 0!==D.boundingSphere?(null===D.boundingSphere&&D.computeBoundingSphere(),Ve.copy(D.boundingSphere.center)):(null===we.boundingSphere&&we.computeBoundingSphere(),Ve.copy(we.boundingSphere.center)),Ve.applyMatrix4(D.matrixWorld).applyMatrix4(ve)),Array.isArray(Re)){const Pe=we.groups;for(let $e=0,nt=Pe.length;$e<nt;$e++){const qe=Pe[$e],Rt=Re[qe.materialIndex];Rt&&Rt.visible&&m.push(D,we,Rt,G,Ve.z,qe)}}else Re.visible&&m.push(D,we,Re,G,Ve.z,null)}const pe=D.children;for(let we=0,Re=pe.length;we<Re;we++)Xo(pe[we],F,G,j)}function pl(D,F,G,j){const U=D.opaque,pe=D.transmissive,we=D.transparent;g.setupLightsView(G),!0===q&&st.setGlobalState(_.clippingPlanes,G),j&&Q.viewport(w.copy(j)),U.length>0&&X_(U,F,G),pe.length>0&&X_(pe,F,G),we.length>0&&X_(we,F,G),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function qp(D,F,G,j){if(null!==(!0===G.isScene?G.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[j.id]&&(g.state.transmissionRenderTarget[j.id]=new Zs(1,1,{generateMipmaps:!0,type:oe.has("EXT_color_buffer_half_float")||oe.has("EXT_color_buffer_float")?op:Ro,minFilter:_s,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:St.workingColorSpace}));const pe=g.state.transmissionRenderTarget[j.id],we=j.viewport||w;pe.setSize(we.z,we.w);const Re=_.getRenderTarget();_.setRenderTarget(pe),_.getClearColor(O),B=_.getClearAlpha(),B<1&&_.setClearColor(16777215,.5),_.clear(),Oe&&Ee.render(G);const Pe=_.toneMapping;_.toneMapping=ba;const $e=j.viewport;if(void 0!==j.viewport&&(j.viewport=void 0),g.setupLightsView(j),!0===q&&st.setGlobalState(_.clippingPlanes,j),X_(D,G,j),Ce.updateMultisampleRenderTarget(pe),Ce.updateRenderTargetMipmap(pe),!1===oe.has("WEBGL_multisampled_render_to_texture")){let nt=!1;for(let qe=0,Rt=F.length;qe<Rt;qe++){const rn=F[qe],vn=rn.object,Nr=rn.geometry,Nt=rn.material,Ue=rn.group;if(2===Nt.side&&vn.layers.test(j.layers)){const pi=Nt.side;Nt.side=1,Nt.needsUpdate=!0,Vz(vn,G,j,Nr,Nt,Ue),Nt.side=pi,Nt.needsUpdate=!0,nt=!0}}!0===nt&&(Ce.updateMultisampleRenderTarget(pe),Ce.updateRenderTargetMipmap(pe))}_.setRenderTarget(Re),_.setClearColor(O,B),void 0!==$e&&(j.viewport=$e),_.toneMapping=Pe}function X_(D,F,G){const j=!0===F.isScene?F.overrideMaterial:null;for(let U=0,pe=D.length;U<pe;U++){const we=D[U],Re=we.object,Pe=we.geometry,$e=null===j?we.material:j,nt=we.group;Re.layers.test(G.layers)&&Vz(Re,F,G,Pe,$e,nt)}}function Vz(D,F,G,j,U,pe){D.onBeforeRender(_,F,G,j,U,pe),D.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),!0===U.transparent&&2===U.side&&!1===U.forceSinglePass?(U.side=1,U.needsUpdate=!0,_.renderBufferDirect(G,F,j,U,D,pe),U.side=0,U.needsUpdate=!0,_.renderBufferDirect(G,F,j,U,D,pe),U.side=2):_.renderBufferDirect(G,F,j,U,D,pe),D.onAfterRender(_,F,G,j,U,pe)}function Y_(D,F,G){!0!==F.isScene&&(F=Je);const j=be.get(D),U=g.state.lights,we=U.state.version,Re=te.getParameters(D,U.state,g.state.shadowsArray,F,G),Pe=te.getProgramCacheKey(Re);let $e=j.programs;j.environment=D.isMeshStandardMaterial?F.environment:null,j.fog=F.fog,j.envMap=(D.isMeshStandardMaterial?C:N).get(D.envMap||j.environment),j.envMapRotation=null!==j.environment&&null===D.envMap?F.environmentRotation:D.envMapRotation,void 0===$e&&(D.addEventListener("dispose",Fe),$e=new Map,j.programs=$e);let nt=$e.get(Pe);if(void 0!==nt){if(j.currentProgram===nt&&j.lightsStateVersion===we)return Hz(D,Re),nt}else Re.uniforms=te.getUniforms(D),D.onBeforeCompile(Re,_),nt=te.acquireProgram(Re,Pe),$e.set(Pe,nt),j.uniforms=Re.uniforms;const qe=j.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||!0===D.clipping)&&(qe.clippingPlanes=st.uniform),Hz(D,Re),j.needsLights=function zhe(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&!0===D.lights}(D),j.lightsStateVersion=we,j.needsLights&&(qe.ambientLightColor.value=U.state.ambient,qe.lightProbe.value=U.state.probe,qe.directionalLights.value=U.state.directional,qe.directionalLightShadows.value=U.state.directionalShadow,qe.spotLights.value=U.state.spot,qe.spotLightShadows.value=U.state.spotShadow,qe.rectAreaLights.value=U.state.rectArea,qe.ltc_1.value=U.state.rectAreaLTC1,qe.ltc_2.value=U.state.rectAreaLTC2,qe.pointLights.value=U.state.point,qe.pointLightShadows.value=U.state.pointShadow,qe.hemisphereLights.value=U.state.hemi,qe.directionalShadowMap.value=U.state.directionalShadowMap,qe.directionalShadowMatrix.value=U.state.directionalShadowMatrix,qe.spotShadowMap.value=U.state.spotShadowMap,qe.spotLightMatrix.value=U.state.spotLightMatrix,qe.spotLightMap.value=U.state.spotLightMap,qe.pointShadowMap.value=U.state.pointShadowMap,qe.pointShadowMatrix.value=U.state.pointShadowMatrix),j.currentProgram=nt,j.uniformsList=null,nt}function zz(D){if(null===D.uniformsList){const F=D.currentProgram.getUniforms();D.uniformsList=Gv.seqWithValue(F.seq,D.uniforms)}return D.uniformsList}function Hz(D,F){const G=be.get(D);G.outputColorSpace=F.outputColorSpace,G.batching=F.batching,G.batchingColor=F.batchingColor,G.instancing=F.instancing,G.instancingColor=F.instancingColor,G.instancingMorph=F.instancingMorph,G.skinning=F.skinning,G.morphTargets=F.morphTargets,G.morphNormals=F.morphNormals,G.morphColors=F.morphColors,G.morphTargetsCount=F.morphTargetsCount,G.numClippingPlanes=F.numClippingPlanes,G.numIntersection=F.numClipIntersection,G.vertexAlphas=F.vertexAlphas,G.vertexTangents=F.vertexTangents,G.toneMapping=F.toneMapping}fi.setAnimationLoop(function Qn(D){Tt&&Tt(D)}),typeof self<"u"&&fi.setContext(self),this.setAnimationLoop=function(D){Tt=D,V.setAnimationLoop(D),null===D?fi.stop():fi.start()},V.addEventListener("sessionstart",Un),V.addEventListener("sessionend",ja),this.render=function(D,F){if(void 0!==F&&!0!==F.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;if(!0===D.matrixWorldAutoUpdate&&D.updateMatrixWorld(),null===F.parent&&!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),!0===V.enabled&&!0===V.isPresenting&&(!0===V.cameraAutoUpdate&&V.updateCamera(F),F=V.getCamera()),!0===D.isScene&&D.onBeforeRender(_,D,F,E),g=Se.get(D,v.length),g.init(F),v.push(g),ve.multiplyMatrices(F.projectionMatrix,F.matrixWorldInverse),at.setFromProjectionMatrix(ve),re=this.localClippingEnabled,q=st.init(this.clippingPlanes,re),m=_e.get(D,y.length),m.init(),y.push(m),!0===V.enabled&&!0===V.isPresenting){const pe=_.xr.getDepthSensingMesh();null!==pe&&Xo(pe,F,-1/0,_.sortObjects)}Xo(D,F,0,_.sortObjects),m.finish(),!0===_.sortObjects&&m.sort($,de),Oe=!1===V.enabled||!1===V.isPresenting||!1===V.hasDepthSensing(),Oe&&Ee.addToRenderList(m,D),this.info.render.frame++,!0===q&&st.beginShadows(),le.render(g.state.shadowsArray,D,F),!0===q&&st.endShadows(),!0===this.info.autoReset&&this.info.reset();const j=m.opaque,U=m.transmissive;if(g.setupLights(),F.isArrayCamera){const pe=F.cameras;if(U.length>0)for(let we=0,Re=pe.length;we<Re;we++)qp(j,U,D,pe[we]);Oe&&Ee.render(D);for(let we=0,Re=pe.length;we<Re;we++){const Pe=pe[we];pl(m,D,Pe,Pe.viewport)}}else U.length>0&&qp(j,U,D,F),Oe&&Ee.render(D),pl(m,D,F);null!==E&&(Ce.updateMultisampleRenderTarget(E),Ce.updateRenderTargetMipmap(E)),!0===D.isScene&&D.onAfterRender(_,D,F),ot.resetDefaultState(),A=-1,M=null,v.pop(),v.length>0?(g=v[v.length-1],!0===q&&st.setGlobalState(_.clippingPlanes,g.state.camera)):g=null,y.pop(),m=y.length>0?y[y.length-1]:null},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(D,F,G){be.get(D.texture).__webglTexture=F,be.get(D.depthTexture).__webglTexture=G;const j=be.get(D);j.__hasExternalTextures=!0,j.__autoAllocateDepthBuffer=void 0===G,j.__autoAllocateDepthBuffer||!0===oe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),j.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,F){const G=be.get(D);G.__webglFramebuffer=F,G.__useDefaultFramebuffer=void 0===F},this.setRenderTarget=function(D,F=0,G=0){E=D,S=F,b=G;let j=!0,U=null,pe=!1,we=!1;if(D){const Pe=be.get(D);void 0!==Pe.__useDefaultFramebuffer?(Q.bindFramebuffer(R.FRAMEBUFFER,null),j=!1):void 0===Pe.__webglFramebuffer?Ce.setupRenderTarget(D):Pe.__hasExternalTextures&&Ce.rebindTextures(D,be.get(D.texture).__webglTexture,be.get(D.depthTexture).__webglTexture);const $e=D.texture;($e.isData3DTexture||$e.isDataArrayTexture||$e.isCompressedArrayTexture)&&(we=!0);const nt=be.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(U=Array.isArray(nt[F])?nt[F][G]:nt[F],pe=!0):U=D.samples>0&&!1===Ce.useMultisampledRTT(D)?be.get(D).__webglMultisampledFramebuffer:Array.isArray(nt)?nt[G]:nt,w.copy(D.viewport),P.copy(D.scissor),L=D.scissorTest}else w.copy(me).multiplyScalar(J).floor(),P.copy(ge).multiplyScalar(J).floor(),L=je;if(Q.bindFramebuffer(R.FRAMEBUFFER,U)&&j&&Q.drawBuffers(D,U),Q.viewport(w),Q.scissor(P),Q.setScissorTest(L),pe){const Pe=be.get(D.texture);R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_CUBE_MAP_POSITIVE_X+F,Pe.__webglTexture,G)}else if(we){const Pe=be.get(D.texture);R.framebufferTextureLayer(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,Pe.__webglTexture,G||0,F||0)}A=-1},this.readRenderTargetPixels=function(D,F,G,j,U,pe,we){if(!D||!D.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Re=be.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&void 0!==we&&(Re=Re[we]),Re){Q.bindFramebuffer(R.FRAMEBUFFER,Re);try{const Pe=D.texture,$e=Pe.format,nt=Pe.type;if(!xe.textureFormatReadable($e))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!xe.textureTypeReadable(nt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");F>=0&&F<=D.width-j&&G>=0&&G<=D.height-U&&R.readPixels(F,G,j,U,et.convert($e),et.convert(nt),pe)}finally{const Pe=null!==E?be.get(E).__webglFramebuffer:null;Q.bindFramebuffer(R.FRAMEBUFFER,Pe)}}},this.readRenderTargetPixelsAsync=function(){var D=xa(function*(F,G,j,U,pe,we,Re){if(!F||!F.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Pe=be.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&void 0!==Re&&(Pe=Pe[Re]),Pe){Q.bindFramebuffer(R.FRAMEBUFFER,Pe);try{const $e=F.texture,nt=$e.format,qe=$e.type;if(!xe.textureFormatReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!xe.textureTypeReadable(qe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(G>=0&&G<=F.width-U&&j>=0&&j<=F.height-pe){const Rt=R.createBuffer();R.bindBuffer(R.PIXEL_PACK_BUFFER,Rt),R.bufferData(R.PIXEL_PACK_BUFFER,we.byteLength,R.STREAM_READ),R.readPixels(G,j,U,pe,et.convert(nt),et.convert(qe),0),R.flush();const rn=R.fenceSync(R.SYNC_GPU_COMMANDS_COMPLETE,0);yield function oie(n,e,t){return new Promise(function(i,r){setTimeout(function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}},t)})}(R,rn,4);try{R.bindBuffer(R.PIXEL_PACK_BUFFER,Rt),R.getBufferSubData(R.PIXEL_PACK_BUFFER,0,we)}finally{R.deleteBuffer(Rt),R.deleteSync(rn)}return we}}finally{const $e=null!==E?be.get(E).__webglFramebuffer:null;Q.bindFramebuffer(R.FRAMEBUFFER,$e)}}});return function(F,G,j,U,pe,we,Re){return D.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(D,F=null,G=0){!0!==D.isTexture&&(cd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),F=arguments[0]||null,D=arguments[1]);const j=Math.pow(2,-G),U=Math.floor(D.image.width*j),pe=Math.floor(D.image.height*j),we=null!==F?F.x:0,Re=null!==F?F.y:0;Ce.setTexture2D(D,0),R.copyTexSubImage2D(R.TEXTURE_2D,G,0,0,we,Re,U,pe),Q.unbindTexture()},this.copyTextureToTexture=function(D,F,G=null,j=null,U=0){let pe,we,Re,Pe,$e,nt;!0!==D.isTexture&&(cd("WebGLRenderer: copyTextureToTexture function signature has changed."),j=arguments[0]||null,D=arguments[1],F=arguments[2],U=arguments[3]||0,G=null),null!==G?(pe=G.max.x-G.min.x,we=G.max.y-G.min.y,Re=G.min.x,Pe=G.min.y):(pe=D.image.width,we=D.image.height,Re=0,Pe=0),null!==j?($e=j.x,nt=j.y):($e=0,nt=0);const qe=et.convert(F.format),Rt=et.convert(F.type);Ce.setTexture2D(F,0),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,F.flipY),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),R.pixelStorei(R.UNPACK_ALIGNMENT,F.unpackAlignment);const rn=R.getParameter(R.UNPACK_ROW_LENGTH),vn=R.getParameter(R.UNPACK_IMAGE_HEIGHT),Nr=R.getParameter(R.UNPACK_SKIP_PIXELS),Nt=R.getParameter(R.UNPACK_SKIP_ROWS),Ue=R.getParameter(R.UNPACK_SKIP_IMAGES),pi=D.isCompressedTexture?D.mipmaps[U]:D.image;R.pixelStorei(R.UNPACK_ROW_LENGTH,pi.width),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,pi.height),R.pixelStorei(R.UNPACK_SKIP_PIXELS,Re),R.pixelStorei(R.UNPACK_SKIP_ROWS,Pe),D.isDataTexture?R.texSubImage2D(R.TEXTURE_2D,U,$e,nt,pe,we,qe,Rt,pi.data):D.isCompressedTexture?R.compressedTexSubImage2D(R.TEXTURE_2D,U,$e,nt,pi.width,pi.height,qe,pi.data):R.texSubImage2D(R.TEXTURE_2D,U,$e,nt,pe,we,qe,Rt,pi),R.pixelStorei(R.UNPACK_ROW_LENGTH,rn),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,vn),R.pixelStorei(R.UNPACK_SKIP_PIXELS,Nr),R.pixelStorei(R.UNPACK_SKIP_ROWS,Nt),R.pixelStorei(R.UNPACK_SKIP_IMAGES,Ue),0===U&&F.generateMipmaps&&R.generateMipmap(R.TEXTURE_2D),Q.unbindTexture()},this.copyTextureToTexture3D=function(D,F,G=null,j=null,U=0){let pe,we,Re,Pe,$e,nt,qe,Rt,rn;!0!==D.isTexture&&(cd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),G=arguments[0]||null,j=arguments[1]||null,D=arguments[2],F=arguments[3],U=arguments[4]||0);const vn=D.isCompressedTexture?D.mipmaps[U]:D.image;null!==G?(pe=G.max.x-G.min.x,we=G.max.y-G.min.y,Re=G.max.z-G.min.z,Pe=G.min.x,$e=G.min.y,nt=G.min.z):(pe=vn.width,we=vn.height,Re=vn.depth,Pe=0,$e=0,nt=0),null!==j?(qe=j.x,Rt=j.y,rn=j.z):(qe=0,Rt=0,rn=0);const Nr=et.convert(F.format),Nt=et.convert(F.type);let Ue;if(F.isData3DTexture)Ce.setTexture3D(F,0),Ue=R.TEXTURE_3D;else{if(!F.isDataArrayTexture&&!F.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ce.setTexture2DArray(F,0),Ue=R.TEXTURE_2D_ARRAY}R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,F.flipY),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),R.pixelStorei(R.UNPACK_ALIGNMENT,F.unpackAlignment);const pi=R.getParameter(R.UNPACK_ROW_LENGTH),Ot=R.getParameter(R.UNPACK_IMAGE_HEIGHT),ws=R.getParameter(R.UNPACK_SKIP_PIXELS),Zd=R.getParameter(R.UNPACK_SKIP_ROWS),Or=R.getParameter(R.UNPACK_SKIP_IMAGES);R.pixelStorei(R.UNPACK_ROW_LENGTH,vn.width),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,vn.height),R.pixelStorei(R.UNPACK_SKIP_PIXELS,Pe),R.pixelStorei(R.UNPACK_SKIP_ROWS,$e),R.pixelStorei(R.UNPACK_SKIP_IMAGES,nt),D.isDataTexture||D.isData3DTexture?R.texSubImage3D(Ue,U,qe,Rt,rn,pe,we,Re,Nr,Nt,vn.data):F.isCompressedArrayTexture?R.compressedTexSubImage3D(Ue,U,qe,Rt,rn,pe,we,Re,Nr,vn.data):R.texSubImage3D(Ue,U,qe,Rt,rn,pe,we,Re,Nr,Nt,vn),R.pixelStorei(R.UNPACK_ROW_LENGTH,pi),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,Ot),R.pixelStorei(R.UNPACK_SKIP_PIXELS,ws),R.pixelStorei(R.UNPACK_SKIP_ROWS,Zd),R.pixelStorei(R.UNPACK_SKIP_IMAGES,Or),0===U&&F.generateMipmaps&&R.generateMipmap(Ue),Q.unbindTexture()},this.initRenderTarget=function(D){void 0===be.get(D).__webglFramebuffer&&Ce.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?Ce.setTextureCube(D,0):D.isData3DTexture?Ce.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Ce.setTexture2DArray(D,0):Ce.setTexture2D(D,0),Q.unbindTexture()},this.resetState=function(){S=0,b=0,E=null,Q.reset(),ot.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Po}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===xS?"display-p3":"srgb",t.unpackColorSpace=St.workingColorSpace===pv?"display-p3":"srgb"}}class NB extends Vt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Fo,this.environmentIntensity=1,this.environmentRotation=new Fo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Wv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ar()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return cd("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ar()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ar()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $i=new I;class Zc{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)$i.fromBufferAttribute(this,t),$i.applyMatrix4(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)$i.fromBufferAttribute(this,t),$i.applyNormalMatrix(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)$i.fromBufferAttribute(this,t),$i.transformDirection(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Gi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ct(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Gi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Gi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Gi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Gi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array),s=ct(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Pt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class tT extends ri{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new fe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Pd;const _p=new I,Nd=new I,Od=new I,Ld=new Z,xp=new Z,OB=new ze,$v=new I,Mp=new I,qv=new I,LB=new Z,nT=new Z,FB=new Z;class kB extends Vt{constructor(e=new tT){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Pd){Pd=new ft;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Wv(t,5);Pd.setIndex([0,1,2,0,2,3]),Pd.setAttribute("position",new Zc(i,3,0,!1)),Pd.setAttribute("uv",new Zc(i,2,3,!1))}this.geometry=Pd,this.material=e,this.center=new Z(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Nd.setFromMatrixScale(this.matrixWorld),OB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Od.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Nd.multiplyScalar(-Od.z);const i=this.material.rotation;let r,s;0!==i&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Xv($v.set(-.5,-.5,0),Od,o,Nd,r,s),Xv(Mp.set(.5,-.5,0),Od,o,Nd,r,s),Xv(qv.set(.5,.5,0),Od,o,Nd,r,s),LB.set(0,0),nT.set(1,0),FB.set(1,1);let a=e.ray.intersectTriangle($v,Mp,qv,!1,_p);if(null===a&&(Xv(Mp.set(-.5,.5,0),Od,o,Nd,r,s),nT.set(0,1),a=e.ray.intersectTriangle($v,qv,Mp,!1,_p),null===a))return;const c=e.ray.origin.distanceTo(_p);c<e.near||c>e.far||t.push({distance:c,point:_p.clone(),uv:qr.getInterpolation(_p,$v,Mp,qv,LB,nT,FB,new Z),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Xv(n,e,t,i,r,s){Ld.subVectors(n,t).addScalar(.5).multiply(i),void 0!==r?(xp.x=s*Ld.x-r*Ld.y,xp.y=r*Ld.x+s*Ld.y):xp.copy(Ld),n.copy(e),n.x+=xp.x,n.y+=xp.y,n.applyMatrix4(OB)}const BB=new I,VB=new Bt,zB=new Bt,Uae=new I,HB=new ze,Zv=new I,iT=new Si,GB=new ze,rT=new md;class sT extends Ht{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=fU,this.bindMatrix=new ze,this.bindMatrixInverse=new ze,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new ji),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Zv),this.boundingBox.expandByPoint(Zv)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Si),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Zv),this.boundingSphere.expandByPoint(Zv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),iT.copy(this.boundingSphere),iT.applyMatrix4(r),!1!==e.ray.intersectsSphere(iT)&&(GB.copy(r).invert(),rT.copy(e.ray).applyMatrix4(GB),(null===this.boundingBox||!1!==rT.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,rT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Bt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===fU?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;VB.fromBufferAttribute(r.attributes.skinIndex,e),zB.fromBufferAttribute(r.attributes.skinWeight,e),BB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=zB.getComponent(s);if(0!==o){const a=VB.getComponent(s);HB.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Uae.copy(BB).applyMatrix4(HB),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Kv extends Vt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Go extends wi{constructor(e=null,t=1,i=1,r,s,o,a,c,l=Yn,u=Yn,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const jB=new ze,Bae=new ze;class Jv{constructor(e=[],t=[]){this.uuid=Ar(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ze)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ze;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)jB.multiplyMatrices(e[s]?e[s].matrixWorld:Bae,t[s]),jB.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Jv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Go(t,e,e,ur,Cr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Kv),this.bones.push(o),this.boneInverses.push((new ze).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class Fd extends Pt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const kd=new ze,WB=new ze,Qv=[],$B=new ji,Vae=new ze,bp=new Ht,Ep=new Si;class qB extends Ht{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Fd(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Vae)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new ji),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,kd),$B.copy(e.boundingBox).applyMatrix4(kd),this.boundingBox.union($B)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Si),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,kd),Ep.copy(e.boundingSphere).applyMatrix4(kd),this.boundingSphere.union(Ep)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=e*(i.length+1)+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(bp.geometry=this.geometry,bp.material=this.material,void 0!==bp.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ep.copy(this.boundingSphere),Ep.applyMatrix4(i),!1!==e.ray.intersectsSphere(Ep)))for(let s=0;s<r;s++){this.getMatrixAt(s,kd),WB.multiplyMatrices(i,kd),bp.matrixWorld=WB,bp.raycast(e,Qv);for(let o=0,a=Qv.length;o<a;o++){const c=Qv[o];c.instanceId=s,c.object=this,t.push(c)}Qv.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Fd(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;null===this.morphTexture&&(this.morphTexture=new Go(new Float32Array(r*this.count),r,this.count,Hw,Cr));const s=this.morphTexture.source.data.data;let o=0;for(let l=0;l<i.length;l++)o+=i[l];const c=r*e;s[c]=this.geometry.morphTargetsRelative?1:1-o,s.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class qi extends ri{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const n_=new I,i_=new I,ZB=new ze,Sp=new md,r_=new Si,lT=new I,KB=new I;class Oa extends Vt{constructor(e=new ft,t=new qi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)n_.fromBufferAttribute(t,r-1),i_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=n_.distanceTo(i_);e.setAttribute("lineDistance",new Ie(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),r_.copy(i.boundingSphere),r_.applyMatrix4(r),r_.radius+=s,!1===e.ray.intersectsSphere(r_))return;ZB.copy(r).invert(),Sp.copy(e.ray).applyMatrix4(ZB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(null!==u){const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let m=f,g=p-1;m<g;m+=l){const y=u.getX(m),v=u.getX(m+1),_=s_(this,e,Sp,c,y,v);_&&t.push(_)}if(this.isLineLoop){const m=u.getX(p-1),g=u.getX(f),y=s_(this,e,Sp,c,m,g);y&&t.push(y)}}else{const f=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let m=f,g=p-1;m<g;m+=l){const y=s_(this,e,Sp,c,m,m+1);y&&t.push(y)}if(this.isLineLoop){const m=s_(this,e,Sp,c,p-1,f);m&&t.push(m)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function s_(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(n_.fromBufferAttribute(o,r),i_.fromBufferAttribute(o,s),t.distanceSqToSegment(n_,i_,lT,KB)>i)return;lT.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(lT);return c<e.near||c>e.far?void 0:{distance:c,point:KB.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const JB=new I,QB=new I;class Qs extends Oa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)JB.fromBufferAttribute(t,r),QB.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+JB.distanceTo(QB);e.setAttribute("lineDistance",new Ie(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eV extends Oa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class uT extends ri{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new fe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const tV=new ze,dT=new md,o_=new Si,a_=new I;class nV extends Vt{constructor(e=new ft,t=new uT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),o_.copy(i.boundingSphere),o_.applyMatrix4(r),o_.radius+=s,!1===e.ray.intersectsSphere(o_))return;tV.copy(r).invert(),dT.copy(e.ray).applyMatrix4(tV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(null!==l)for(let p=Math.max(0,o.start),m=Math.min(l.count,o.start+o.count);p<m;p++){const g=l.getX(p);a_.fromBufferAttribute(d,g),iV(a_,g,c,r,e,t,this)}else for(let p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);p<m;p++)a_.fromBufferAttribute(d,p),iV(a_,p,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function iV(n,e,t,i,r,s,o){const a=dT.distanceSqToPoint(n);if(a<t){const c=new I;dT.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class Pp extends ft{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let l=0;const u=[],d=new I,h=new I,f=[],p=[],m=[],g=[];for(let y=0;y<=i;y++){const v=[],_=y/i;let x=0;0===y&&0===o?x=.5/t:y===i&&c===Math.PI&&(x=-.5/t);for(let S=0;S<=t;S++){const b=S/t;d.x=-e*Math.cos(r+b*s)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(r+b*s)*Math.sin(o+_*a),p.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),g.push(b+x,1-_),v.push(l++)}u.push(v)}for(let y=0;y<i;y++)for(let v=0;v<t;v++){const x=u[y][v],S=u[y+1][v],b=u[y+1][v+1];(0!==y||o>0)&&f.push(u[y][v+1],x,b),(y!==i-1||c<Math.PI)&&f.push(x,S,b)}this.setIndex(f),this.setAttribute("position",new Ie(p,3)),this.setAttribute("normal",new Ie(m,3)),this.setAttribute("uv",new Ie(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class __ extends ri{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new fe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Es extends __{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Z(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new fe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new fe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new fe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function el(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function _V(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function NT(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function OT(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class Np{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Bce extends Np{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:id,endingEnd:id}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case rd:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case rd:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),m=p*p,g=m*p,y=-h*g+2*h*m-h*p,v=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,_=(-1-f)*g+(1.5+f)*m+.5*p,x=f*g-f*m;for(let S=0;S!==a;++S)s[S]=y*o[u+S]+v*o[l+S]+_*o[c+S]+x*o[d+S];return s}}class xV extends Np{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}}class Vce extends Np{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class to{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=el(t,this.TimeBufferType),this.values=el(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:el(e.times,Array),values:el(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Vce(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new xV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Bce(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ap:t=this.InterpolantFactoryMethodDiscrete;break;case cp:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ap;case this.InterpolantFactoryMethodLinear:return cp;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&function vV(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const m=t[d+p];if(m!==t[h+p]||m!==t[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}to.prototype.TimeBufferType=Float32Array,to.prototype.ValueBufferType=Float32Array,to.prototype.DefaultInterpolation=cp;class Vd extends to{constructor(e,t,i){super(e,t,i)}}Vd.prototype.ValueTypeName="bool",Vd.prototype.ValueBufferType=Array,Vd.prototype.DefaultInterpolation=ap,Vd.prototype.InterpolantFactoryMethodLinear=void 0,Vd.prototype.InterpolantFactoryMethodSmooth=void 0;class MV extends to{}MV.prototype.ValueTypeName="color";class zd extends to{}zd.prototype.ValueTypeName="number";class zce extends Np{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)ii.slerpFlat(s,0,o,l-a,o,l,c);return s}}class Hd extends to{InterpolantFactoryMethodLinear(e){return new zce(this.times,this.values,this.getValueSize(),e)}}Hd.prototype.ValueTypeName="quaternion",Hd.prototype.InterpolantFactoryMethodSmooth=void 0;class Gd extends to{constructor(e,t,i){super(e,t,i)}}Gd.prototype.ValueTypeName="string",Gd.prototype.ValueBufferType=Array,Gd.prototype.DefaultInterpolation=ap,Gd.prototype.InterpolantFactoryMethodLinear=void 0,Gd.prototype.InterpolantFactoryMethodSmooth=void 0;class jd extends to{}jd.prototype.ValueTypeName="vector";class Op{constructor(e="",t=-1,i=[],r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ar(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Gce(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(to.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=_V(c);c=NT(c,1,u),l=NT(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new zd(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,m){if(0!==f.length){const g=[],y=[];OT(f,g,y,p),0!==g.length&&m.push(new d(h,g,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let d=0;d<l.length;d++){const h=l[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],y=[];for(let v=0;v!==h[p].morphTargets.length;++v){const _=h[p];g.push(_.time),y.push(_.morphTarget===m?1:0)}r.push(new zd(".morphTargetInfluence["+m+"]",g,y))}c=f.length*o}else{const f=".bones["+t[d].name+"]";i(jd,f+".position",h,"pos",r),i(Hd,f+".quaternion",h,"rot",r),i(jd,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Gce(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Hce(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zd;case"vector":case"vector2":case"vector3":case"vector4":return jd;case"color":return MV;case"quaternion":return Hd;case"bool":case"boolean":return Vd;case"string":return Gd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];OT(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const La={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class LT{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){const d=l.indexOf(u);return-1!==d&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=l.length;d<h;d+=2){const f=l[d],p=l[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const jce=new LT;let Rr=(()=>{class n{constructor(t){this.manager=void 0!==t?t:jce,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const Wo={};class Wce extends Error{constructor(e,t){super(e),this.response=t}}class no extends Rr{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=La.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Wo[e])return void Wo[e].push({onLoad:t,onProgress:i,onError:r});Wo[e]=[],Wo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=Wo[e],d=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let m=0;const g=new ReadableStream({start(y){!function v(){d.read().then(({done:_,value:x})=>{if(_)y.close();else{m+=x.byteLength;const S=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let b=0,E=u.length;b<E;b++){const A=u[b];A.onProgress&&A.onProgress(S)}y.enqueue(x),v()}},_=>{y.error(_)})}()}});return new Response(g)}throw new Wce(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{La.add(e,l);const u=Wo[e];delete Wo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(l)}}).catch(l=>{const u=Wo[e];if(void 0===u)throw this.manager.itemError(e),l;delete Wo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class x_ extends Rr{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=La.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=up("img");function c(){u(),La.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class $ce extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=new kv;s.colorSpace=Fn;const o=new x_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(l){o.load(e[l],function(u){s.images[l]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let l=0;l<e.length;++l)c(l);return s}}class bV extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=new wi,o=new x_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class tl extends Vt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new fe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const FT=new ze,EV=new I,wV=new I;class kT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Z(512,512),this.map=null,this.mapPass=null,this.matrix=new ze,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bv,this._frameExtents=new Z(1,1),this._viewportCount=1,this._viewports=[new Bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;EV.setFromMatrixPosition(e.matrixWorld),t.position.copy(EV),wV.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(wV),t.updateMatrixWorld(),FT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FT),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(FT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Xce extends kT{constructor(){super(new ai(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*od*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class SV extends tl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Xce}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const TV=new ze,Lp=new I,UT=new I;class Yce extends kT{constructor(){super(new ai(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Z(4,2),this._viewportCount=6,this._viewports=[new Bt(2,1,1,1),new Bt(0,1,1,1),new Bt(3,1,1,1),new Bt(1,1,1,1),new Bt(3,0,1,1),new Bt(1,0,1,1)],this._cubeDirections=[new I(1,0,0),new I(-1,0,0),new I(0,0,1),new I(0,0,-1),new I(0,1,0),new I(0,-1,0)],this._cubeUps=[new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,0,1),new I(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Lp.setFromMatrixPosition(e.matrixWorld),i.position.copy(Lp),UT.copy(i.position),UT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(UT),i.updateMatrixWorld(),r.makeTranslation(-Lp.x,-Lp.y,-Lp.z),TV.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TV)}}class CV extends tl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Yce}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zce extends kT{constructor(){super(new yp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class AV extends tl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.shadow=new Zce}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class nl{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class rle extends Rr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=La.get(e);if(void 0!==o)return s.manager.itemStart(e),o.then?void o.then(l=>{t&&t(l),s.manager.itemEnd(e)}).catch(l=>{r&&r(l)}):(setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){return La.add(e,l),t&&t(l),s.manager.itemEnd(e),l}).catch(function(l){r&&r(l),La.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});La.add(e,c),s.manager.itemStart(e)}}class OV{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=LV(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=LV();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function LV(){return(typeof performance>"u"?Date:performance).now()}class cle{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,l=t+t;c!==l;++c)if(i[c]!==i[c+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){ii.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;ii.multiplyQuaternionsFlat(e,o,e,t,e,i),ii.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const VT="\\[\\]\\.:\\/",lle=new RegExp("["+VT+"]","g"),zT="[^"+VT+"]",ule="[^"+VT.replace("\\.","")+"]",mle=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",zT)+/(WCOD+)?/.source.replace("WCOD",ule)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zT)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zT)+"$"),gle=["material","materials","bones","map"];class yle{constructor(e,t,i){const r=i||Qt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Qt=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(lle,"")}static parseTrackName(t){const i=mle.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==gle.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=yle,n})();Qt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Qt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Qt.prototype.GetterByBindingType=[Qt.prototype._getValue_direct,Qt.prototype._getValue_array,Qt.prototype._getValue_arrayElement,Qt.prototype._getValue_toArray],Qt.prototype.SetterByBindingTypeAndVersioning=[[Qt.prototype._setValue_direct,Qt.prototype._setValue_direct_setNeedsUpdate,Qt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qt.prototype._setValue_array,Qt.prototype._setValue_array_setNeedsUpdate,Qt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qt.prototype._setValue_arrayElement,Qt.prototype._setValue_arrayElement_setNeedsUpdate,Qt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qt.prototype._setValue_fromArray,Qt.prototype._setValue_fromArray_setNeedsUpdate,Qt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vle{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:id,endingEnd:id};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const c=(e-s)*i;c<0||0===i?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=c.length;u!==d;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);else for(let u=0,d=c.length;u!==d;++u)c[u].evaluate(o),l[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s||!o||1&~s?r:t-r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===c){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&!(1&~s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=rd,r.endingEnd=rd):(r.endingStart=e?this.zeroSlopeAtStart?rd:id:2402,r.endingEnd=t?this.zeroSlopeAtEnd?rd:id:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}}const _le=new Float32Array(1);class xle extends No{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=i.uuid,l=this._bindingsByRootAndName;let u=l[c];void 0===u&&(u={},l[c]=u);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let p=u[f];if(void 0!==p)++p.referenceCount,o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,c,f));continue}p=new cle(Qt.create(i,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===c.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],l=e._cacheIndex;c._cacheIndex=l,t[l]=c,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new xV(new Float32Array(2),new Float32Array(2),1,_le),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?Op.findByName(r,e):e;const a=null!==o?o.uuid:e,c=this._actionsByClip[a];let l=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==c){const d=c.actionByRoot[s];if(void 0!==d&&d.blendMode===i)return d;l=c.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new vle(this,o,t,i);return this._bindAction(u,l),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?Op.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const l=o[a];this._deactivateAction(l);const u=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot[t];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}const BV=new ze;class ble{constructor(e,t,i=0,r=1/0){this.ray=new md(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new PS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return BV.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(BV),this}intersectObject(e,t=!0,i=[]){return HT(e,this,i,t),i.sort(VV),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)HT(e[r],this,i,t);return i.sort(VV),i}}function VV(n,e){return n.distance-e.distance}function HT(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&!1===n.raycast(e,t)&&(r=!1),!0===r&&!0===i){const s=n.children;for(let o=0,a=s.length;o<a;o++)HT(s[o],e,t,!0)}}class zV{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(gn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const S_=new I,yn=new zS;class wle extends Qs{constructor(e){const t=new ft,i=new qi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};function a(p,m){c(p),c(m)}function c(p){r.push(0,0,0),s.push(0,0,0),void 0===o[p]&&(o[p]=[]),o[p].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Ie(r,3)),t.setAttribute("color",new Ie(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new fe(16755200),u=new fe(16711680),d=new fe(43775),h=new fe(16777215),f=new fe(3355443);this.setColors(l,u,d,h,f)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;yn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Cn("c",t,e,yn,0,0,-1),Cn("t",t,e,yn,0,0,1),Cn("n1",t,e,yn,-1,-1,-1),Cn("n2",t,e,yn,1,-1,-1),Cn("n3",t,e,yn,-1,1,-1),Cn("n4",t,e,yn,1,1,-1),Cn("f1",t,e,yn,-1,-1,1),Cn("f2",t,e,yn,1,-1,1),Cn("f3",t,e,yn,-1,1,1),Cn("f4",t,e,yn,1,1,1),Cn("u1",t,e,yn,.7,1.1,-1),Cn("u2",t,e,yn,-.7,1.1,-1),Cn("u3",t,e,yn,0,2,-1),Cn("cf1",t,e,yn,-1,0,1),Cn("cf2",t,e,yn,1,0,1),Cn("cf3",t,e,yn,0,-1,1),Cn("cf4",t,e,yn,0,1,1),Cn("cn1",t,e,yn,-1,0,-1),Cn("cn2",t,e,yn,1,0,-1),Cn("cn3",t,e,yn,0,-1,-1),Cn("cn4",t,e,yn,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Cn(n,e,t,i,r,s,o){S_.set(r,s,o).unproject(i);const a=e[n];if(void 0!==a){const c=t.getAttribute("position");for(let l=0,u=a.length;l<u;l++)c.setXYZ(a[l],S_.x,S_.y,S_.z)}}function QV(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"167"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="167");class Sle extends Rr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Ile(t)}),this.register(function(t){return new Rle(t)}),this.register(function(t){return new Vle(t)}),this.register(function(t){return new zle(t)}),this.register(function(t){return new Hle(t)}),this.register(function(t){return new Nle(t)}),this.register(function(t){return new Ole(t)}),this.register(function(t){return new Lle(t)}),this.register(function(t){return new Fle(t)}),this.register(function(t){return new Dle(t)}),this.register(function(t){return new kle(t)}),this.register(function(t){return new Ple(t)}),this.register(function(t){return new Ble(t)}),this.register(function(t){return new Ule(t)}),this.register(function(t){return new Cle(t)}),this.register(function(t){return new Gle(t)}),this.register(function(t){return new jle(t)})}load(e,t,i,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const l=nl.extractUrlBase(e);o=nl.resolveURL(l,this.path)}else o=nl.extractUrlBase(e);this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new no(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},c=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===e3){try{o[vt.KHR_BINARY_GLTF]=new Wle(e)}catch(d){return void(r&&r(d))}s=JSON.parse(o[vt.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new rue(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case vt.KHR_MATERIALS_UNLIT:o[d]=new Ale;break;case vt.KHR_DRACO_MESH_COMPRESSION:o[d]=new $le(s,this.dracoLoader);break;case vt.KHR_TEXTURE_TRANSFORM:o[d]=new qle;break;case vt.KHR_MESH_QUANTIZATION:o[d]=new Xle;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Tle(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const vt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Cle{constructor(e){this.parser=e,this.name=vt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new fe(16777215);void 0!==c.color&&u.setRGB(c.color[0],c.color[1],c.color[2],hi);const d=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new AV(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new CV(u),l.distance=d;break;case"spot":l=new SV(u),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,$o(l,c),void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class Ale{constructor(){this.name=vt.KHR_MATERIALS_UNLIT}getMaterialType(){return si}extendParams(e,t,i){const r=[];e.color=new fe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],hi),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Fn))}return Promise.all(r)}}class Dle{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Ile{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Z(a,a)}return Promise.all(s)}}class Rle{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class Ple{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Nle{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new fe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],hi)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Fn)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Ole{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Lle{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new fe).setRGB(a[0],a[1],a[2],hi),Promise.all(s)}}class Fle{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class kle{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new fe).setRGB(a[0],a[1],a[2],hi),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Fn)),Promise.all(s)}}class Ule{constructor(e){this.parser=e,this.name=vt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Ble{constructor(e){this.parser=e,this.name=vt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Es:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Vle{constructor(e){this.parser=e,this.name=vt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class zle{constructor(e){this.parser=e,this.name=vt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Hle{constructor(e){this.parser=e,this.name=vt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Gle{constructor(e){this.name=vt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}return null}}class jle{constructor(e){this.name=vt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const l of r.primitives)if(l.mode!==Yr.TRIANGLES&&l.mode!==Yr.TRIANGLE_STRIP&&l.mode!==Yr.TRIANGLE_FAN&&void 0!==l.mode)return null;const o=i.extensions[this.name].attributes,a=[],c={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),d=u.isGroup?u.children:[u],h=l[0].count,f=[];for(const p of d){const m=new ze,g=new I,y=new ii,v=new I(1,1,1),_=new qB(p.geometry,p.material,h);for(let x=0;x<h;x++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,x),c.ROTATION&&y.fromBufferAttribute(c.ROTATION,x),c.SCALE&&v.fromBufferAttribute(c.SCALE,x),_.setMatrixAt(x,m.compose(g,y,v));for(const x in c)if("_COLOR_0"===x){const S=c[x];_.instanceColor=new Fd(S.array,S.itemSize,S.normalized)}else"TRANSLATION"!==x&&"ROTATION"!==x&&"SCALE"!==x&&p.geometry.setAttribute(x,c[x]);Vt.prototype.copy.call(_,p),this.parser.assignFinalMaterial(_),f.push(_)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const e3="glTF";class Wle{constructor(e){this.name=vt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==e3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const c=s.getUint32(o,!0);if(o+=4,1313821514===c){const l=new Uint8Array(e,12+o,a);this.content=i.decode(l)}else if(5130562===c){const l=12+o;this.body=e.slice(l,l+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class $le{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=vt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const d=qT[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=qT[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[e.attributes[u]];l[d]=Wd[h.componentType].name,c[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,h){r.decodeDracoFile(u,function(f){for(const p in f.attributes){const g=c[p];void 0!==g&&(f.attributes[p].normalized=g)}d(f)},a,l,hi,h)})})}}class qle{constructor(){this.name=vt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Xle{constructor(){this.name=vt.KHR_MESH_QUANTIZATION}}class n3 extends Np{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*l,m=p-l,g=-2*f+3*h,y=f-h,v=1-g,_=y-h+d;for(let x=0;x!==a;x++)s[x]=v*o[m+x+a]+_*(o[m+x+c]*u)+g*o[p+x+a]+y*(o[p+x]*u);return s}}const Yle=new ii;class Zle extends n3{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Yle.fromArray(s).normalize().toArray(s),s}}const Yr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Wd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},i3={9728:Yn,9729:Tn,9984:1004,9985:1007,9986:Qu,9987:_s},r3={33071:$r,33648:1002,10497:Bc},$T={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},qT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ka={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Kle={CUBICSPLINE:void 0,LINEAR:cp,STEP:ap};function Jle(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new __({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function cl(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function $o(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function eue(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function tue(n){let e;const t=n.extensions&&n.extensions[vt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+YT(t.attributes):n.indices+":"+YT(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+YT(n.targets[i]);return e}function YT(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function ZT(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const iue=new ze;class rue{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Tle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=!0===/^((?!chrome|android).)*safari/i.test(a);const c=a.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||i&&r<17||s&&o<98?new bV(this.options.manager):new rle(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new no(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return cl(s,a,r),$o(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[vt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(nl.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=$T[r.type],c=!0===r.normalized,l=new(0,Wd[r.componentType])(r.count*o);return Promise.resolve(new Pt(l,o,c))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=$T[r.type],l=Wd[r.componentType],u=l.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,g;if(f&&f!==u*c){const y=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let _=t.cache.get(v);_||(m=new l(a,y*f,r.count*f/u),_=new Wv(m,f/u),t.cache.add(v,_)),g=new Zc(_,c,h%f/u,p)}else m=null===a?new l(r.count*c):new l(a,h,r.count*c),g=new Pt(m,c,p);if(void 0!==r.sparse){const x=r.sparse.values.byteOffset||0,S=new(0,Wd[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*$T.SCALAR),b=new l(o[2],x,r.sparse.count*c);null!==a&&(g=new Pt(g.array.slice(),g.itemSize,g.normalized));for(let E=0,A=S.length;E<A;E++){const M=S[E];if(g.setX(M,b[E*c]),c>=2&&g.setY(M,b[E*c+1]),c>=3&&g.setZ(M,b[E*c+2]),c>=4&&g.setW(M,b[E*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=i3[h.magFilter]||Tn,u.minFilter=i3[h.minFilter]||_s,u.wrapS=r3[h.wrapS]||Bc,u.wrapT=r3[h.wrapT]||Bc,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(d){l=!0;const h=new Blob([d],{type:o.mimeType});return c=a.createObjectURL(h),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(d){return new Promise(function(h,f){let p=h;!0===t.isImageBitmapLoader&&(p=function(m){const g=new wi(m);g.needsUpdate=!0,h(g)}),t.load(nl.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===l&&a.revokeObjectURL(c),$o(d,o),d.userData.mimeType=o.mimeType||function nue(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),s.extensions[vt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[vt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[vt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new uT,ri.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new qi,ri.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return __}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=[];if((s.extensions||{})[vt.KHR_MATERIALS_UNLIT]){const d=r[vt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),l.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new fe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],hi),a.opacity=h[3]}void 0!==d.baseColorTexture&&l.push(t.assignTexture(a,"map",d.baseColorTexture,Fn)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==si&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Z(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(void 0!==s.occlusionTexture&&o!==si&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==si){const d=s.emissiveFactor;a.emissive=(new fe).setRGB(d[0],d[1],d[2],hi)}return void 0!==s.emissiveTexture&&o!==si&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Fn)),Promise.all(l).then(function(){const d=new o(a);return s.name&&(d.name=s.name),$o(d,s),t.associations.set(d,{materials:e}),s.extensions&&cl(r,d,s),d})}createUniqueName(e){const t=Qt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[vt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return s3(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=tue(l),d=r[u];if(d)o.push(d.promise);else{let h;h=l.extensions&&l.extensions[vt.KHR_DRACO_MESH_COMPRESSION]?s(l):s3(new ft,l,t),r[u]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?Jle(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],g=o[f];let y;const v=l[f];if(g.mode===Yr.TRIANGLES||g.mode===Yr.TRIANGLE_STRIP||g.mode===Yr.TRIANGLE_FAN||void 0===g.mode)y=!0===s.isSkinnedMesh?new sT(m,v):new Ht(m,v),!0===y.isSkinnedMesh&&y.normalizeSkinWeights(),g.mode===Yr.TRIANGLE_STRIP?y.geometry=QV(y.geometry,1):g.mode===Yr.TRIANGLE_FAN&&(y.geometry=QV(y.geometry,2));else if(g.mode===Yr.LINES)y=new Qs(m,v);else if(g.mode===Yr.LINE_STRIP)y=new Oa(m,v);else if(g.mode===Yr.LINE_LOOP)y=new eV(m,v);else{if(g.mode!==Yr.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);y=new nV(m,v)}Object.keys(y.geometry.morphAttributes).length>0&&eue(y,s),y.name=t.createUniqueName(s.name||"mesh_"+e),$o(y,s),g.extensions&&cl(r,y,g),t.assignFinalMaterial(y),d.push(y)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return s.extensions&&cl(r,d[0],s),d[0];const h=new Ho;s.extensions&&cl(r,h,s),t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new ai(IU_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new yp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),$o(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],c=[];for(let l=0,u=o.length;l<u;l++){const d=o[l];if(d){a.push(d);const h=new ze;null!==s&&h.fromArray(s.array,16*l),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new Jv(a,c)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],c=[],l=[],u=[];for(let d=0,h=r.channels.length;d<h;d++){const f=r.channels[d],p=r.samplers[f.sampler],m=f.target,y=void 0!==r.parameters?r.parameters[p.input]:p.input,v=void 0!==r.parameters?r.parameters[p.output]:p.output;void 0!==m.node&&(o.push(this.getDependency("node",m.node)),a.push(this.getDependency("accessor",y)),c.push(this.getDependency("accessor",v)),l.push(p),u.push(m))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(d){const h=d[0],f=d[1],p=d[2],m=d[3],g=d[4],y=[];for(let v=0,_=h.length;v<_;v++){const x=h[v],S=f[v],b=p[v],E=m[v],A=g[v];if(void 0===x)continue;x.updateMatrix&&x.updateMatrix();const M=i._createAnimationTracks(x,S,b,E,A);if(M)for(let w=0;w<M.length;w++)y.push(M[w])}return new Op(s,void 0,y)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let l=0,u=a.length;l<u;l++)o.push(i.getDependency("node",a[l]));const c=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(l){const u=l[0],d=l[1],h=l[2];null!==h&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,iue)});for(let f=0,p=d.length;f<p;f++)u.add(d[f]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(u=!0===s.isBone?new Kv:l.length>1?new Ho:1===l.length?l[0]:new Vt,u!==l[0])for(let d=0,h=l.length;d<h;d++)u.add(l[d]);if(s.name&&(u.userData.name=s.name,u.name=o),$o(u,s),s.extensions&&cl(i,u,s),void 0!==s.matrix){const d=new ze;d.fromArray(s.matrix),u.applyMatrix4(d)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Ho;i.name&&(s.name=r.createUniqueName(i.name)),$o(s,i),i.extensions&&cl(t,s,i);const o=i.nodes||[],a=[];for(let c=0,l=o.length;c<l;c++)a.push(r.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let u=0,d=c.length;u<d;u++)s.add(c[u]);return r.associations=(u=>{const d=new Map;for(const[h,f]of r.associations)(h instanceof ri||h instanceof wi)&&d.set(h,f);return u.traverse(h=>{const f=r.associations.get(h);null!=f&&d.set(h,f)}),d})(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,c=[];let l;switch(ka[s.path]===ka.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a),ka[s.path]){case ka.weights:l=zd;break;case ka.rotation:l=Hd;break;case ka.position:case ka.scale:l=jd;break;default:l=1===i.itemSize?zd:jd}const u=void 0!==r.interpolation?Kle[r.interpolation]:cp,d=this._getArrayFromAccessor(i);for(let h=0,f=c.length;h<f;h++){const p=new l(c[h]+"."+ka[s.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=ZT(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof Hd?Zle:n3)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function s3(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=qT[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return St.workingColorSpace!==hi&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${St.workingColorSpace}" not supported.`),$o(n,e),function sue(n,e,t){const i=e.attributes,r=new ji;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new I(c[0],c[1],c[2]),new I(l[0],l[1],l[2])),a.normalized){const u=ZT(Wd[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new I,c=new I;for(let l=0,u=s.length;l<u;l++){const d=s[l];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=ZT(Wd[h.componentType]);c.multiplyScalar(m)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Si;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Qle(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const d=e[l];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const d=e[l];if(i){const h=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const d=l[1],h=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}let Pr=(()=>{class n{static INSTANCE;gltfMap=new Map;textureMap=new Map;cubeTextureMap=new Map;loadingManager;gltfLoader;textureLoader;cubeTextureLoader;loadingFinishedEvent=new fn;loadingProgressEvent=new fn;resourcesLoaded=!1;constructor(){if(n.INSTANCE)throw new Error("Trying to re-instantiate ResourceLoadingService");n.INSTANCE=this,this.setLoadingManager(),this.setLoaders()}static getInstance(){return this.INSTANCE}loadResources(t){for(const i of t)if("gltf"==i.type){if(null==i.path)throw new Error("Source does not contain path");this.gltfLoader.load(i.path,r=>{this.gltfMap.set(i.name,r)})}else if("texture"==i.type){if(null==i.path)throw new Error("Source does not contain path");this.textureLoader.load(i.path,r=>{this.textureMap.set(i.name,r)})}else if("gltfTexture"==i.type){if(null==i.path)throw new Error("Source does not contain path");this.textureLoader.load(i.path,r=>{r.flipY=!1,r.magFilter=Yn,this.textureMap.set(i.name,r)})}else if("cubeTexture"==i.type){if(null==i.paths)throw new Error("Source does not contain paths");this.cubeTextureLoader.load(i.paths,r=>{this.cubeTextureMap.set(i.name,r)})}}resourcesReady(){return this.resourcesLoaded}setLoadingManager(){this.loadingManager=new LT(()=>{this.resourcesLoaded=!0,this.loadingFinishedEvent.next(!0)},(t,i,r)=>{this.loadingProgressEvent.next(i/r)},t=>{this.loadingFinishedEvent.next(!1)})}setLoaders(){this.gltfLoader=new Sle(this.loadingManager),this.textureLoader=new bV(this.loadingManager),this.cubeTextureLoader=new $ce(this.loadingManager)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o3=(()=>{class n{animationTimeline;headerElement;subtextElement;overlayBars;constructor(){this.animationTimeline=Yu.timeline().add("start"),Pr.getInstance().loadingFinishedEvent.subscribe(()=>{this.startTextAnimation()})}ngOnInit(){const t=document.getElementById("header")||void 0,i=document.getElementById("subtext")||void 0;if(this.overlayBars=Array.from(document.getElementsByClassName("overlay-bar")),null==t||null==i)throw new Error("Could not get document elements");this.headerElement=t,this.subtextElement=i}startTextAnimation(){this.animationTimeline.fromTo(this.headerElement,{autoAlpha:1,yPercent:-100},{autoAlpha:1,yPercent:0,duration:1,delay:.5,ease:"circ.out"},"start").fromTo(this.subtextElement,{autoAlpha:1,yPercent:100},{autoAlpha:1,yPercent:0,duration:1,delay:1.3,ease:"circ.out"},"start").then(()=>{for(let t of this.overlayBars)t instanceof HTMLElement&&(t.style.visibility="hidden")})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ns({type:n,selectors:[["app-home"]],decls:8,vars:0,consts:[[1,"text-container"],["id","top-bar",1,"overlay-bar"],["id","header"],["id","subtext"],["id","bottom-bar",1,"overlay-bar","bottom"]],template:function(i,r){1&i&&(Yt(0,"div",0),Fi(1,"div",1),Yt(2,"h1",2),vi(3," Hi, I'm Kaz "),Ut(),Fi(4,"br"),Yt(5,"h3",3),vi(6," Full-stack web developer, game development enthusiast and 3D modeling hobbyist. "),Ut(),Fi(7,"div",4),Ut())},styles:[".theme-light[_ngcontent-%COMP%]{--primary-color: #ffffff;--secondary-color: #121212;--tertiary-color: #282828;--text-color: #121212;--text-color-light: #ffffff;--window-background-color: #F1F2F4}.theme-dark[_ngcontent-%COMP%]{--primary-color: #292929;--secondary-color: #121212;--tertiary-color: #000000;--text-color: #ffffff;--text-color-light: #ffffff;--window-background-color: #1c1c1c}[_nghost-%COMP%]{display:flex;align-items:center;height:100vh;width:50%}.text-container[_ngcontent-%COMP%]{position:relative;height:30%;display:flex;flex-direction:column;margin:0 10%}.overlay-bar[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{position:relative;flex:1;height:25%;width:100%;margin:0}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{display:flex;align-items:center;z-index:0;opacity:0}h1[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:4rem;margin:0}.overlay-bar[_ngcontent-%COMP%]{z-index:1;background-color:var(--primary-color)}"]})}return n})(),Zr=(()=>{class n{static INSTANCE;darkThemeEnabled=!1;themeChangeRequestEvent=new fn;themeChangeEvent=new fn;themeBehaviourOverridden=!1;constructor(){n.INSTANCE?Error("Trying to re-instantiate theme service"):n.INSTANCE=this;const t=window.matchMedia("(prefers-color-scheme: dark)");this.darkThemeEnabled=t.matches,t.addEventListener("change",i=>{this.darkThemeEnabled!=t.matches&&this.themeChangeRequestEvent.next()}),this.themeChangeRequestEvent.subscribe(()=>{this.themeBehaviourOverridden||this.swapTheme()})}static getInstance(){return this.INSTANCE}isDarkThemeEnabled(){return this.darkThemeEnabled}setTheme(t){this.darkThemeEnabled=t}overrideThemeBehaviour(t){this.themeBehaviourOverridden=t}swapTheme(){this.darkThemeEnabled=!this.darkThemeEnabled,this.themeChangeEvent.next(this.darkThemeEnabled)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kp=(()=>{class n{static INSTANCE;scrollTop=0;currentSection=0;scrollEvent=new fn;newSectionEvent=new fn;constructor(){if(n.INSTANCE)throw Error("Trying to re-instantiate scroll service");n.INSTANCE=this,window.onbeforeunload=()=>{window.scrollTo(0,0)},window.addEventListener("scroll",()=>{this.recalculateScrollTop()}),window.addEventListener("resize",()=>{this.onResize()})}static getInstance(){return this.INSTANCE}getScrollTop(){return this.scrollTop}getSection(){return this.currentSection}recalculateScrollTop(){const t=document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t,this.scrollEvent.next(this.scrollTop);const i=Math.round(this.scrollTop/innerHeight);this.currentSection!=i&&(this.currentSection=i,this.newSectionEvent.next(i))}onResize(){const t=innerHeight*this.currentSection;window.scrollTo(0,t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oue=n=>({inverted:n});let aue=(()=>{class n{themeService;isDarkTheme;constructor(t){this.themeService=t,this.isDarkTheme=t.isDarkThemeEnabled(),t.themeChangeEvent.subscribe(i=>{this.isDarkTheme=i})}onClick(){this.themeService.themeChangeRequestEvent.next()}static \u0275fac=function(i){return new(i||n)(ie(Zr))};static \u0275cmp=ns({type:n,selectors:[["app-theme-button"]],decls:1,vars:3,consts:[[1,"theme-button",3,"click","ngClass"]],template:function(i,r){1&i&&(Yt(0,"div",0),Ui("click",function(){return r.onClick()}),Ut()),2&i&&us("ngClass",eO(1,oue,r.isDarkTheme))},dependencies:[UL],styles:[".theme-light[_ngcontent-%COMP%]{--primary-color: #ffffff;--secondary-color: #121212;--tertiary-color: #282828;--text-color: #121212;--text-color-light: #ffffff;--window-background-color: #F1F2F4}.theme-dark[_ngcontent-%COMP%]{--primary-color: #292929;--secondary-color: #121212;--tertiary-color: #000000;--text-color: #ffffff;--text-color-light: #ffffff;--window-background-color: #1c1c1c}[_nghost-%COMP%]{width:2rem;height:2rem}.theme-button[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid white;border-radius:15%;background-color:var(--tertiary-color);background-image:url(contrast-icon.1cc14a54bbbc5c98.svg);background-position:center;background-size:80%;background-repeat:no-repeat}.theme-button.inverted[_ngcontent-%COMP%]{background-image:url(contrast-icon-inverted.b192e4df5889ee36.svg)}.theme-button[_ngcontent-%COMP%]:hover{cursor:pointer}.theme-button[_ngcontent-%COMP%]:after{position:absolute;width:0;height:0;overflow:hidden;content:url(contrast-icon.1cc14a54bbbc5c98.svg) url(contrast-icon-inverted.b192e4df5889ee36.svg)}"]})}return n})(),cue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ns({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"header-banner"]],template:function(i,r){1&i&&(Yt(0,"div",0)(1,"h2"),vi(2,"3D portfolio"),Ut(),Fi(3,"app-theme-button"),Ut())},dependencies:[aue],styles:[".theme-light[_ngcontent-%COMP%]{--primary-color: #ffffff;--secondary-color: #121212;--tertiary-color: #282828;--text-color: #121212;--text-color-light: #ffffff;--window-background-color: #F1F2F4}.theme-dark[_ngcontent-%COMP%]{--primary-color: #292929;--secondary-color: #121212;--tertiary-color: #000000;--text-color: #ffffff;--text-color-light: #ffffff;--window-background-color: #1c1c1c}[_nghost-%COMP%]{position:fixed;top:0;left:0;z-index:2;width:100%;height:75px;margin:0}[_nghost-%COMP%]   .header-banner[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;box-sizing:border-box;justify-content:space-between;align-items:center;padding:0 2rem;background-color:var(--tertiary-color)}[_nghost-%COMP%]   .header-banner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-color-light)}"]})}return n})();class lue{width;height;pixelRatio;resizeEvent=new fn;constructor(){this.recalculateSizes(),window.addEventListener("resize",()=>{this.recalculateSizes(),this.resizeEvent.next()})}getWidth(){return this.width}getHeight(){return this.height}getAspect(){return this.width/this.height}getPixelRatio(){return this.pixelRatio}recalculateSizes(){this.width=window.innerWidth,this.height=window.innerHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}}class uue{startTime;currentTime;elapsedTime=0;deltaTime=16;clock;tickEvent=new fn;constructor(){this.clock=new OV,this.startTime=Date.now(),this.currentTime=this.startTime,window.requestAnimationFrame(()=>{this.tick()})}getStartTime(){return this.startTime}getCurrentTime(){return this.currentTime}getElapsedTime(){return this.elapsedTime}getDeltaTime(){return this.deltaTime}registerTimedEvent(e,t){const i=new fn;return this.waitForTimedEvent(i,e,t),i}waitForTimedEvent(e,t,i){if(null!=i){if(0==i)return;i--}setTimeout(()=>(e.next(),this.waitForTimedEvent(e,t,i)),t)}tick(){const e=Date.now();this.deltaTime=e-this.currentTime,this.currentTime=e,this.elapsedTime=this.clock.getElapsedTime(),window.requestAnimationFrame(()=>{this.tick()}),this.tickEvent.next()}}const a3={type:"change"},KT={type:"start"},c3={type:"end"},A_=new md,l3=new Pa,due=Math.cos(70*IU_DEG2RAD);class hue extends No{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new I,this.cursor=new I,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(T){T.addEventListener("keydown",Se),this._domElementKeyEvents=T},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Se),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(a3),i.update(),s=r.NONE},this.update=function(){const T=new I,V=(new ii).setFromUnitVectors(e.up,new I(0,1,0)),z=V.clone().invert(),X=new I,ae=new ii,Fe=new I,tt=2*Math.PI;return function(Jn=null){const Tt=i.object.position;T.copy(Tt).sub(i.target),T.applyQuaternion(V),a.setFromVector3(T),i.autoRotate&&s===r.NONE&&L(function w(T){return null!==T?2*Math.PI/60*i.autoRotateSpeed*T:2*Math.PI/60/60*i.autoRotateSpeed}(Jn)),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let Qn=i.minAzimuthAngle,Un=i.maxAzimuthAngle;isFinite(Qn)&&isFinite(Un)&&(Qn<-Math.PI?Qn+=tt:Qn>Math.PI&&(Qn-=tt),Un<-Math.PI?Un+=tt:Un>Math.PI&&(Un-=tt),a.theta=Qn<=Un?Math.max(Qn,Math.min(Un,a.theta)):a.theta>(Qn+Un)/2?Math.max(Qn,a.theta):Math.min(Un,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.target.sub(i.cursor),i.target.clampLength(i.minTargetRadius,i.maxTargetRadius),i.target.add(i.cursor);let ja=!1;if(i.zoomToCursor&&b||i.object.isOrthographicCamera)a.radius=me(a.radius);else{const fi=a.radius;a.radius=me(a.radius*l),ja=fi!=a.radius}if(T.setFromSpherical(a),T.applyQuaternion(z),Tt.copy(i.target).add(T),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),i.zoomToCursor&&b){let fi=null;if(i.object.isPerspectiveCamera){const Xo=T.length();fi=me(Xo*l);const pl=Xo-fi;i.object.position.addScaledVector(x,pl),i.object.updateMatrixWorld(),ja=!!pl}else if(i.object.isOrthographicCamera){const Xo=new I(S.x,S.y,0);Xo.unproject(i.object);const pl=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),i.object.updateProjectionMatrix(),ja=pl!==i.object.zoom;const qp=new I(S.x,S.y,0);qp.unproject(i.object),i.object.position.sub(qp).add(Xo),i.object.updateMatrixWorld(),fi=T.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==fi&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(fi).add(i.object.position):(A_.origin.copy(i.object.position),A_.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(A_.direction))<due?e.lookAt(i.target):(l3.setFromNormalAndCoplanarPoint(i.object.up,i.target),A_.intersectPlane(l3,i.target))))}else if(i.object.isOrthographicCamera){const fi=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),fi!==i.object.zoom&&(i.object.updateProjectionMatrix(),ja=!0)}return l=1,b=!1,!!(ja||X.distanceToSquared(i.object.position)>o||8*(1-ae.dot(i.object.quaternion))>o||Fe.distanceToSquared(i.target)>o)&&(i.dispatchEvent(a3),X.copy(i.object.position),ae.copy(i.object.quaternion),Fe.copy(i.target),!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Ee),i.domElement.removeEventListener("pointerdown",Ce),i.domElement.removeEventListener("pointercancel",C),i.domElement.removeEventListener("wheel",ne),i.domElement.removeEventListener("pointermove",N),i.domElement.removeEventListener("pointerup",C),i.domElement.getRootNode().removeEventListener("keydown",Le,{capture:!0}),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",Se),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new zV,c=new zV;let l=1;const u=new I,d=new Z,h=new Z,f=new Z,p=new Z,m=new Z,g=new Z,y=new Z,v=new Z,_=new Z,x=new I,S=new Z;let b=!1;const E=[],A={};let M=!1;function P(T){const V=Math.abs(.01*T);return Math.pow(.95,i.zoomSpeed*V)}function L(T){c.theta-=T}function O(T){c.phi-=T}const B=function(){const T=new I;return function(z,X){T.setFromMatrixColumn(X,0),T.multiplyScalar(-z),u.add(T)}}(),W=function(){const T=new I;return function(z,X){!0===i.screenSpacePanning?T.setFromMatrixColumn(X,1):(T.setFromMatrixColumn(X,0),T.crossVectors(i.object.up,T)),T.multiplyScalar(z),u.add(T)}}(),k=function(){const T=new I;return function(z,X){const ae=i.domElement;if(i.object.isPerspectiveCamera){T.copy(i.object.position).sub(i.target);let tt=T.length();tt*=Math.tan(i.object.fov/2*Math.PI/180),B(2*z*tt/ae.clientHeight,i.object.matrix),W(2*X*tt/ae.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(B(z*(i.object.right-i.object.left)/i.object.zoom/ae.clientWidth,i.object.matrix),W(X*(i.object.top-i.object.bottom)/i.object.zoom/ae.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function J(T){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l/=T:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function $(T){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l*=T:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function de(T,V){if(!i.zoomToCursor)return;b=!0;const z=i.domElement.getBoundingClientRect(),ae=V-z.top,tt=z.height;S.x=(T-z.left)/z.width*2-1,S.y=-ae/tt*2+1,x.set(S.x,S.y,1).unproject(i.object).sub(i.object.position).normalize()}function me(T){return Math.max(i.minDistance,Math.min(i.maxDistance,T))}function ge(T){d.set(T.clientX,T.clientY)}function at(T){p.set(T.clientX,T.clientY)}function Je(T){if(1===E.length)d.set(T.pageX,T.pageY);else{const V=ot(T);d.set(.5*(T.pageX+V.x),.5*(T.pageY+V.y))}}function Oe(T){if(1===E.length)p.set(T.pageX,T.pageY);else{const V=ot(T);p.set(.5*(T.pageX+V.x),.5*(T.pageY+V.y))}}function gt(T){const V=ot(T),z=T.pageX-V.x,X=T.pageY-V.y,ae=Math.sqrt(z*z+X*X);y.set(0,ae)}function oe(T){if(1==E.length)h.set(T.pageX,T.pageY);else{const z=ot(T);h.set(.5*(T.pageX+z.x),.5*(T.pageY+z.y))}f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const V=i.domElement;L(2*Math.PI*f.x/V.clientHeight),O(2*Math.PI*f.y/V.clientHeight),d.copy(h)}function xe(T){if(1===E.length)m.set(T.pageX,T.pageY);else{const V=ot(T);m.set(.5*(T.pageX+V.x),.5*(T.pageY+V.y))}g.subVectors(m,p).multiplyScalar(i.panSpeed),k(g.x,g.y),p.copy(m)}function Q(T){const V=ot(T),z=T.pageX-V.x,X=T.pageY-V.y,ae=Math.sqrt(z*z+X*X);v.set(0,ae),_.set(0,Math.pow(v.y/y.y,i.zoomSpeed)),J(_.y),y.copy(v),de(.5*(T.pageX+V.x),.5*(T.pageY+V.y))}function Ce(T){!1!==i.enabled&&(0===E.length&&(i.domElement.setPointerCapture(T.pointerId),i.domElement.addEventListener("pointermove",N),i.domElement.addEventListener("pointerup",C)),!function Ae(T){for(let V=0;V<E.length;V++)if(E[V]==T.pointerId)return!0;return!1}(T)&&(function _t(T){E.push(T.pointerId)}(T),"touch"===T.pointerType?st(T):function H(T){let V;switch(T.button){case 0:V=i.mouseButtons.LEFT;break;case 1:V=i.mouseButtons.MIDDLE;break;case 2:V=i.mouseButtons.RIGHT;break;default:V=-1}switch(V){case 1:if(!1===i.enableZoom)return;(function je(T){de(T.clientX,T.clientX),y.set(T.clientX,T.clientY)})(T),s=r.DOLLY;break;case 0:if(T.ctrlKey||T.metaKey||T.shiftKey){if(!1===i.enablePan)return;at(T),s=r.PAN}else{if(!1===i.enableRotate)return;ge(T),s=r.ROTATE}break;case 2:if(T.ctrlKey||T.metaKey||T.shiftKey){if(!1===i.enableRotate)return;ge(T),s=r.ROTATE}else{if(!1===i.enablePan)return;at(T),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(KT)}(T)))}function N(T){!1!==i.enabled&&("touch"===T.pointerType?function le(T){switch(et(T),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;oe(T),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;xe(T),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function He(T){i.enableZoom&&Q(T),i.enablePan&&xe(T)})(T),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function be(T){i.enableZoom&&Q(T),i.enableRotate&&oe(T)})(T),i.update();break;default:s=r.NONE}}(T):function se(T){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function q(T){h.set(T.clientX,T.clientY),f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const V=i.domElement;L(2*Math.PI*f.x/V.clientHeight),O(2*Math.PI*f.y/V.clientHeight),d.copy(h),i.update()}(T);break;case r.DOLLY:if(!1===i.enableZoom)return;!function re(T){v.set(T.clientX,T.clientY),_.subVectors(v,y),_.y>0?J(P(_.y)):_.y<0&&$(P(_.y)),y.copy(v),i.update()}(T);break;case r.PAN:if(!1===i.enablePan)return;!function ve(T){m.set(T.clientX,T.clientY),g.subVectors(m,p).multiplyScalar(i.panSpeed),k(g.x,g.y),p.copy(m),i.update()}(T)}}(T))}function C(T){switch(function Qe(T){delete A[T.pointerId];for(let V=0;V<E.length;V++)if(E[V]==T.pointerId)return void E.splice(V,1)}(T),E.length){case 0:i.domElement.releasePointerCapture(T.pointerId),i.domElement.removeEventListener("pointermove",N),i.domElement.removeEventListener("pointerup",C),i.dispatchEvent(c3),s=r.NONE;break;case 1:const V=E[0],z=A[V];st({pointerId:V,pageX:z.x,pageY:z.y})}}function ne(T){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(T.preventDefault(),i.dispatchEvent(KT),function ye(T){de(T.clientX,T.clientY),T.deltaY<0?$(P(T.deltaY)):T.deltaY>0&&J(P(T.deltaY)),i.update()}(function te(T){const z={clientX:T.clientX,clientY:T.clientY,deltaY:T.deltaY};switch(T.deltaMode){case 1:z.deltaY*=16;break;case 2:z.deltaY*=100}return T.ctrlKey&&!M&&(z.deltaY*=10),z}(T)),i.dispatchEvent(c3))}function Le(T){"Control"===T.key&&(M=!0,i.domElement.getRootNode().addEventListener("keyup",_e,{passive:!0,capture:!0}))}function _e(T){"Control"===T.key&&(M=!1,i.domElement.getRootNode().removeEventListener("keyup",_e,{passive:!0,capture:!0}))}function Se(T){!1===i.enabled||!1===i.enablePan||function Ve(T){let V=!1;switch(T.code){case i.keys.UP:T.ctrlKey||T.metaKey||T.shiftKey?O(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):k(0,i.keyPanSpeed),V=!0;break;case i.keys.BOTTOM:T.ctrlKey||T.metaKey||T.shiftKey?O(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):k(0,-i.keyPanSpeed),V=!0;break;case i.keys.LEFT:T.ctrlKey||T.metaKey||T.shiftKey?L(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):k(i.keyPanSpeed,0),V=!0;break;case i.keys.RIGHT:T.ctrlKey||T.metaKey||T.shiftKey?L(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):k(-i.keyPanSpeed,0),V=!0}V&&(T.preventDefault(),i.update())}(T)}function st(T){switch(et(T),E.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;Je(T),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;Oe(T),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function R(T){i.enableZoom&&gt(T),i.enablePan&&Oe(T)})(T),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function ue(T){i.enableZoom&&gt(T),i.enableRotate&&Je(T)})(T),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(KT)}function Ee(T){!1!==i.enabled&&T.preventDefault()}function et(T){let V=A[T.pointerId];void 0===V&&(V=new Z,A[T.pointerId]=V),V.set(T.pageX,T.pageY)}function ot(T){return A[T.pointerId===E[0]?E[1]:E[0]]}i.domElement.addEventListener("contextmenu",Ee),i.domElement.addEventListener("pointerdown",Ce),i.domElement.addEventListener("pointercancel",C),i.domElement.addEventListener("wheel",ne,{passive:!1}),i.domElement.getRootNode().addEventListener("keydown",Le,{passive:!0,capture:!0}),this.update()}}class fue{experience;cameraGroup=new Ho;camera;debugCamera;controls;defaultCameraPosition=new I(0,0,3);orthoCamStartingPosition=new I(0,0,3);frustrumSize=1;fieldOfView=35;near=2.5;far=4;cameraScroll=0;debugObject={};cameraHelper;orthographicEnabled=!0;constructor(e){this.experience=e,this.initializeCamera(),kp.getInstance().scrollEvent.subscribe(t=>{this.scrollCamera(t)}),e.getDebugManager().isDebugModeEnabled()&&this.setDebugOptions()}getCamera(){return this.orthographicEnabled?this.camera:this.debugCamera}getControls(){return this.controls}resize(){const t=this.experience.getSizeUtils().getAspect();this.camera.left=this.frustrumSize*t/-2,this.camera.right=this.frustrumSize*t/2,this.camera.updateProjectionMatrix(),this.debugCamera&&(this.debugCamera.aspect=t,this.debugCamera.updateProjectionMatrix(),this.cameraHelper.update())}tick(){this.controls&&this.controls.update()}initializeCamera(){const t=this.experience.getSizeUtils().getAspect();this.camera=new yp(this.frustrumSize*t/-2,this.frustrumSize*t/2,this.frustrumSize/2,this.frustrumSize/-2,this.near,this.far),this.camera.position.copy(this.orthoCamStartingPosition),this.experience.getScene().add(this.camera)}scrollCamera(e){const t=this.experience.getSizeUtils();this.cameraScroll=-e/t.getHeight(),this.camera.position.y=this.cameraScroll}setDebugOptions(){this.initializeDebugCamera(),this.initializeOrbitControls(),this.cameraHelper=new wle(this.camera),this.experience.getScene().add(this.cameraHelper);const t=this.experience.getDebugManager().getGUI().addFolder("Camera adjustment");this.debugObject.size=this.frustrumSize,this.debugObject.updateProjectionMatrix=()=>{this.camera.updateProjectionMatrix(),this.cameraHelper.update()},this.debugObject.resizeCamera=i=>{const s=this.experience.getSizeUtils().getAspect();console.log(`New size: ${i}`),this.camera.left=i*s/-2,this.camera.right=i*s/2,this.camera.top=i/2,this.camera.bottom=i/-2,this.camera.updateProjectionMatrix(),this.cameraHelper.update()},this.debugObject.switchCamera=()=>{this.orthographicEnabled=!this.orthographicEnabled},t.add(this.camera.position,"z",0,10),t.add(this.camera,"near",-10,10,.1).onChange(this.debugObject.updateProjectionMatrix),t.add(this.camera,"far",10,100,1).onChange(this.debugObject.updateProjectionMatrix),t.add(this.debugObject,"size",.1,5,.1).onChange(this.debugObject.resizeCamera),t.add(this.debugObject,"switchCamera").name("Switch to debug camera")}initializeDebugCamera(){const t=this.experience.getSizeUtils().getAspect(),i=this.experience.getScene();this.debugCamera=new ai(this.fieldOfView,t,.1,20),this.debugCamera.position.copy(this.defaultCameraPosition),this.cameraGroup.add(this.debugCamera),i.add(this.cameraGroup)}initializeOrbitControls(){const e=this.experience.getCanvas();this.experience.getScene(),this.controls=new hue(this.debugCamera,e),this.controls.enableDamping=!0}}class pue{experience;renderer;constructor(e){this.experience=e,this.initializeRendrerer()}resize(){const e=this.experience.getSizeUtils();this.renderer.setSize(e.getWidth(),e.getHeight()),this.renderer.setPixelRatio(e.getPixelRatio())}tick(){const e=this.experience.getScene(),t=this.experience.getCameraManager().getCamera();this.renderer.render(e,t)}getRenderer(){return this.renderer}initializeRendrerer(){const e=this.experience.getCanvas(),t=this.experience.getSizeUtils();this.renderer=new Fae({canvas:e,antialias:!0,alpha:!0}),this.renderer.toneMapping=hU,this.renderer.toneMappingExposure=1.75,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Ow,this.renderer.setSize(t.getWidth(),t.getHeight()),this.renderer.setPixelRatio(t.getPixelRatio())}}class Up{experience;positionableObject;mesh;page;leftMargin;topMargin;zPosition;constructor(e,t,i,r,s){this.experience=e,this.page=t,this.leftMargin=i,this.topMargin=r,this.zPosition=s,e.getSizeUtils().resizeEvent.subscribe(()=>this.positionComponent())}addToScene(){this.positionComponent()}positionComponent(){const e=this.experience.getSizeUtils().getAspect();this.positionableObject.position.set(-e/2+this.leftMargin/100*e,.5-this.page-this.topMargin/100,this.zPosition)}}class mue extends Up{sceneGroup;textureMaterial;outlineMaterial;defaultTexture;invertedTexture;snapVFXTexture;vfxMaterial;defaultVFXColor=new fe(16777215);invertedVFXColor=new fe(1184274);headBone;indexFingerBone;headRotationObject;raycastPlane;headTrackingPointObject;snapVFXSprite;animationMixer;animations;animationActions=new Map;isCurrentlyPlayingAction=!1;isCurrentlyPlayingMTAction=!1;previousAction;previousMTAction;fingerSnapAction;queuedAction=null;queuedMTAction=null;vfxTL=Yu.timeline();morphTargetMeshes=[];morphTargetsDict;morphTargetInfluences=[];headWorldPosition=new I;mousePosition=new Z;defaultRotation=new ii;raycastPlaneOffset=new I(-.05,.35,.5);sceneScale=1.3;animationSpeed=.0011;headRotationSpeed=2;headRotationEnabled=!1;raycastPlaneRadius=new Z(.75,.65);blinkDelay=5e3;themeTransitionQueued=!1;themeTransitionInProgress=!1;snapVFXParticleScale=.08;snapVFXDuration=.25;debugObject={};constructor(e,t,i,r,s){super(e,t,i,r,s),this.mapResources(),this.addToScene(),this.addRaycastPlane(),this.addTrackingPoint(),this.setThemeMaterials(Zr.getInstance().isDarkThemeEnabled()),this.initializeSnapVFX();const o=Zr.getInstance(),a=kp.getInstance();o.themeChangeRequestEvent.subscribe(()=>{t==a.getSection()&&(this.themeTransitionQueued=!0)}),o.themeChangeEvent.subscribe(c=>{this.setThemeMaterials(c)}),a.newSectionEvent.subscribe(c=>{o.overrideThemeBehaviour(c==t)}),a.getSection()==t&&o.overrideThemeBehaviour(!0),this.registerAnimationEvents(),this.startSceneAnimations(),this.startPeriodicAnimations(),this.experience.getDebugManager().isDebugModeEnabled()&&this.setDebugSettings()}mapResources(){const e=Pr.getInstance().gltfMap.get("character"),t=Pr.getInstance().textureMap.get("characterTextureInverted"),i=Pr.getInstance().textureMap.get("snapVFX");if(null==e||null==e.scene||null==t||null==i)throw new Error("Could not load character resources");this.sceneGroup=e.scene,this.animationMixer=new xle(this.sceneGroup),this.animations=e.animations,t.colorSpace=Fn,this.invertedTexture=t,i.colorSpace=Fn,this.snapVFXTexture=i,this.mapCharacterComponents(),this.mapAnimations()}mapCharacterComponents(){this.outlineMaterial=this.experience.getOutlineMaterial(),this.sceneGroup.traverse(e=>{if(e instanceof Vt&&"Scene"==e.name&&(this.positionableObject=e),e instanceof sT)if(e.frustumCulled=!1,null==this.morphTargetsDict&&e.morphTargetDictionary&&e.morphTargetInfluences&&(this.morphTargetsDict=e.morphTargetDictionary,this.morphTargetInfluences=e.morphTargetInfluences),this.morphTargetMeshes.push(e),"Texture"==e.material.name){this.textureMaterial=e.material;const t=this.textureMaterial.map;if(null==t)throw new Error("Character is missing texture");t.colorSpace=Fn,e.material.toneMapped=!1,this.defaultTexture=t}else"Outline_Black"==e.material.name&&(e.material=this.outlineMaterial,e.material.toneMapped=!1);else e instanceof Kv&&("DEF-spine006"==e.name?(this.headBone=e,e.getWorldPosition(this.headWorldPosition),this.defaultRotation=this.headBone.quaternion.clone(),this.headRotationObject=new Ht(new Pp(.2,6,6),this.experience.getDebugMaterialRed()),this.headRotationObject.name="Head_Rotation_Object",this.headRotationObject.position.copy(this.headBone.position),this.headBone.add(this.headRotationObject)):"DEF-f_index03R"==e.name&&(this.indexFingerBone=e))})}initializeSnapVFX(){this.vfxMaterial=new tT({sizeAttenuation:!0,depthWrite:!1,map:this.snapVFXTexture,alphaMap:this.snapVFXTexture}),this.snapVFXSprite=new kB(this.vfxMaterial),this.snapVFXSprite.visible=!1,this.experience.getScene().add(this.snapVFXSprite)}addToScene(){this.experience.getScene().add(this.sceneGroup),this.sceneGroup.scale.set(this.sceneScale,this.sceneScale,this.sceneScale),super.addToScene()}tick(){const e=this.experience.getTimeUtils().getDeltaTime()*this.animationSpeed;this.animationMixer.update(e),this.cursorRaycast(),this.handleHeadRotation(),this.handleAnimationQueue(),this.handleThemeTransitionQueue()}handleHeadRotation(){const e=this.experience.getTimeUtils().getDeltaTime()*this.animationSpeed;this.headBone.quaternion.slerp(this.headRotationEnabled?this.headRotationObject.quaternion:this.defaultRotation,e*this.headRotationSpeed)}handleAnimationQueue(){this.queuedAction&&!this.isCurrentlyPlayingAction&&(this.playAnimationAction(this.queuedAction),this.queuedAction=null),this.queuedMTAction&&!this.isCurrentlyPlayingMTAction&&(this.playAnimationAction(this.queuedMTAction),this.queuedMTAction=null)}handleThemeTransitionQueue(){this.themeTransitionQueued&&!this.isCurrentlyPlayingAction?this.startThemeTransition():this.themeTransitionInProgress&&this.fingerSnapAction.isRunning()&&this.fingerSnapAction.time>.5&&(Zr.getInstance().swapTheme(),this.themeTransitionInProgress=!1,this.themeTransitionQueued=!1,this.playSnapVFX(Zr.getInstance().isDarkThemeEnabled()))}setThemeMaterials(e){this.textureMaterial.map=e?this.invertedTexture:this.defaultTexture}mapAnimations(){for(const e of this.animations){const t=this.animationMixer.clipAction(e);t.clampWhenFinished=!0,t.loop=2200,"Fingersnap"==e.name&&(this.fingerSnapAction=t),this.animationActions.set(e.name,t)}}startSceneAnimations(){const e=this.getAnimationAction("Climb"),t=this.getAnimationAction("Climb_SK");this.playAnimationAction(e),this.playAnimationAction(t),this.queuedAction=this.getAnimationAction("Wave"),this.queuedMTAction=this.getAnimationAction("Wave_SK")}registerAnimationEvents(){this.animationMixer.addEventListener("finished",e=>{this.onAnimationFinish(e)})}startPeriodicAnimations(){const e=this.getAnimationAction("Blink_SK");this.experience.getTimeUtils().registerTimedEvent(this.blinkDelay).subscribe(()=>{this.isCurrentlyPlayingMTAction||this.playAnimationAction(e)})}getAnimationAction(e){const t=this.animationActions.get(e);if(null==t)throw new Error(`Action ${e} could not be found`);return t}playAnimationAction(e){if(!e)throw new Error("Animation action is undefined");if(e.getClip().name.endsWith("_SK")){if(this.isCurrentlyPlayingMTAction)return;this.previousMTAction&&this.previousMTAction.fadeOut(0),e.reset().play(),this.isCurrentlyPlayingMTAction=!0,this.previousMTAction=e}else{if(this.isCurrentlyPlayingAction)return;this.previousAction&&this.previousAction.fadeOut(0),e.reset().play(),e.clampWhenFinished=!0,this.isCurrentlyPlayingAction=!0,this.previousAction=e}}setMorphTransform(e,t){for(const i of this.morphTargetMeshes)i.morphTargetInfluences&&(i.morphTargetInfluences[e]=t)}onAnimationFinish(e){e.action.getClip().name.endsWith("_SK")?this.isCurrentlyPlayingMTAction=!1:this.isCurrentlyPlayingAction=!1}startThemeTransition(){this.fingerSnapAction.isRunning()||(this.themeTransitionInProgress=!0,this.playAnimationAction(this.fingerSnapAction))}playSnapVFX(e){let t=new I;this.indexFingerBone.getWorldPosition(t),t.x-=.25,t.y+=.025,this.vfxMaterial.color=e?this.defaultVFXColor:this.invertedVFXColor,this.snapVFXSprite.scale.set(this.snapVFXParticleScale,this.snapVFXParticleScale,this.snapVFXParticleScale),this.snapVFXSprite.position.copy(t),this.vfxMaterial.opacity=25,this.snapVFXSprite.visible=!0,this.vfxTL.start?this.vfxTL.play("start"):this.vfxTL.add("start").to(this.snapVFXSprite.position,{duration:this.snapVFXDuration,x:t.x-=.01,y:t.y+=.01,ease:"power4.out"},"start").to(this.vfxMaterial,{duration:this.snapVFXDuration,opacity:0,ease:"power4.out"},"start").then(()=>{this.snapVFXSprite.visible=!1})}addTrackingPoint(){this.headTrackingPointObject=new Ht(new zo(.01,.01),this.experience.getDebugMaterialCyan()),this.experience.getScene().add(this.headTrackingPointObject)}addRaycastPlane(){this.raycastPlane=new Ht(new zo(this.raycastPlaneRadius.x,this.raycastPlaneRadius.y),this.experience.getDebugMaterialRed()),this.raycastPlane.position.x=this.raycastPlaneOffset.x,this.raycastPlane.position.y=this.raycastPlaneOffset.y,this.raycastPlane.position.z=this.raycastPlaneOffset.z,this.positionableObject.add(this.raycastPlane),this.raycastPlane.updateMatrixWorld()}cursorRaycast(){const e=this.experience.getSizeUtils().getWidth(),t=this.experience.getSizeUtils().getHeight(),i=this.experience.getCursorUtils().getCursorPosition();this.mousePosition.x=i.x/e*2-1,this.mousePosition.y=-1*(i.y/t*2-1);const r=new ble;r.setFromCamera(this.mousePosition,this.experience.getCameraManager().getCamera());const s=r.intersectObjects([this.raycastPlane,this.headRotationObject]);if(s.length>0){const o=s.find(a=>a.object==this.raycastPlane);if(o){const a=o.point;this.headTrackingPointObject.position.x=a.x,this.headTrackingPointObject.position.y=a.y,this.headTrackingPointObject.position.z=a.z,this.headRotationObject.lookAt(this.headTrackingPointObject.position),this.headRotationEnabled=!0}}else this.headRotationEnabled=!1}setDebugSettings(){const t=this.experience.getDebugManager().getGUI().addFolder("Character");t.close();const i=t.addFolder("Positioning");i.add(this.positionableObject.position,"x",-2,2,.01),i.add(this.positionableObject.position,"y",-2,2,.01);const r=t.addFolder("Animation");for(const o of this.animations)this.debugObject[o.name]=()=>{const a=this.animationActions.get(o.name);this.playAnimationAction(a)},r.add(this.debugObject,o.name).name(`Play ${o.name}`);const s=t.addFolder("Morph Targets");for(const o in this.morphTargetsDict){const a=this.morphTargetsDict[o];s.add(this.morphTargetInfluences,a,0,1,.05).setValue(this.morphTargetInfluences[a]).name(o).listen().onChange(()=>this.setMorphTransform(a,this.morphTargetInfluences[a]))}}}class gue extends Up{geometry;planeDimensions=new Z(1,1);constructor(e,t,i,r,s){super(e,t,i,r,s),this.mapResources(),this.addToScene(),this.resize(),e.getSizeUtils().resizeEvent.subscribe(()=>{this.resize()})}mapResources(){const e=this.experience.getBasicThemeMaterial();this.geometry=new zo(this.planeDimensions.x,this.planeDimensions.y),this.mesh=new Ht(this.geometry,e),this.mesh.name="Foreground_Plane",this.positionableObject=this.mesh}addToScene(){this.experience.getScene().add(this.mesh),super.addToScene()}resize(){const e=this.experience.getSizeUtils().getAspect();this.mesh.scale.x=e}}class yue extends Up{constructor(e,t,i,r,s,o){super(e,i,r,s,o),this.mesh=t,this.mapResources(),this.addToScene()}mapResources(){this.positionableObject=this.mesh}getMesh(){return this.mesh}tick(){const e=this.experience.getTimeUtils().getElapsedTime(),t=(Math.sin(e)+1)*Math.PI,i=-.1*Math.sin(e);this.mesh.rotation.y=t,this.mesh.rotation.z=i}addToScene(){this.experience.getScene().add(this.mesh),super.addToScene()}positionComponent(){super.positionComponent()}}class vue extends Up{geometry;planeDimensions=new Z(1,.18);constructor(e,t,i,r,s){super(e,t,i,r,s),this.mapResources(),this.addToScene(),this.resize(),e.getSizeUtils().resizeEvent.subscribe(()=>{this.resize()})}mapResources(){const e=this.experience.getBasicThemeMaterial();this.geometry=new zo(this.planeDimensions.x,this.planeDimensions.y),this.mesh=new Ht(this.geometry,e),this.mesh.name="Foreground_Plane",this.positionableObject=this.mesh}addToScene(){this.experience.getScene().add(this.mesh),super.addToScene()}resize(){const e=this.experience.getSizeUtils().getAspect();this.mesh.scale.x=e}}class _ue{logos=new Map;experience;sceneGroup;material;logosTexture;foregroundPlane;logoMeshes=[];collectionPage;collectionLeftMargin;collectionTopMargin;collectionZPosition;logoBaseAnimationDuration=1.5;logosPerRow;logoHorizontalMargin;logoVerticalMargin;hasAnimationPlayed=!1;logoMaxScale=1.1;logoMinScale=.7;constructor(e,t,i,r,s,o,a,c){this.experience=e,this.collectionPage=t,this.collectionLeftMargin=i,this.collectionTopMargin=r,this.collectionZPosition=s,this.logosPerRow=o,this.logoHorizontalMargin=a,this.logoVerticalMargin=c,this.mapResources(),this.instantiateForegroundPlane(),this.instantiateMeshes(),kp.getInstance().newSectionEvent.subscribe(l=>{l==t&&!this.hasAnimationPlayed&&(this.hasAnimationPlayed=!0,this.enterAnimation())}),e.getSizeUtils().resizeEvent.subscribe(()=>{this.resize()})}tick(){const e=this.logos.values();for(const t of e)t.tick()}mapResources(){const e=Pr.getInstance().gltfMap.get("logos"),t=Pr.getInstance().textureMap.get("logosTexture");if(null==e||null==t)throw new Error("Cannot load logos resources");t.colorSpace=Fn,this.logosTexture=t,this.material=new si({map:t}),this.material.toneMapped=!1,this.sceneGroup=e.scene,this.sceneGroup.traverse(i=>{i instanceof Ht&&(i.material=this.material,this.logoMeshes.push(i),this.material.visible=!1)})}instantiateForegroundPlane(){this.foregroundPlane=new vue(this.experience,1,50,9,this.collectionZPosition+.3)}instantiateMeshes(){let e=0,t=0;const i=this.collectionTopMargin+this.logoVerticalMargin*t;for(const r of this.logoMeshes){e%this.logosPerRow==0&&e>0&&(e=0,t++);const o=new yue(this.experience,r,this.collectionPage,this.collectionLeftMargin+this.logoHorizontalMargin*e,i,this.collectionZPosition);this.logos.set(r.name,o),e++}this.resize()}enterAnimation(){const e=this.logos.values();this.material.visible=!0;let t=0;for(const i of e){const r=i.getMesh();Yu.from(r.position,{y:-1*this.collectionPage+.45,duration:this.logoBaseAnimationDuration+.1*t,ease:"circ.inOut",delay:.2*t}),t++}}resize(){let i=this.experience.getSizeUtils().getWidth()/1920*1.2;i=Math.min(i,this.logoMaxScale),i=Math.max(i,this.logoMinScale);for(const r of this.logoMeshes)r.scale.set(i,i,i)}}class xue extends Up{sceneGroup;defaultRotation=new I(.5,-.75,0);sceneScale=.17;rotationAmount=.05;constructor(e,t,i,r,s){super(e,t,i,r,s),this.mapResources(),this.addToScene(),e.getDebugManager().isDebugModeEnabled()&&this.setDebugOptions()}tick(){const e=this.experience.getTimeUtils().getElapsedTime(),t=Math.sin(e)*this.rotationAmount;this.positionableObject.rotation.y=this.defaultRotation.y+t}mapResources(){const e=Pr.getInstance().gltfMap.get("study-mono");if(null==e||null==e.scene)throw new Error("study-mono resource cannot be loaded");this.sceneGroup=e.scene;const t=this.experience.getMeshMonoMaterial(),i=this.experience.getOutlineMaterial();this.sceneGroup.traverse(r=>{r instanceof Vt&&"Scene"==r.name&&(this.positionableObject=r),r instanceof Ht&&("Mono_White"==r.material.name?r.material=t:"Outline_Black"==r.material.name&&(r.material=i))})}addToScene(){this.sceneGroup.scale.set(this.sceneScale,this.sceneScale,this.sceneScale),this.positionableObject.rotation.set(this.defaultRotation.x,this.defaultRotation.y,this.defaultRotation.z),this.experience.getScene().add(this.sceneGroup),super.addToScene()}setDebugOptions(){const t=this.experience.getDebugManager().getGUI().addFolder("StudyScene");t.add(this.positionableObject.rotation,"x",-2,2),t.add(this.positionableObject.rotation,"y",-2,2),t.add(this.positionableObject.rotation,"z",-2,2)}}class Mue{experience;study;monoboy;character;foregroundPlane;logos;studyMono;constructor(e){this.experience=e,Pr.getInstance().loadingFinishedEvent.subscribe(t=>{if(!t)return console.error("Failed to load resources");this.onResourcesLoad()})}tick(){Pr.getInstance().resourcesReady()&&(null!=this.study&&this.study.tick(),null!=this.monoboy&&this.monoboy.tick(),null!=this.character&&this.character.tick(),null!=this.logos&&this.logos.tick(),null!=this.studyMono&&this.studyMono.tick())}onResourcesLoad(){this.character=new mue(this.experience,0,75,100.5,-.5),this.foregroundPlane=new gue(this.experience,1,50,50,.07),this.logos=new _ue(this.experience,1,7.5,25,.15,9,7,10),this.studyMono=new xue(this.experience,2,75,75,-.5)}}class io{constructor(e,t,i,r,s="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),io.nextNameID=io.nextNameID||0,this.$name.id="lil-gui-name-"+ ++io.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class bue extends io{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function JT(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const Eue={isPrimitive:!0,match:n=>"string"==typeof n,fromHexString:JT,toHexString:JT},Bp={isPrimitive:!0,match:n=>"number"==typeof n,fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},wue={isPrimitive:!1,match:Array.isArray,fromHexString(n,e,t=1){const i=Bp.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(255&i)/255*t},toHexString:([n,e,t],i=1)=>Bp.toHexString(n*(i=255/i)<<16^e*i<<8^t*i)},Sue={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=Bp.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(255&i)/255*t},toHexString:({r:n,g:e,b:t},i=1)=>Bp.toHexString(n*(i=255/i)<<16^e*i<<8^t*i)},Tue=[Eue,Bp,wue,Sue];class Cue extends io{constructor(e,t,i,r){var s;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(s=this.initialValue,Tue.find(o=>o.match(s))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=JT(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class QT extends io{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class Aue extends io{constructor(e,t,i,r,s,o){super(e,t,i,"number"),this._initInput(),this.min(r),this.max(s);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=u=>{const d=parseFloat(this.$input.value);isNaN(d)||(this._snapClampSetValue(d+u),this.$input.value=this.getValue())};let t,i,r,s,o,a=!1;const c=u=>{if(a){const d=u.clientX-t;Math.abs(u.clientY-i)>5?(u.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(d)>5&&l()}a||(o-=(u.clientY-r)*this._step*this._arrowKeyMultiplier(u),s+o>this._max?o=this._max-s:s+o<this._min&&(o=this._min-s),this._snapClampSetValue(s+o)),r=u.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{let u=parseFloat(this.$input.value);isNaN(u)||(this._stepExplicit&&(u=this._snap(u)),this.setValue(this._clamp(u)))}),this.$input.addEventListener("keydown",u=>{"Enter"===u.code&&this.$input.blur(),"ArrowUp"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u))),"ArrowDown"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u)*-1))}),this.$input.addEventListener("wheel",u=>{this._inputFocused&&(u.preventDefault(),e(this._step*this._normalizeMouseWheel(u)))},{passive:!1}),this.$input.addEventListener("mousedown",u=>{t=u.clientX,i=r=u.clientY,a=!0,s=this.getValue(),o=0,window.addEventListener("mousemove",c),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=h=>{const f=this.$slider.getBoundingClientRect();let p=(h-(g=f.left))/(f.right-g)*(this._max-(v=this._min))+v;var g,v;this._snapClampSetValue(p)},t=h=>{e(h.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)};let r,s,o=!1;const a=h=>{h.preventDefault(),this._setDraggingStyle(!0),e(h.touches[0].clientX),o=!1},c=h=>{if(o){const p=h.touches[0].clientY-s;Math.abs(h.touches[0].clientX-r)>Math.abs(p)?a(h):(window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l))}else h.preventDefault(),e(h.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l)},u=this._callOnFinishChange.bind(this);let d;this.$slider.addEventListener("mousedown",h=>{this._setDraggingStyle(!0),e(h.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",h=>{h.touches.length>1||(this._hasScrollBar?(r=h.touches[0].clientX,s=h.touches[0].clientY,o=!0):a(h),window.addEventListener("touchmove",c,{passive:!1}),window.addEventListener("touchend",l))},{passive:!1}),this.$slider.addEventListener("wheel",h=>{if(Math.abs(h.deltaX)<Math.abs(h.deltaY)&&this._hasScrollBar)return;h.preventDefault();const f=this._normalizeMouseWheel(h)*this._step;this._snapClampSetValue(this.getValue()+f),this.$input.value=this.getValue(),clearTimeout(d),d=setTimeout(u,400)},{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class Due extends io{constructor(e,t,i,r){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class Iue extends io{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let u3=!1;class eC{constructor({parent:e,autoPlace:t=void 0===e,container:i,width:r,title:s="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{"Enter"!==c.code&&"Space"!==c.code||(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!u3&&o&&(function(){const l=document.createElement("style");l.innerHTML='.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25be";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25b8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}';const u=document.querySelector("head link[rel=stylesheet], head style");u?document.head.insertBefore(l,u):document.head.appendChild(l)}(),u3=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",c=>c.stopPropagation()),this.domElement.addEventListener("keyup",c=>c.stopPropagation())}add(e,t,i,r,s){if(Object(i)===i)return new Due(this,e,t,i);const o=e[t];switch(typeof o){case"number":return new Aue(this,e,t,i,r,s);case"boolean":return new bue(this,e,t);case"string":return new Iue(this,e,t);case"function":return new QT(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",o)}addColor(e,t,i=1){return new Cue(this,e,t,i)}addFolder(e){return new eC({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof QT||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof QT)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const Rue=eC;var Vp=function(){var n=0,e=document.createElement("div");function t(u){return e.appendChild(u.dom),u}function i(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";n=u}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);var r=(performance||Date).now(),s=r,o=0,a=t(new Vp.Panel("FPS","#0ff","#002")),c=t(new Vp.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new Vp.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(c.update(u-r,200),u>=s+1e3&&(a.update(1e3*o/(u-s),100),s=u,o=0,l)){var d=performance.memory;l.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};Vp.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,c=48*o,l=3*o,u=2*o,d=3*o,h=15*o,f=74*o,p=30*o,m=document.createElement("canvas");m.width=a,m.height=c,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=t,g.fillRect(0,0,a,c),g.fillStyle=e,g.fillText(n,l,u),g.fillRect(d,h,f,p),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d,h,f,p),{dom:m,update:function(y,v){i=Math.min(i,y),r=Math.max(r,y),g.fillStyle=t,g.globalAlpha=1,g.fillRect(0,0,a,h),g.fillStyle=e,g.fillText(s(y)+" "+n+" ("+s(i)+"-"+s(r)+")",l,u),g.drawImage(m,d+o,h,f-o,p,d,h,f-o,p),g.fillRect(d+f-o,h,o,p),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d+f-o,h,o,s((1-y/v)*p))}}};const d3=Vp;class Pue{gui;fpsStats;memoryStats;isActive;constructor(){this.isActive="#debug"==window.location.hash,this.isActive&&(this.gui=new Rue,this.fpsStats=new d3,this.memoryStats=new d3,this.fpsStats.showPanel(0),this.memoryStats.showPanel(2),this.addToDocument())}isDebugModeEnabled(){return this.isActive}getGUI(){return this.gui}tick(){this.fpsStats.begin(),this.memoryStats.begin(),this.fpsStats.end(),this.memoryStats.end()}addToDocument(){const e=document.getElementById("performance_stats");if(null==e)throw new Error("Performance stats element not part of template");this.fpsStats.dom.style.position="relative",this.memoryStats.dom.style.position="relative",e.appendChild(this.fpsStats.dom),e.appendChild(this.memoryStats.dom)}}class Nue{cursorPosition=new Z(0,0);constructor(){window.addEventListener("mousemove",e=>{this.cursorPosition.x=e.clientX,this.cursorPosition.y=e.clientY})}getCursorPosition(){return this.cursorPosition}}const qo_apiUrl="https://0cc0ff23-9377-4009-a212-742a0aaa9598.eu-central-1.cloud.genez.io";class ll{name;type;paths;path;constructor(e,t,i,r){this.name=e,this.type=t,this.path=i,this.paths=r}}const Oue=[new ll("character","gltf",`${qo_apiUrl}/file/Character.glb`),new ll("study-mono","gltf",`${qo_apiUrl}/file/Study_Mono.glb`),new ll("logos","gltf",`${qo_apiUrl}/file/Logos.glb`),new ll("characterTexture","gltfTexture",`${qo_apiUrl}/texture/MonoboyTexture.jpg`),new ll("characterTextureInverted","gltfTexture",`${qo_apiUrl}/texture/MonoboyTexture_Inverted_2.jpg`),new ll("snapVFX","texture",`${qo_apiUrl}/texture/Snap_VFX.jpg`),new ll("logosTexture","gltfTexture",`${qo_apiUrl}/texture/Logos_Texture.jpg`)];let tC=null;class Lue{canvas;sizeUtils;timeUtils;cursorUtils;cameraManager;rendererManager;debugManager;world;scene;lightThemeColor=new fe(15856372);darkThemeColor=new fe(1842204);lightThemeMeshColor=new fe(16777215);darkThemeMeshColor=new fe(2697513);lightThemeOutlineColor=new fe(0);darkThemeOutlineColor=new fe(16777215);basicThemeMaterial;meshMonoMaterial=new si({color:"white",toneMapped:!1});meshOutlineMaterial=new si({color:"black",toneMapped:!1});debugMaterialRed=new si({color:"red",wireframe:!0,visible:!1});debugMaterialCyan=new si({color:"cyan",wireframe:!0,visible:!1});debugObject={};constructor(e){if(null!=tC)return tC;tC=this,this.canvas=e,Pr.getInstance().loadResources(Oue),this.sizeUtils=new lue,this.timeUtils=new uue,this.cursorUtils=new Nue,this.debugManager=new Pue,this.scene=new NB,this.cameraManager=new fue(this),this.rendererManager=new pue(this),this.world=new Mue(this);const t=Zr.getInstance().isDarkThemeEnabled();this.basicThemeMaterial=new si({color:t?this.darkThemeColor:this.lightThemeColor}),this.basicThemeMaterial.toneMapped=!1,this.sizeUtils.resizeEvent.subscribe(()=>{this.resize()}),this.timeUtils.tickEvent.subscribe(()=>{this.tick()}),Zr.getInstance().themeChangeEvent.subscribe(r=>{this.setThemeMaterials(r)}),this.setThemeMaterials(Zr.getInstance().isDarkThemeEnabled()),window.experience=this,this.debugManager.isDebugModeEnabled()&&this.setDebugSettings()}getSizeUtils(){return this.sizeUtils}getTimeUtils(){return this.timeUtils}getCursorUtils(){return this.cursorUtils}getCanvas(){return this.canvas}getScene(){return this.scene}getCameraManager(){return this.cameraManager}getRendererManager(){return this.rendererManager}getDebugManager(){return this.debugManager}getBasicThemeMaterial(){return this.basicThemeMaterial}getDebugMaterialRed(){return this.debugMaterialRed}getDebugMaterialCyan(){return this.debugMaterialCyan}getOutlineMaterial(){return this.meshOutlineMaterial}getMeshMonoMaterial(){return this.meshMonoMaterial}destroy(){this.sizeUtils.resizeEvent.unsubscribe(),this.timeUtils.tickEvent.unsubscribe(),this.scene.traverse(e=>{if(e instanceof Ht){e.geometry.dispose();for(const t in e.material){const i=e.material[t];i&&"function"==typeof i.dispose&&i.dispose()}}}),this.cameraManager.getControls().dispose(),this.rendererManager.getRenderer().dispose(),this.debugManager.isDebugModeEnabled()&&this.debugManager.getGUI().destroy()}resize(){this.cameraManager.resize(),this.rendererManager.resize()}tick(){document.hidden||(this.cameraManager.tick(),this.world.tick(),this.rendererManager.tick(),this.debugManager.isDebugModeEnabled()&&this.debugManager.tick())}setDebugSettings(){const e=this.debugManager.getGUI();this.debugMaterialCyan.visible=this.debugMaterialRed.visible=!0,this.basicThemeMaterial.copy(this.debugMaterialCyan);const t=e.addFolder("Scene");this.debugObject.toggleDarkTheme=()=>{Zr.getInstance().swapTheme()},this.debugObject.queueThemeSwitch=()=>{Zr.getInstance().themeChangeRequestEvent.next()},t.add(this.debugObject,"toggleDarkTheme").name("Toggle dark theme"),t.add(this.debugObject,"queueThemeSwitch").name("Queue theme switch")}setThemeMaterials(e){this.basicThemeMaterial.color=e?this.darkThemeColor:this.lightThemeColor,this.meshMonoMaterial.color=e?this.darkThemeMeshColor:this.lightThemeMeshColor,this.meshOutlineMaterial.color=e?this.darkThemeOutlineColor:this.lightThemeOutlineColor}}function Fue(n,e){1&n&&cb(0)}let kue=(()=>{class n{resourceLoadingService;themeService;scrollService;overlayComponent;experience;constructor(t,i,r){this.resourceLoadingService=t,this.themeService=i,this.scrollService=r}ngOnInit(){const t=document.getElementById("main_canvas");if(!(t instanceof HTMLCanvasElement))throw new Error("Could not find canvas element");this.experience=new Lue(t)}static \u0275fac=function(i){return new(i||n)(ie(Pr),ie(Zr),ie(kp))};static \u0275cmp=ns({type:n,selectors:[["app-modular"]],inputs:{overlayComponent:"overlayComponent"},decls:3,vars:1,consts:[["id","performance_stats"],["id","main_canvas"],[4,"ngComponentOutlet"]],template:function(i,r){1&i&&(Fi(0,"div",0)(1,"canvas",1),Jl(2,Fue,1,0,"ng-container",2)),2&i&&(er(2),us("ngComponentOutlet",r.overlayComponent))},dependencies:[BL],styles:["[_nghost-%COMP%]{position:fixed;z-index:-1;width:100%;height:100%}#performance_stats[_ngcontent-%COMP%]{position:fixed;display:flex;top:0;left:0;flex-direction:row}"]})}return n})();class Uue{id;title;description;sourceUrl;imageUrl;constructor(e,t,i,r,s){this.id=e,this.title=t,this.description=i,this.sourceUrl=r,this.imageUrl=s}getTitle(){return this.title}getDescription(){return this.description}getSource(){return this.sourceUrl}getImageUrl(){return this.imageUrl}}const Bue=["titleBanner"],Vue=["detailsBanner"],zue=["backgroundImage"],Hue=["codeIcon"];let Gue=(()=>{class n{titleBanner;detailsBanner;backgroundImage;codeIcon;project;animationTL;animationDuration=.35;secondaryAnimationDelay=this.animationDuration/4;constructor(){this.animationTL=Yu.timeline({defaults:{duration:this.animationDuration,ease:"power2.out"},paused:!0})}ngAfterViewInit(){this.registerAnimations()}registerAnimations(){this.animationTL.to(this.titleBanner.nativeElement,{height:"15%",top:"0%",borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},0).to(this.detailsBanner.nativeElement,{height:"50%"},0).to(this.backgroundImage.nativeElement,{opacity:1,height:"115%",width:"115%"},0).to(this.codeIcon.nativeElement,{rotateZ:180},this.secondaryAnimationDelay)}onHover(){this.animationTL.play()}onMouseExit(){this.animationTL.reverse()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ns({type:n,selectors:[["app-showcase-item"]],viewQuery:function(i,r){if(1&i&&(lf(Bue,5),lf(Vue,5),lf(zue,5),lf(Hue,5)),2&i){let s;yu(s=vu())&&(r.titleBanner=s.first),yu(s=vu())&&(r.detailsBanner=s.first),yu(s=vu())&&(r.backgroundImage=s.first),yu(s=vu())&&(r.codeIcon=s.first)}},inputs:{project:"project"},decls:19,vars:4,consts:[["titleBanner",""],["backgroundImage",""],["detailsBanner",""],["codeIcon",""],[1,"card-container",3,"mouseenter","mouseleave"],[1,"title-banner"],[1,"background"],["alt","",3,"src"],[1,"details-banner"],[1,"details-container"],[1,"description-container"],[1,"buttons-container"],[1,"link-button",3,"href"],[1,"icon-circle"],["src","../../assets/code-icon.svg","alt",""]],template:function(i,r){if(1&i){const s=lb();Yt(0,"div",4),Ui("mouseenter",function(){return Rm(s),Pm(r.onHover())})("mouseleave",function(){return Rm(s),Pm(r.onMouseExit())}),Yt(1,"div",5,0)(3,"h3"),vi(4),Ut()(),Yt(5,"div",6),Fi(6,"img",7,1),Ut(),Yt(8,"div",8,2)(10,"div",9)(11,"div",10)(12,"p"),vi(13),Ut()(),Yt(14,"div",11)(15,"a",12)(16,"div",13),Fi(17,"img",14,3),Ut()()()()()()}2&i&&(er(4),_u(r.project.getTitle()),er(2),Vg("src",r.project.getImageUrl(),tg),er(7),_u(r.project.getDescription()),er(2),Vg("href",r.project.getSource(),tg))},styles:[".theme-light[_ngcontent-%COMP%]{--primary-color: #ffffff;--secondary-color: #121212;--tertiary-color: #282828;--text-color: #121212;--text-color-light: #ffffff;--window-background-color: #F1F2F4}.theme-dark[_ngcontent-%COMP%]{--primary-color: #292929;--secondary-color: #121212;--tertiary-color: #000000;--text-color: #ffffff;--text-color-light: #ffffff;--window-background-color: #1c1c1c}[_nghost-%COMP%]{position:relative;flex:1;width:100%;height:100%}.card-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex}.title-banner[_ngcontent-%COMP%]{position:absolute;height:20%;width:100%;top:40%;display:flex;justify-content:center;align-items:center;background-color:#000000bf}.title-banner[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-color-light)}.background[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;z-index:-1;display:flex;justify-content:center;align-items:center;overflow:hidden;border-radius:10px}.background[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover;transform-origin:center;opacity:60%}.details-banner[_ngcontent-%COMP%]{position:absolute;height:0%;width:100%;align-self:flex-end;overflow:hidden;background-color:#000000bf;border-radius:0 0 10px 10px}.details-banner[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:20px 5%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.details-banner[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]{width:100%;overflow-y:auto}.details-banner[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-color-light)}.details-banner[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.details-banner[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{position:relative;width:50px;height:50px;display:flex;justify-content:center;align-items:center}.details-banner[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{position:relative;width:90%;height:90%;z-index:1;display:flex;justify-content:center;align-items:center;border-radius:50%;border:2px solid var(--primary-color);background-color:var(--tertiary-color)}.details-banner[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%;height:70%}"]})}return n})();function jue(n,e){1&n&&Fi(0,"app-showcase-item",4),2&n&&us("project",e.$implicit)}let Wue=(()=>{class n{projects=[];constructor(){this.addPlaceholderProjects()}addPlaceholderProjects(){const t=new Uue("0","PLACEHOLDER PROJECT","Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.","placeholder","https://images.pexels.com/photos/270348/pexels-photo-270348.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1");for(let i=0;i<4;i++)this.projects.push(t)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ns({type:n,selectors:[["app-skills"]],decls:8,vars:1,consts:[[1,"section-container","top-section"],[1,"section-container","bottom-section"],[1,"showcase"],[3,"project",4,"ngFor","ngForOf"],[3,"project"]],template:function(i,r){1&i&&(Yt(0,"div",0)(1,"h2"),vi(2,"TECHNICAL EXPERIENCE"),Ut()(),Yt(3,"div",1)(4,"h2"),vi(5,"PREVIOUS WORK"),Ut(),Yt(6,"div",2),Jl(7,jue,1,1,"app-showcase-item",3),Ut()()),2&i&&(er(7),us("ngForOf",r.projects))},dependencies:[zL,Gue],styles:[".theme-light[_ngcontent-%COMP%]{--primary-color: #ffffff;--secondary-color: #121212;--tertiary-color: #282828;--text-color: #121212;--text-color-light: #ffffff;--window-background-color: #F1F2F4}.theme-dark[_ngcontent-%COMP%]{--primary-color: #292929;--secondary-color: #121212;--tertiary-color: #000000;--text-color: #ffffff;--text-color-light: #ffffff;--window-background-color: #1c1c1c}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;height:100vh;width:100%;padding:75px 0;box-sizing:border-box}.section-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:flex-start;padding:0 5%;box-sizing:border-box}.section-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3.5rem;margin:0}.section-container.top-section[_ngcontent-%COMP%]{height:35%}.section-container.bottom-section[_ngcontent-%COMP%]{flex-grow:2}.showcase[_ngcontent-%COMP%]{width:100%;display:flex;flex-grow:2;flex-direction:row;gap:2%;margin-top:5vh}"]})}return n})(),$ue=(()=>{class n{progressPercentage;isLoading;constructor(){this.progressPercentage=0,this.isLoading=!0,document.body.classList.add("no-scroll"),Pr.getInstance().loadingFinishedEvent.subscribe(()=>{const t=document.getElementById("overlay-container");null!=t&&(Yu.to(t,{autoAlpha:0,duration:1}),document.body.classList.remove("no-scroll"))}),Pr.getInstance().loadingProgressEvent.subscribe(t=>{this.progressPercentage=100*t})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ns({type:n,selectors:[["app-loading-overlay"]],decls:3,vars:1,consts:[["id","overlay-container"]],template:function(i,r){1&i&&(Yt(0,"div",0)(1,"h3"),vi(2),Ut()()),2&i&&(er(2),_u(r.progressPercentage))},styles:["#overlay-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:2;display:flex;align-items:center;justify-content:center;background-color:var(--tertiary-color);opacity:100}#overlay-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color-light)}"]})}return n})();class D_{}class I_{}class hr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof hr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new hr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof hr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class que{encodeKey(e){return h3(e)}encodeValue(e){return h3(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Yue=/%(\d[a-f0-9])/gi,Zue={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function h3(n){return encodeURIComponent(n).replace(Yue,(e,t)=>Zue[t]??e)}function R_(n){return`${n}`}class Ua{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new que,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Xue(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(R_):[R_(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ua({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(R_(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(R_(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Kue{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function f3(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function p3(n){return typeof Blob<"u"&&n instanceof Blob}function m3(n){return typeof FormData<"u"&&n instanceof FormData}class zp{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Jue(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new hr,this.context??=new Kue,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ua,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||f3(this.body)||p3(this.body)||m3(this.body)||function Que(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Ua?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||m3(this.body)?null:p3(this.body)?this.body.type||null:f3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ua?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new zp(t,i,o,{params:u,headers:l,context:d,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}}var Ba=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ba||{});class nC{constructor(e,t=200,i="OK"){this.headers=e.headers||new hr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class P_ extends nC{constructor(e={}){super(e),this.type=Ba.ResponseHeader}clone(e={}){return new P_({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ul extends nC{constructor(e={}){super(e),this.type=Ba.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ul({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class $d extends nC{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function iC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let y3=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof zp)s=t;else{let c,l;c=r.headers instanceof hr?r.headers:new hr(r.headers),r.params&&(l=r.params instanceof Ua?r.params:new Ua({fromObject:r.params})),s=new zp(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=Ze(s).pipe(Tu(c=>this.handler.handle(c)));if(t instanceof zp||"events"===r.observe)return o;const a=o.pipe(Eo(c=>c instanceof ul));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(bt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(bt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(bt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(bt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ua).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,iC(r,i))}post(t,i,r={}){return this.request("POST",t,iC(r,i))}put(t,i,r={}){return this.request("PUT",t,iC(r,i))}static{this.\u0275fac=function(i){return new(i||n)(Ne(D_))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();const nde=/^\)\]\}',?\n/;function v3(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let rC=(()=>{class n{constructor(){this.fetchImpl=K(rde,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=K(Ct)}handle(t){return new Dn(i=>{const r=new AbortController;return this.doRequest(t,r.signal,i).then(sC,s=>i.error(new $d({error:s}))),()=>r.abort()})}doRequest(t,i,r){var s=this;return xa(function*(){const o=s.createRequestInit(t);let a;try{const p=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:i,...o}));(function sde(n){n.then(sC,sC)})(p),r.next({type:Ba.Sent}),a=yield p}catch(p){return void r.error(new $d({error:p,status:p.status??0,statusText:p.statusText,url:t.urlWithParams,headers:p.headers}))}const c=new hr(a.headers),l=a.statusText,u=v3(a)??t.urlWithParams;let d=a.status,h=null;if(t.reportProgress&&r.next(new P_({headers:c,status:d,statusText:l,url:u})),a.body){const p=a.headers.get("content-length"),m=[],g=a.body.getReader();let v,_,y=0;const x=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular(xa(function*(){for(;;){const{done:b,value:E}=yield g.read();if(b)break;if(m.push(E),y+=E.length,t.reportProgress){_="text"===t.responseType?(_??"")+(v??=new TextDecoder).decode(E,{stream:!0}):void 0;const A=()=>r.next({type:Ba.DownloadProgress,total:p?+p:void 0,loaded:y,partialText:_});x?x.run(A):A()}}}));const S=s.concatChunks(m,y);try{const b=a.headers.get("Content-Type")??"";h=s.parseBody(t,S,b)}catch(b){return void r.error(new $d({error:b,headers:new hr(a.headers),status:a.status,statusText:a.statusText,url:v3(a)??t.urlWithParams}))}}0===d&&(d=h?200:0),d>=200&&d<300?(r.next(new ul({body:h,headers:c,status:d,statusText:l,url:u})),r.complete()):r.error(new $d({error:h,headers:c,status:d,statusText:l,url:u}))})()}parseBody(t,i,r){switch(t.responseType){case"json":const s=(new TextDecoder).decode(i).replace(nde,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){const i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>i[s]=o.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(i["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){const r=new Uint8Array(i);let s=0;for(const o of t)r.set(o,s),s+=o.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();class rde{}function sC(){}function _3(n,e){return e(n)}function ode(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const cde=new he(""),Hp=new he(""),x3=new he(""),M3=new he("",{providedIn:"root",factory:()=>!0});function lde(){let n=null;return(e,t)=>{null===n&&(n=(K(cde,{optional:!0})??[]).reduceRight(ode,_3));const i=K(fo);if(K(M3)){const s=i.add();return n(e,t).pipe(Af(()=>i.remove(s)))}return n(e,t)}}let b3=(()=>{class n extends D_{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=K(fo),this.contributeToStability=K(M3)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Hp),...this.injector.get(x3,[])]));this.chain=i.reduceRight((r,s)=>function ade(n,e,t){return(i,r)=>is(t,()=>e(i,s=>n(s,r)))}(r,s,this.injector),_3)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Af(()=>this.pendingTasks.remove(i)))}return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(Ne(I_),Ne(Ii))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();const pde=/^\)\]\}',?\n/;let w3=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ee(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Xn(i.\u0275loadImpl()):Ze(null)).pipe(gs(()=>new Dn(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((m,g)=>o.setRequestHeader(m,g.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const m=t.detectContentTypeHeader();null!==m&&o.setRequestHeader("Content-Type",m)}if(t.responseType){const m=t.responseType.toLowerCase();o.responseType="json"!==m?m:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const m=o.statusText||"OK",g=new hr(o.getAllResponseHeaders()),y=function mde(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return c=new P_({headers:g,status:o.status,statusText:m,url:y}),c},u=()=>{let{headers:m,status:g,statusText:y,url:v}=l(),_=null;204!==g&&(_=typeof o.response>"u"?o.responseText:o.response),0===g&&(g=_?200:0);let x=g>=200&&g<300;if("json"===t.responseType&&"string"==typeof _){const S=_;_=_.replace(pde,"");try{_=""!==_?JSON.parse(_):null}catch(b){_=S,x&&(x=!1,_={error:b,text:_})}}x?(s.next(new ul({body:_,headers:m,status:g,statusText:y,url:v||void 0})),s.complete()):s.error(new $d({error:_,headers:m,status:g,statusText:y,url:v||void 0}))},d=m=>{const{url:g}=l(),y=new $d({error:m,status:o.status||0,statusText:o.statusText||"Unknown Error",url:g||void 0});s.error(y)};let h=!1;const f=m=>{h||(s.next(l()),h=!0);let g={type:Ba.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),"text"===t.responseType&&o.responseText&&(g.partialText=o.responseText),s.next(g)},p=m=>{let g={type:Ba.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),s.next(g)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),s.next({type:Ba.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(Ne(YL))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();const oC=new he(""),S3=new he("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),T3=new he("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class C3{}let vde=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=FL(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(Ne(ir),Ne(na),Ne(S3))}}static{this.\u0275prov=Te({token:n,factory:n.\u0275fac})}}return n})();function _de(n,e){const t=n.url.toLowerCase();if(!K(oC)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=K(C3).getToken(),r=K(T3);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Va=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Va||{});function xde(...n){const e=[y3,w3,b3,{provide:D_,useExisting:b3},{provide:I_,useFactory:()=>K(rC,{optional:!0})??K(w3)},{provide:Hp,useValue:_de,multi:!0},{provide:oC,useValue:!0},{provide:C3,useClass:vde}];for(const t of n)e.push(...t.\u0275providers);return function oh(n){return{\u0275providers:n}}(e)}const A3=new he("");function Mde(){return function dl(n,e){return{\u0275kind:n,\u0275providers:e}}(Va.LegacyInterceptors,[{provide:A3,useFactory:lde},{provide:Hp,useExisting:A3,multi:!0}])}let Ide=(()=>{class n{httpClient;apiAddress=qo_apiUrl;constructor(t){this.httpClient=t}sendGetRequest(t){const i=new hr({"Content-Type":"application/json"});return this.httpClient.get(this.apiAddress+t,{headers:i})}sendPostRequest(t,i){const r=new hr({"Content-Type":"application/json"});return this.httpClient.post(this.apiAddress+t,i,{headers:r})}static \u0275fac=function(i){return new(i||n)(Ne(y3))};static \u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Rde{name;email;message;constructor(e,t,i){this.name=e,this.email=t,this.message=i}}let F3=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(ie(yo),ie(yr))}}static{this.\u0275dir=Ke({type:n})}}return n})(),hl=(()=>{class n extends F3{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ei(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,features:[kt]})}}return n})();const ro=new he(""),Ode={provide:ro,useExisting:$t(()=>O_),multi:!0},Fde=new he("");let O_=(()=>{class n extends F3{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Lde(){const n=ua()?ua().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(ie(yo),ie(yr),ie(Fde,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Ui("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[an([Ode]),kt]})}}return n})();function za(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Ai=new he(""),Ha=new he(""),kde=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function z3(n){return za(n.value)?{required:!0}:null}function G3(n){return za(n.value)||kde.test(n.value)?null:{email:!0}}function L_(n){return null}function q3(n){return null!=n}function X3(n){return mf(n)?Xn(n):n}function Y3(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Z3(n,e){return e.map(t=>t(n))}function K3(n){return n.map(e=>function Ude(n){return!n.validate}(e)?e:t=>e.validate(t))}function aC(n){return null!=n?function J3(n){if(!n)return null;const e=n.filter(q3);return 0==e.length?null:function(t){return Y3(Z3(t,e))}}(K3(n)):null}function cC(n){return null!=n?function Q3(n){if(!n)return null;const e=n.filter(q3);return 0==e.length?null:function(t){return function Pde(...n){const e=LF(n),{args:t,keys:i}=FF(n),r=new Dn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let d=!1;Us(t[u]).subscribe(new Vn(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?UF(i,a):a),s.complete())}))}});return e?r.pipe(kF(e)):r}(Z3(t,e).map(X3)).pipe(bt(Y3))}}(K3(n)):null}function ez(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lC(n){return n?Array.isArray(n)?n:[n]:[]}function F_(n,e){return Array.isArray(n)?n.includes(e):n===e}function iz(n,e){const t=lC(e);return lC(n).forEach(r=>{F_(t,r)||t.push(r)}),t}function rz(n,e){return lC(e).filter(t=>!F_(n,t))}class sz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Xi extends sz{get formDirective(){return null}get path(){return null}}class Ga extends sz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oz{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let az=(()=>{class n extends oz{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(ie(Ga,2))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Ng("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[kt]})}}return n})(),cz=(()=>{class n extends oz{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(ie(Xi,10))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&Ng("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[kt]})}}return n})();const Gp="VALID",U_="INVALID",qd="PENDING",jp="DISABLED";class Xd{}class uz extends Xd{constructor(e,t){super(),this.value=e,this.source=t}}class hC extends Xd{constructor(e,t){super(),this.pristine=e,this.source=t}}class fC extends Xd{constructor(e,t){super(),this.touched=e,this.source=t}}class B_ extends Xd{constructor(e,t){super(),this.status=e,this.source=t}}function pC(n){return(V_(n)?n.validators:n)||null}function mC(n,e){return(V_(e)?e.asyncValidators:n)||null}function V_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class gC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Mf(()=>this.statusReactive()),this.statusReactive=Yl(void 0),this._pristine=Mf(()=>this.pristineReactive()),this.pristineReactive=Yl(!0),this._touched=Mf(()=>this.touchedReactive()),this.touchedReactive=Yl(!1),this._events=new fn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ks(this.statusReactive)}set status(e){ks(()=>this.statusReactive.set(e))}get valid(){return this.status===Gp}get invalid(){return this.status===U_}get pending(){return this.status==qd}get disabled(){return this.status===jp}get enabled(){return this.status!==jp}get pristine(){return ks(this.pristineReactive)}set pristine(e){ks(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ks(this.touchedReactive)}set touched(e){ks(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rz(e,this._rawAsyncValidators))}hasValidator(e){return F_(this._rawValidators,e)}hasAsyncValidator(e){return F_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new fC(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&!1!==e.emitEvent&&this._events.next(new fC(!1,i))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new hC(!1,i))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&!1!==e.emitEvent&&this._events.next(new hC(!0,i))}markAsPending(e={}){this.status=qd;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new B_(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue();const i=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new uz(this.value,i)),this._events.next(new B_(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gp,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gp||this.status===qd)&&this._runAsyncValidator(i,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new uz(this.value,t)),this._events.next(new B_(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jp:Gp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=qd,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const i=X3(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new B_(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new pn,this.statusChanges=new pn}_calculateStatus(){return this._allControlsDisabled()?jp:this.errors?U_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qd)?qd:this._anyControlsHaveStatus(U_)?U_:Gp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new hC(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new fC(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){V_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Wde(n){return Array.isArray(n)?aC(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function $de(n){return Array.isArray(n)?cC(n):n||null}(this._rawAsyncValidators)}}class yC extends gC{constructor(e,t,i){super(pC(t),mC(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function hz(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new ee(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function dz(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new ee(1e3,"");if(!i[t])throw new ee(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Yd=new he("CallSetDisabledState",{providedIn:"root",factory:()=>z_}),z_="always";function Wp(n,e,t=z_){vC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Yde(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fz(n,e)})}(n,e),function Kde(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Zde(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fz(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Xde(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function j_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vC(n,e){const t=function tz(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ez(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function nz(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ez(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();j_(e._rawValidators,r),j_(e._rawAsyncValidators,r)}function fz(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const nhe={provide:Xi,useExisting:$t(()=>$_)},$p=Promise.resolve();let $_=(()=>{class n extends Xi{get submitted(){return ks(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Mf(()=>this.submittedReactive()),this.submittedReactive=Yl(!1),this._directives=new Set,this.ngSubmit=new pn,this.form=new yC({},aC(t),cC(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$p.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Wp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$p.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$p.then(()=>{const i=this._findContainer(t.path),r=new yC({});(function pz(n,e){vC(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$p.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){$p.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),function mz(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(ie(Ai,10),ie(Ha,10),ie(Yd,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&Ui("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[an([nhe]),kt]})}}return n})();function gz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function yz(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vz=class extends gC{constructor(e=null,t,i){super(pC(t),mC(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),V_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=yz(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){yz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},she={provide:Ga,useExisting:$t(()=>bC)},Mz=Promise.resolve();let bC=(()=>{class n extends Ga{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new vz,this._registered=!1,this.name="",this.update=new pn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function MC(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===O_?t=s:function ehe(n){return Object.getPrototypeOf(n.constructor)===hl}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function xC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Wp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Mz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&bu(i);Mz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function H_(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(ie(Xi,9),ie(Ai,10),ie(Ha,10),ie(ro,10),ie(yf,8),ie(Yd,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[an([she]),kt,kr]})}}return n})(),bz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),fl=(()=>{class n{constructor(){this._validator=L_}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):L_,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ke({type:n,features:[kr]})}}return n})();const Ehe={provide:Ai,useExisting:$t(()=>q_),multi:!0};let q_=(()=>{class n extends fl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=bu,this.createValidator=t=>z3}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ei(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&Os("required",r._enabled?"":null)},inputs:{required:"required"},features:[an([Ehe]),kt]})}}return n})();const She={provide:Ai,useExisting:$t(()=>AC),multi:!0};let AC=(()=>{class n extends fl{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=bu,this.createValidator=t=>G3}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ei(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[an([She]),kt]})}}return n})(),Dhe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=Ss({})}}return n})(),Rhe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Yd,useValue:t.callSetDisabledState??z_}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=Ss({imports:[Dhe]})}}return n})();function Phe(n,e){if(1&n){const t=lb();Yt(0,"form",null,0)(2,"div",4)(3,"label",5),vi(4,"Name"),Ut(),Fi(5,"textarea",6),Ut(),Yt(6,"div",4)(7,"label",7),vi(8,"Email"),Ut(),Fi(9,"textarea",8),Ut(),Yt(10,"div",9)(11,"label",10),vi(12,"Message"),Ut(),Fi(13,"textarea",11),Ut(),Yt(14,"button",12),Ui("click",function(){Rm(t);const r=mb(1);return Pm(Bg().onSendMessage(r))}),vi(15," Send "),Ut()()}if(2&n){const t=mb(1);er(14),us("disabled",!t.valid)}}function Nhe(n,e){1&n&&(Yt(0,"h3"),vi(1,"Message sending..."),Ut())}function Ohe(n,e){if(1&n&&(Yt(0,"h3"),vi(1),Ut()),2&n){const t=Bg(2);er(),_u(t.notificationMessage)}}function Lhe(n,e){if(1&n&&(Yt(0,"div",13),Jl(1,Nhe,2,0,"h3",2)(2,Ohe,2,1,"h3",2),Ut()),2&n){const t=Bg();er(),us("ngIf",!t.notificationMessage),er(),us("ngIf",t.notificationMessage)}}let Fhe=(()=>{class n{daoService;messageSent=!1;notificationMessage=null;constructor(t){this.daoService=t}onSendMessage(t){this.messageSent=!0;const i=t.value,r=new Rde(i.name,i.email,i.message);this.daoService.sendPostRequest("/contact",r).subscribe({next:s=>this.notificationMessage="Your message has been sent. Thank you for reaching out!",error:s=>this.notificationMessage=s.message})}static \u0275fac=function(i){return new(i||n)(ie(Ide))};static \u0275cmp=ns({type:n,selectors:[["app-contact"]],decls:5,vars:2,consts:[["messageForm","ngForm"],[1,"contact-window-container"],[4,"ngIf"],["class","notification-text",4,"ngIf"],[1,"input-section"],["for","name"],["name","name","ngModel","","required",""],["for","email"],["name","email","ngModel","","required","","email","","autocomplete","email"],["id","message-section",1,"input-section"],["for","message"],["id","message-input","name","message","ngModel","","required",""],["type","submit",3,"click","disabled"],[1,"notification-text"]],template:function(i,r){1&i&&(Yt(0,"h2"),vi(1,"Contact me"),Ut(),Yt(2,"div",1),Jl(3,Phe,16,1,"form",2)(4,Lhe,3,2,"div",3),Ut()),2&i&&(er(3),us("ngIf",!r.messageSent),er(),us("ngIf",r.messageSent))},dependencies:[GL,bz,O_,az,cz,q_,AC,bC,$_],styles:[".theme-light[_ngcontent-%COMP%]{--primary-color: #ffffff;--secondary-color: #121212;--tertiary-color: #282828;--text-color: #121212;--text-color-light: #ffffff;--window-background-color: #F1F2F4}.theme-dark[_ngcontent-%COMP%]{--primary-color: #292929;--secondary-color: #121212;--tertiary-color: #000000;--text-color: #ffffff;--text-color-light: #ffffff;--window-background-color: #1c1c1c}[_nghost-%COMP%]{width:100%;height:100vh;padding:75px 5%;box-sizing:border-box;display:flex;justify-content:center;flex-direction:column}h2[_ngcontent-%COMP%]{font-size:3.5rem;justify-self:flex-start}.contact-window-container[_ngcontent-%COMP%]{position:relative;height:60%;width:35%;padding:2%;box-sizing:border-box;background:var(--window-background-color);border-radius:15px;overflow:hidden}.contact-window-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;gap:5%}.contact-window-container[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-window-container[_ngcontent-%COMP%]   .input-section#message-section[_ngcontent-%COMP%]{height:40%;flex-grow:2;display:flex;flex-direction:column}.contact-window-container[_ngcontent-%COMP%]   .input-section#message-section[_ngcontent-%COMP%]   #message-input[_ngcontent-%COMP%]{flex-grow:3}.contact-window-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .contact-window-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--text-color)}.contact-window-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .contact-window-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--primary-color);border:none;border-radius:5px}.contact-window-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;color:var(--text-color);padding:5px;box-sizing:border-box;font-size:1.5rem}.contact-window-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30%;padding:5px 0;align-self:flex-end;cursor:pointer}.contact-window-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:50%;cursor:none}.contact-window-container[_ngcontent-%COMP%]   .under-construction-banner[_ngcontent-%COMP%]{position:absolute;top:40%;left:-30%;width:150%;height:20%;display:flex;justify-content:center;align-items:center;background-color:#b3b33a;border:3px solid black;box-sizing:border-box;opacity:50%;transform:rotate(45deg)}.notification-text[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}"]})}return n})(),khe=(()=>{class n{themeService;scrollService;homeComponent=o3;constructor(t,i){this.themeService=t,this.scrollService=i;const r=t.isDarkThemeEnabled();document.documentElement.className=r?"theme-dark":"theme-light",t.themeChangeEvent.subscribe(s=>{document.documentElement.className=s?"theme-dark":"theme-light"})}static \u0275fac=function(i){return new(i||n)(ie(Zr),ie(kp))};static \u0275cmp=ns({type:n,selectors:[["app-root"]],decls:6,vars:0,template:function(i,r){1&i&&Fi(0,"app-header")(1,"app-modular")(2,"app-home")(3,"app-skills")(4,"app-contact")(5,"app-loading-overlay")},dependencies:[cue,kue,o3,Wue,$ue,Fhe],styles:[".theme-light[_ngcontent-%COMP%]{--primary-color: #ffffff;--secondary-color: #121212;--tertiary-color: #282828;--text-color: #121212;--text-color-light: #ffffff;--window-background-color: #F1F2F4}.theme-dark[_ngcontent-%COMP%]{--primary-color: #292929;--secondary-color: #121212;--tertiary-color: #000000;--text-color: #ffffff;--text-color-light: #ffffff;--window-background-color: #1c1c1c}[_nghost-%COMP%]{position:relative;z-index:-1;display:inline-block;height:max-content;width:100%;background-color:var(--primary-color)}"]})}return n})(),Uhe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ao({type:n,bootstrap:[khe]});static \u0275inj=Ss({providers:[xde(Mde())],imports:[bK,Iee,Rhe]})}return n})();xK().bootstrapModule(Uhe).catch(n=>console.error(n))}},Kd=>{Kd(Kd.s=187)}]);